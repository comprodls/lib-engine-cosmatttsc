"use strict";function _defineProperty(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}!function(e){e.fn.TSCurve=function(o){function a(e){var e=e-1;i.find("#driveNameId").text(s.format(n.motorData[e].maxSpeed)),i.find("#motorNameId").text("("+n.motorData[e].motorPartNo+")"),i.find("#voltageInfoId").text(s.format(n.motorData[e].motorInertia)),i.find("#peakStallTorque").text(s.format(n.motorData[e].peakStallTorque)),i.find("#continuousStallTorque").text(s.format(n.motorData[e].continuousStallTorque)),i.find("#solutionTitle").text("#"+(e+1)),i.find("#motorName").text("("+n.motorData[e].motorPartNo+")"),n.motorSelectedIndex=e,n.motorInertia=n.motorData[e].motorInertia,i.find("#tempSlider").slider("setValue",n.motorData[n.motorSelectedIndex].temp),i.find(".amount_TEMPERATURE").val(n.motorData[n.motorSelectedIndex].temp),i.find("#altitudeSlider").slider("setValue",n.motorData[n.motorSelectedIndex].altitude),i.find(".amount_ALTITUDE").val(n.motorData[n.motorSelectedIndex].altitude),n.defaultPeakStallTorque=n.motorData[n.motorSelectedIndex].peakStallTorque,n.defaultRollOffPoint=n.motorData[n.motorSelectedIndex].rollOffPoint,n.defaultRollOffSpeed=n.motorData[n.motorSelectedIndex].rollOffSpeed,n.defaultPeakTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].peakTorqueAtMaxSpeed,n.defaultContinuousStallTorque=n.motorData[n.motorSelectedIndex].continuousStallTorque,n.defaultContinuosTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed,n.motorSelectedIndex=e,n.peakMotorData=[],n.rmsMotorData=[],n.peakAcceMotor=n.peakAcceData*n.transmissionRaioVal,n.peakMotorData[0]=n.peakPoints[0]*n.transmissionRaioVal,n.peakMotorData[1]=parseFloat(n.peakPoints[1])/n.transmissionRaioVal+n.peakAcceMotor*n.motorInertia,n.rmsAcceMotor=n.rmsAcceData*n.transmissionRaioVal,n.rmsMotorData[0]=n.peakMotorData[0],n.rmsMotorData[1]=parseFloat(n.rmsPoints[1])/n.transmissionRaioVal+n.rmsAcceMotor*n.motorInertia,i.find(".cosmatt-unitComboBox").length>0&&(i.find(".peakTorqueMotorSide").find(".cosmatt-unitComboBox").length>0&&i.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[1]),i.find(".rmsTorqueMotorSide").find(".cosmatt-unitComboBox").length>0&&i.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsMotorData[1]),i.find(".peakSpeedMotorSide").find(".cosmatt-unitComboBox").length>0&&i.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[0]),i.find(".rmsAccelerationMotorSide").find(".cosmatt-unitComboBox").length>0&&i.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsAcceMotor),i.find(".peakAccelerationMotorSide").find(".cosmatt-unitComboBox").length>0&&i.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.peakAcceMotor)),b(),v()}var t,i=e(this),r={showApplicationPoints:!1,motorSelectedIndex:3,rmsPoints:[1200,5.9],peakPoints:[1200,9.4],peakAcceData:1478,rmsAcceData:1097,quadrant:1,sliderLimit:{peakMaxSpeed:800,peakMaxTorque:100,rmsMaxSpeed:800,rmsMaxTorque:100,maxTemp:125,maxAltitude:1e4,maxVoltage:10,maxTrRatio:100},showQuadrantToggle:!0,showMotorTsCurve:!0,showMotorSelForm:!0,showAppPointsForm:!0,showEnviorForm:!0,showTransmissionForm:!0,uniqeId:"1",xaxisMaxVale:12e4,firstTimeCall:"0",motorData:[{motorPartNo:"CPB-1-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:1,peakStallTorque:2.7,rollOffPoint:2.7,peakTorqueAtMaxSpeed:1.8,continuosTorqueAtMaxSpeed:.72,rollOffSpeed:3200,maxSpeed:4500,temp:40,altitude:1,motorInertia:1e-5},{motorPartNo:"CPB-1-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:1.7,peakStallTorque:4.4,rollOffPoint:4.4,peakTorqueAtMaxSpeed:2.4,continuosTorqueAtMaxSpeed:1.302,rollOffSpeed:3300,maxSpeed:5e3,temp:40,altitude:1,motorInertia:15e-6},{motorPartNo:"CPB-1-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:2.3,peakStallTorque:7.5,rollOffPoint:7.5,peakTorqueAtMaxSpeed:4.2,continuosTorqueAtMaxSpeed:1.71,rollOffSpeed:3100,maxSpeed:4500,temp:40,altitude:1,motorInertia:25e-6},{motorPartNo:"CPB-2-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:2,peakStallTorque:3.8,rollOffPoint:3.8,peakTorqueAtMaxSpeed:2,continuosTorqueAtMaxSpeed:1.7,rollOffSpeed:4e3,maxSpeed:6e3,temp:40,altitude:1,motorInertia:65e-6},{motorPartNo:"CPB-2-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:3.4,peakStallTorque:7.8,rollOffPoint:7.8,peakTorqueAtMaxSpeed:4,continuosTorqueAtMaxSpeed:3.09,rollOffSpeed:4400,maxSpeed:6e3,temp:40,altitude:1,motorInertia:8e-5},{motorPartNo:"CPB-2-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:4.2,peakStallTorque:11,rollOffPoint:11,peakTorqueAtMaxSpeed:6,continuosTorqueAtMaxSpeed:2.9,rollOffSpeed:3100,maxSpeed:5e3,temp:40,altitude:1,motorInertia:12e-5},{motorPartNo:"CPB-3-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:9,peakStallTorque:21,rollOffPoint:21,peakTorqueAtMaxSpeed:13,continuosTorqueAtMaxSpeed:6.3,rollOffSpeed:3200,maxSpeed:4e3,temp:40,altitude:1,motorInertia:4e-4},{motorPartNo:"CPB-3-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:10,peakStallTorque:29,rollOffPoint:29,peakTorqueAtMaxSpeed:16,continuosTorqueAtMaxSpeed:6.91,rollOffSpeed:2500,maxSpeed:3500,temp:40,altitude:1,motorInertia:6e-4},{motorPartNo:"CPB-4-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:20,peakStallTorque:50,rollOffPoint:50,peakTorqueAtMaxSpeed:25,continuosTorqueAtMaxSpeed:15.3,rollOffSpeed:1800,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0015},{motorPartNo:"CPB-4-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:25,peakStallTorque:68,rollOffPoint:68,peakTorqueAtMaxSpeed:30,continuosTorqueAtMaxSpeed:17.53,rollOffSpeed:1900,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0022},{motorPartNo:"CPB-4-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:32,peakStallTorque:75,rollOffPoint:75,peakTorqueAtMaxSpeed:32,continuosTorqueAtMaxSpeed:22.8,rollOffSpeed:2100,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0029}],numberFormatterOptions:{significantDigits:3,maxPositiveExponent:6,minNegativeExponent:-4}},n=e.extend({},r,o),s=new Cosmatt.NumberFormatter(n.numberFormatterOptions),d=function(e,o){return""===e.toString().trim()?e:s.format(e)},l=function(){var o=e('<div class="tsCruveContainer row m-0"></div>');i.append(o),u(o)},u=function(o){var a=e('<div id="servoMotorTSCurve"></div>');if(o.append(a),n.showMotorSelForm||n.showAppPointsForm||n.showEnviorForm||n.showTransmissionForm){a.addClass("col-xs-6 col-6");var t=e('<div class="col-xs-6 col-6" id="servoMotorArea"></div>');o.append(t),p(t)}else a.addClass("col-xs-12 col-12"),i.find(".tsCruveContainer").addClass("widthMaxLimit");q(a)},p=function(o){var a=e('<div id="motorAreaAccordionContainer"></div>');o.append(a);var t=e('<div class="panel-group" id="accordion'+n.uniqeId+'" role="tablist" aria-multiselectable="true"></div>');a.append(t),n.showMotorTsCurve||(n.showMotorSelForm=!1),n.showMotorSelForm&&c(t),n.showApplicationPoints||(n.showAppPointsForm=!1),n.showAppPointsForm&&x(t),n.showEnviorForm&&h(t),n.showTransmissionForm&&C(t),v()},c=function(o){var t=e('<div class="panelNew panel-defaultNew"></div>');o.append(t);var i=e('<div class="panel-heading panelHeadingNew" role="tab" id="headingOne"> <div id="PaginationDiv" class="Pagination"></div><span class="accordion-plus-minus  pull-right" aria-hidden="true" style="color: grey;"></span> </div>');t.append(i);var r=e('<div id="collapseOne" class="panel-collapse collapse motorDataOpenPanle" role="tabpanel" aria-labelledby="headingOne"></div>');t.append(r);var s=e('<div class="panel-body"></div>');r.append(s),t.on("show.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),t.on("hide.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")});var s=t.find("#collapseOne .panel-body"),d=e('<div id="motorDataContainer" class="row"></div>');s.append(d);var l=e('<div class="col-xs-12 col-12 solutionInfoTitle">Selected Motor: <div id="solutionTitle"></div>&nbsp;<div id="motorName"></div> <div class="statusContainer"><div class="solutionStatus motorPass" id="statusValueContainer">Pass</div></div></div>');d.append(l);var u=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');d.append(u);var p=e('<div class="col-xs-6 col-6 padding-right-zero"><span class="maxSpeedTitle">Maximum Speed:&nbsp;</span><span class="maxSpeedValue" id="driveNameId">'+n.motorData[n.motorSelectedIndex].maxSpeed+'</span><span class="unitStyle">&nbsp;rpm</span></div>');u.append(p);var c=e('<div class="col-xs-6 col-6 padding-left-right-zero"><span class="inertiaTitle">Inertia:&nbsp;</span><span class="inertiaValue" id="voltageInfoId">'+n.motorData[n.motorSelectedIndex].motorInertia+'</span><div class="display-inline unitStyle">&nbsp;kg-m<sup>2</sup></div></div>');u.append(c);var m=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');d.append(m);var f=e('<div class="col-xs-6 col-6 padding-right-zero"><span class="pkStallTorqueTitle">Peak Stall Torque:&nbsp;</span><span class="peakStaTorqueVal" id="peakStallTorque">'+n.motorData[n.motorSelectedIndex].peakStallTorque+'</span><span class="unitStyle">&nbsp;N-m</span></div>');m.append(f);var v=e('<div class="col-xs-6 col-6 padding-left-right-zero"><div class="contStallTorqueTitle">Continuous Stall Torque:&nbsp;</div><div class="continuousStaTorqueVal" id="continuousStallTorque">'+n.motorData[n.motorSelectedIndex].continuousStallTorque+'</div><div class="unitStyle">&nbsp;N-m</div></div>');m.append(v),i.find("#PaginationDiv").Folio({totalPages:n.motorData.length,maxPages:9,activePage:n.motorSelectedIndex,previousClass:"fa fa-chevron-left",nextClass:"fa fa-chevron-right",onUpdate:function(e){n.firstTimeCall=e,a(e)}})},m=function(){var e=i.find(".tsCruveContainer");e.width()<=940?(e.find("#servoMotorArea").addClass("resizeWidth"),e.find("#servoMotorTSCurve").addClass("resizeWidth")):(e.find("#servoMotorArea").removeClass("resizeWidth"),e.find("#servoMotorTSCurve").removeClass("resizeWidth"))},f=function(e,o){var a=t.getData();switch(n.transmissionRaioVal=parseFloat(o),e){case"PeakTorque":n.peakMotorData[1]=parseFloat(n.peakPoints[1])/n.transmissionRaioVal+n.peakAcceMotor*n.motorInertia,a[1].data[0][1]=n.peakMotorData[1],i.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[1]);break;case"RmsTorque":n.rmsMotorData[1]=parseFloat(n.rmsPoints[1])/n.transmissionRaioVal+n.rmsAcceMotor*n.motorInertia,a[3].data[0][1]=n.rmsMotorData[1],i.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsMotorData[1]);break;case"PeakSpeed":n.rmsMotorData[0]=n.peakMotorData[0]=n.peakPoints[0]*n.transmissionRaioVal,a[1].data[0][0]=a[3].data[0][0]=n.rmsMotorData[0],i.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[0]);break;case"RmsAcceleration":n.rmsAcceMotor=n.rmsAcceData*n.transmissionRaioVal,n.rmsMotorData[1]=parseFloat(n.rmsPoints[1])/n.transmissionRaioVal+n.rmsAcceMotor*n.motorInertia,a[3].data[0][1]=n.rmsMotorData[1],i.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsMotorData[1]),i.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsAcceMotor);break;case"PeakAcceleration":n.peakAcceMotor=n.peakAcceData*n.transmissionRaioVal,n.peakMotorData[1]=parseFloat(n.peakPoints[1])/n.transmissionRaioVal+n.peakAcceMotor*n.motorInertia,a[1].data[0][1]=n.peakMotorData[1],i.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[1]),i.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.peakAcceMotor);break;case"TransmissionRatio":n.peakAcceMotor=n.peakAcceData*n.transmissionRaioVal,n.rmsAcceMotor=n.rmsAcceData*n.transmissionRaioVal,a[1].data[0][0]=a[3].data[0][0]=n.rmsMotorData[0]=n.peakMotorData[0]=n.peakPoints[0]*n.transmissionRaioVal,a[1].data[0][1]=n.peakMotorData[1]=n.peakPoints[1]/n.transmissionRaioVal+n.peakAcceMotor*n.motorInertia,a[3].data[0][1]=n.rmsMotorData[1]=n.rmsPoints[1]/n.transmissionRaioVal+n.rmsAcceMotor*n.motorInertia,i.find(".cosmatt-unitComboBox").length>0&&(i.find(".peakTorqueMotorSide").find(".cosmatt-unitComboBox")&&i.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[1]),i.find(".rmsTorqueMotorSide").find(".cosmatt-unitComboBox")&&i.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsMotorData[1]),i.find(".peakSpeedMotorSide").find(".cosmatt-unitComboBox")&&i.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[0]),i.find(".rmsAccelerationMotorSide").find(".cosmatt-unitComboBox")&&i.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsAcceMotor),i.find(".peakAccelerationMotorSide").find(".cosmatt-unitComboBox")&&i.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.peakAcceMotor))}R(a),v()},v=function(){var e=P(n.motorData[n.motorSelectedIndex]).status;if(n.showMotorSelForm){var o=i.find("#statusValueContainer");o.removeClass("motorPass"),o.removeClass("motorFail"),o.addClass(e?"motorPass":"motorFail"),o.text(e?"Pass":"Fail")}if(n.showAppPointsForm){var a=i.find("#servoMotorArea #tsPointsPanelContainer #statusValueContainer");a.find(".motorStatusIcon").removeClass("glyphicon-remove").removeClass("glyphicon-ok").addClass(e?"glyphicon-ok":"glyphicon-remove"),a.find("#statusValueLabel").text(e?"Motor Pass":"Motor Fail")}},x=function(o){var a=e('<div class="panel panel-default"></div>');o.append(a);var t=e('<div class="panel-heading" role="tab" id="headingTwo"> <h4 class="panel-title"> <a role="button"  data-toggle="collapse"  href="#collapseTwo'+n.uniqeId+'" aria-controls="collapseTwo" aria-expanded="false"><span>Application Torque Speed Requirements </span><span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');a.append(t);var i=e('<div id="collapseTwo'+n.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo"></div>');a.append(i),a.on("show.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),a.on("hide.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),n.showMotorSelForm||i.addClass("in"),T(i)},S=function(o){var a=t.getData();switch(o){case"PeakSpeed":a[1].data[0][0]=n.peakPoints[0]=i.find("#peakSpeedSlider").slider("getValue"),n.defaultPeakSpeed=i.find("#peakSpeedSlider").slider("getValue"),i.find("#peakSpeedValue").val(e("#peakSpeedSlider").slider("getValue"));break;case"PeakTorque":a[1].data[0][1]=n.peakPoints[1]=i.find("#peakTorqueSlider").slider("getValue"),n.defaultPeakTorque=i.find("#peakTorqueSlider").slider("getValue"),i.find("#peakTorqueValue").val(e("#peakTorqueSlider").slider("getValue"));break;case"RmsSpeed":a[3].data[0][0]=n.rmsPoints[0]=i.find("#rmsSpeedSlider").slider("getValue"),n.defaultRmsSpeed=i.find("#rmsSpeedSlider").slider("getValue"),i.find("#rmsSpeedValue").val(e("#rmsSpeedSlider").slider("getValue"));break;case"RmsTorque":a[3].data[0][1]=n.rmsPoints[1]=i.find("#rmsTorqueSlider").slider("getValue"),n.defaultRmsTorque=i.find("#rmsTorqueSlider").slider("getValue"),i.find("#rmsTorqueValue").val(e("#rmsTorqueSlider").slider("getValue"));break;case"TransmissionRatio":var r=i.find("#trRatioSlider").slider("getValue"),a=t.getData();a[1].data[0][0]=n.peakPoints[0]=(n.defaultPeakSpeed*r).toFixed(2),a[1].data[0][1]=n.peakPoints[1]=(n.defaultPeakTorque/r).toFixed(2),a[3].data[0][0]=n.rmsPoints[0]=(n.defaultRmsSpeed*r).toFixed(2),a[3].data[0][1]=n.rmsPoints[1]=(n.defaultRmsTorque/r).toFixed(2),a[1].data[0][0]>n.sliderLimit.peakMaxSpeed?i.find("#peakSpeedSlider").slider("setAttribute","max",parseInt(a[1].data[0][0])):i.find("#peakSpeedSlider").slider("setAttribute","max",n.sliderLimit.peakMaxSpeed),a[3].data[0][0]>n.sliderLimit.rmsMaxSpeed?i.find("#rmsSpeedSlider").slider("setAttribute","max",parseInt(a[3].data[0][0])):i.find("#rmsSpeedSlider").slider("setAttribute","max",n.sliderLimit.rmsMaxSpeed),i.find("#peakSpeedSlider").slider("setValue",a[1].data[0][0]),i.find("#peakTorqueSlider").slider("setValue",a[1].data[0][1]),i.find("#rmsSpeedSlider").slider("setValue",a[3].data[0][0]),i.find("#rmsTorqueSlider").slider("setValue",a[3].data[0][1]),i.find("#trRatioValue").val(r),i.find("#peakSpeedValue").val(a[1].data[0][0]),i.find("#peakTorqueValue").val(a[1].data[0][1]),i.find("#rmsSpeedValue").val(a[3].data[0][0]),i.find("#rmsTorqueValue").val(a[3].data[0][1])}R(a),v()},T=function(o){var a=e('<div class="panel-body"></div>');o.append(a);var t=e('<div id="tsPointsPanelContainer"></div>');a.append(t);var r=e('<div class="row" id="sliderContainer"></div>');t.append(r);var s=e('<div class="col-xs-3 col-3 title"></div>');r.append(s);var d=e('<div class="col-xs-5 col-5"><div class="titleTextLoad ">Load Side</div><div class="loadSideImg"></div></div>');r.append(d);var l=e('<div class="col-xs-4 col-4 padding-right-zero"><div class="titleTextMotor">Motor Side</div><div class="motorSideImg"></div></div>');r.append(l);var u=e('<div id="sliderContainer" class="row greyClass"></div>');t.append(u);var p=e('<div class="col-xs-3 col-3 title">Peak Torque:</div>');u.append(p);var c=e('<div class="col-xs-5 col-5  peakTorqueDataSide"></div>');u.append(c);var m=e('<div class="col-xs-4 col-4  peakTorqueMotorSide"> </div>');u.append(m),c.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",step:".1",dataRule:"currency",min:0,value:n.peakPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if("dropdown"==this.type&&i.find(".peakTorqueMotorSide").data("unitsComboBox").setDropBoxItem(this.unit),void 0!=this.type&&"dropdown"!=this.type){if(this.value<n.rmsPoints[1])return i.find(".peakTorqueDataSide").data("unitsComboBox").setTextBoxValue(n.peakPoints[1]),I("Peak Torque can not be less than RMS Torque."),!1;I(""),n.peakPoints[1]=this.SIValue,f("PeakTorque",n.transmissionRaioVal)}}}),m.unitsLabelControl({unitType:"TORQUE",unit:"newtonmeter",value:n.peakMotorData[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"}}),n.disableControls&&n.disableControls.peakTorqueTextBox&&i.find("#peakTorqueValue").attr("disabled",!0);var v=e('<div id="sliderContainer" class="row"></div>');t.append(v);var x=e('<div class="col-xs-3 col-3 title"><span id="rmsTorqueTitle" title="RMS Torque">RMS Torque: </sapn></div>');v.append(x);var S=e('<div class="col-xs-5 col-5  rmsTorqueLoadSide"></div>');v.append(S);var T=e('<div class="col-xs-4 col-4  rmsTorqueMotorSide"> </div>');v.append(T),S.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",step:".1",dataRule:"currency",min:0,value:n.rmsPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>n.peakPoints[1])return i.find(".rmsTorqueLoadSide").data("unitsComboBox").setTextBoxValue(n.rmsPoints[1]),I("RMS Torque can not be greater than Peak Torque."),!1;I(""),n.rmsPoints[1]=this.SIValue,f("RmsTorque",n.transmissionRaioVal)}"dropdown"==this.type&&i.find(".rmsTorqueMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),T.unitsLabelControl({unitType:"TORQUE",unit:"newtonmeter",value:n.rmsMotorData[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"}}),n.disableControls&&n.disableControls.rmsTorqueTextBox&&i.find("#rmsTorqueValue").attr("disabled",!0);var h=e('<div id="sliderContainer" class="row greyClass"></div>');t.append(h);var k=e('<div class="col-xs-3 col-3 title"><span id="peakSpeedTitle" title="Peak Speed">Peak Speed: </sapn></div>');h.append(k);var C=e('<div class="col-xs-5 col-5  peakSpeedLoadSide"></div>');h.append(C);var M=e('<div class="col-xs-4 col-4  peakSpeedMotorSide"></div>');h.append(M),C.unitsComboBox({unitType:"ANGULARVELOCITY",unit:"revolutionsperminute",mode:"spin",step:"1",dataRule:"currency",min:0,value:n.peakPoints[0],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){void 0!=this.type&&"dropdown"!=this.type&&(n.peakPoints[0]=this.value,f("PeakSpeed",n.transmissionRaioVal)),"dropdown"==this.type&&i.find(".peakSpeedMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),M.unitsLabelControl({unitType:"ANGULARVELOCITY",unit:"revolutionsperminute",value:n.peakMotorData[0],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){}});var q=e('<div id="sliderContainer" class="row"></div>');t.append(q);var b=e('<div class="col-xs-3 col-3 title"><div title="Peak Acceleration" class="peakAccele">Peak Acceleration: </div></div>');q.append(b);var P=e('<div class="col-xs-5 col-5  peakAccelerationLoadSide"></div>');q.append(P);var A=e('<div class="col-xs-4 col-4  peakAccelerationMotorSide"></div>');q.append(A),P.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",mode:"spin",step:"1",dataRule:"currency",value:n.peakAcceData,min:0,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value<n.rmsAcceData)return i.find(".peakAccelerationLoadSide").data("unitsComboBox").setTextBoxValue(n.peakAcceData),I("Peak Acceleration can not be less than RMS Acceleration."),!1;I(""),n.peakAcceData=this.SIValue,f("PeakAcceleration",n.transmissionRaioVal)}"dropdown"==this.type&&i.find(".peakAccelerationMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),A.unitsLabelControl({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",value:n.peakAcceMotor,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){}});var g=e('<div id="sliderContainer" class="row greyClass"></div>');t.append(g);var B=e('<div class="col-xs-3 col-3 title"><div id="rmsSpeedTitle" title="RMS Acceleration" class="rmsAccele">RMS Acceleration: </div></div>');g.append(B);var D=e('<div class="col-xs-5 col-5  rmsAccelerationLoadSide"></div>');g.append(D);var R=e('<div class="col-xs-4 col-4  rmsAccelerationMotorSide"></div>');if(g.append(R),D.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",mode:"spin",step:"1",dataRule:"currency",min:0,value:n.rmsAcceData,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>n.peakAcceData)return i.find(".rmsAccelerationLoadSide").data("unitsComboBox").setTextBoxValue(n.rmsAcceData),I("RMS Acceleration can not be greater than Peak Acceleration."),!1;I(""),n.rmsAcceData=this.SIValue,f("RmsAcceleration",n.transmissionRaioVal)}"dropdown"==this.type&&i.find(".rmsAccelerationMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),R.unitsLabelControl({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",value:n.rmsAcceMotor,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){}}),n.disableControls&&n.disableControls.rmsSpeedTextBox&&i.find("#rmsSpeedValue").attr("disabled",!0),n.showMotorTsCurve){var w=e('<div id="sliderContainer" class="row"></div>');t.append(w)}t.append('<div id="alertMessageContainer" class="alert alert-warning"><strong>Warning:-&nbsp;&nbsp;</strong><span></span></div>');var I=function(e){return""===e?void t.find("#alertMessageContainer").hide():(t.find("#alertMessageContainer span").text(e),t.find("#alertMessageContainer").show(),void setTimeout(function(){t.find("#alertMessageContainer").fadeOut("slow")},3e3))}},h=function(o){var a=e('<div class="panel panel-default"></div>');o.append(a);var t=e('<div class="panel-heading" role="tab" id="headingThree"> <h4 class="panel-title"> <a role="button"   data-toggle="collapse"  href="#collapseThree'+n.uniqeId+'" aria-controls="collapseThree" aria-expanded="false"><span> Environmental Factors</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');a.append(t);var i=e('<div id="collapseThree'+n.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree"></div>');a.append(i);var r=e('<div class="panel-body"></div>');i.append(r),a.on("show.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),a.on("hide.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),k(r)},k=function(o){var a=e('<div id="envFactorsPanelContainer"></div>');o.append(a);var s=e('<div id="sliderContainer" class="row"></div>');a.append(s);var d=e('<div class="col-xs-3 col-3 title"><span id="tempTitle">Temperature: </span></div>');s.append(d);var l=e('<div class="col-xs-3 col-3  "><input id="tempSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');s.append(l);var u=n.sliderLimit.maxTemp||r.sliderLimit.maxTemp,p=e('<div class="col-xs-6 col-6  temp-unit-dropdown display-flex margin-bottom"></label></div>');s.append(p),n.defaultPeakStallTorque=n.motorData[n.motorSelectedIndex].peakStallTorque,n.defaultRollOffPoint=n.motorData[n.motorSelectedIndex].rollOffPoint,n.defaultRollOffSpeed=n.motorData[n.motorSelectedIndex].rollOffSpeed,n.defaultPeakTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].peakTorqueAtMaxSpeed,n.defaultContinuousStallTorque=n.motorData[n.motorSelectedIndex].continuousStallTorque,n.defaultContinuosTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed,s.find("#tempSlider").slider({value:n.motorData[n.motorSelectedIndex].temp,min:0,max:u,step:1}).on("change",function(o){e(".temp-unit-dropdown").data("unitsComboBox").setTextBoxValue(o.value.newValue),n.motorData[n.motorSelectedIndex].temp=o.value.newValue;var a=o.value.newValue-o.value.oldValue;0!==a&&(c("peakPlot",o.value.newValue),c("rmsPlot",o.value.newValue))}),n.disableControls&&n.disableControls.tempSlider&&s.find("#tempSlider").slider("disable"),p.unitsComboBox({unitType:"TEMPERATURE",unit:"celsius",mode:"spin",step:"1",dataRule:"currency",min:0,value:n.motorData[n.motorSelectedIndex].temp,comboBoxWidthRatio:{textBox:"45%",comboBox:"35%"},callBackFn:function(){void 0!=this.type&&"dropdown"!=this.type&&(n.motorData[n.motorSelectedIndex].temp=this.value,i.find("#tempSlider").slider("setValue",parseInt(this.value)),c("peakPlot",parseInt(this.value)),c("rmsPlot",parseInt(this.value)))}}),p.append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>'),n.disableControls&&n.disableControls.tempTextBox&&i.find(".amount_TEMPERATURE").attr("disabled",!0);var c=function(e,o){var a=t.getData(),i=o,r=40,s=155,d=25,l=i+.6*(s-i),u=r+.6*(s-r),p=-.0015,c=1-(i-r)/(s-r),m=(d+234.5)/(u+234.5),f=1+(l-u)*p;switch(e){case"peakPlot":for(var x=a[0].data,S=0;S<x.length;S++)void 0!=n.motorData[n.motorSelectedIndex]&&(0!=S&&12!=S&&6!=S||(x[S][1]=n.defaultPeakStallTorque*f,0==S&&(n.motorData[n.motorSelectedIndex].peakStallTorque=x[S][1]),6==S&&(x[S][1]=-x[S][1])),1!=S&&7!=S||(x[S][1]=n.defaultRollOffPoint*f,x[S][0]=n.defaultRollOffSpeed/f,n.motorData[n.motorSelectedIndex].rollOffPoint=x[S][1],n.motorData[n.motorSelectedIndex].rollOffSpeed=x[S][0],7==S&&(x[S][0]=-x[S][0],x[S][1]=-x[S][1])),2!=S&&8!=S||(x[S][1]=n.defaultPeakTorqueAtMaxSpeed*f,n.motorData[n.motorSelectedIndex].peakTorqueAtMaxSpeed=x[S][1],8==S&&(x[S][1]=-x[S][1])));a[0].data=x;break;case"rmsPlot":for(var T=a[2].data,S=0;S<T.length;S++)void 0!=n.motorData[n.motorSelectedIndex]&&(0!=S&&10!=S&&5!=S||(T[S][1]=n.defaultContinuousStallTorque*(f*Math.sqrt(c/m)),n.motorData[n.motorSelectedIndex].continuousStallTorque=T[S][1],5==S&&(T[S][1]=-T[S][1])),1!=S&&6!=S||(T[S][1]=n.defaultContinuosTorqueAtMaxSpeed*(f*Math.sqrt(c/m)),n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=T[S][1],6==S&&(T[S][1]=-T[S][1])));a[2].data=T}R(a),v()},m=e('<div id="sliderContainer" class="row"></div>');a.append(m);var f=e('<div class="col-xs-3 col-3 title"><span id="altitudeTitle">Altitude: </span></div>');m.append(f);var x=e('<div class="col-xs-3 col-3  "><input id="altitudeSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');m.append(x);var u=n.sliderLimit.maxAltitude||r.sliderLimit.maxAltitude,S=e('<div class="col-xs-6 col-6 altitude-unit-combobox display-flex margin-bottom"> </div>');m.append(S),n.defaultContinuousStallTorque=n.motorData[n.motorSelectedIndex].continuousStallTorque,n.defaultContinuosTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed,x.find("#altitudeSlider").slider({value:n.motorData[n.motorSelectedIndex].altitude,min:0,max:1e4,step:1}).on("change",function(o){e(".altitude-unit-combobox").data("unitsComboBox").setTextBoxValue(o.value.newValue);var a=t.getData(),i=a[2].data;if(o.value.newValue>1500){var r=[1-(o.value.newValue-1500)/1e4];i[0][1]=i[10][1]=(n.defaultContinuousStallTorque*r).toFixed(3),i[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*r).toFixed(3),a[2].data=i,n.motorData[n.motorSelectedIndex].continuousStallTorque=i[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=i[1][1]}else{var r=1;i[0][1]=i[10][1]=(n.defaultContinuousStallTorque*r).toFixed(3),i[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*r).toFixed(3),a[2].data=i,n.motorData[n.motorSelectedIndex].continuousStallTorque=i[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=i[1][1]}R(a),v()}),n.disableControls&&n.disableControls.altitudeSlider&&x.find("#altitudeSlider").slider("disable"),S.unitsComboBox({unitType:"ALTITUDE",unit:"meter",mode:"spin",step:"1",dataRule:"currency",min:0,value:n.motorData[n.motorSelectedIndex].altitude,comboBoxWidthRatio:{textBox:"45%",comboBox:"35%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){var e=parseInt(this.value),o=t.getData(),a=o[2].data;if(i.find("#altitudeSlider").slider("setValue",e),e>1500){var r=[1-(e-1500)/1e4];a[0][1]=a[10][1]=(n.defaultContinuousStallTorque*r).toFixed(3),a[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*r).toFixed(3),o[2].data=a,n.motorData[n.motorSelectedIndex].continuousStallTorque=a[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=a[1][1]}else{var r=1;a[0][1]=a[10][1]=(n.defaultContinuousStallTorque*r).toFixed(3),a[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*r).toFixed(3),o[2].data=a,n.motorData[n.motorSelectedIndex].continuousStallTorque=a[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=a[1][1]}R(o),v()}}}),i.find("#altitudeSpinner").spinner("changed",function(e,o,a){var r=parseInt(o),s=t.getData(),d=s[2].data;if(i.find("#altitudeSlider").slider("setValue",r),r>1500){var l=[1-(r-1500)/1e4];d[0][1]=d[10][1]=(n.defaultContinuousStallTorque*l).toFixed(3),d[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*l).toFixed(3),s[2].data=d,n.motorData[n.motorSelectedIndex].continuousStallTorque=d[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=d[1][1]}else{var l=1;d[0][1]=d[10][1]=(n.defaultContinuousStallTorque*l).toFixed(3),d[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*l).toFixed(3),s[2].data=d,n.motorData[n.motorSelectedIndex].continuousStallTorque=d[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=d[1][1]}R(s),v()}),n.disableControls&&n.disableControls.transmRatioTextBox&&i.find(".amount_ALTITUDE").attr("disabled",!0)},C=function(o){var a=e('<div class="panel panel-default"></div>');o.append(a);var t=e('<div class="panel-heading" role="tab" id="headingFour"> <h4 class="panel-title"> <a role="button"  data-toggle="collapse"  href="#collapseFour'+n.uniqeId+'" aria-controls="collapseFour" aria-expanded="false"><span> Transmission Ratio</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');
a.append(t);var i=e('<div id="collapseFour'+n.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour"></div>');a.append(i);var r=e('<div class="panel-body"></div>');i.append(r),a.on("show.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),a.on("hide.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),M(r)},M=function(o){var a=e('<div id="transmissionRatioPanelContainer"></div>');o.append(a);var t=e('<div id="sliderContainer" class="row"></div>');a.append(t);var r=e('<div class="col-xs-6 col-6 title"><span id="trRatioTitle">Transmission Ratio: </span></div>');t.append(r);var s=e('<div class="col-xs-6 col-6 trRatioValue"></div>');t.append(s),n.defaultRmsTorque=n.rmsMotorData[1],n.defaultRmsSpeed=n.rmsMotorData[0],n.defaultPeakTorque=n.peakMotorData[1],n.defaultPeakSpeed=n.peakMotorData[0],s.unitsComboBox({unitType:"PERCENTAGE",unit:"percentage",mode:"spin",step:"1",dataRule:"quantity",value:n.transmissionRaioVal,showTextBoxOnly:"true",comboBoxWidthRatio:{textBox:"35%",comboBox:"0"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>n.sliderLimit.maxTrRatio)return i.find(".trRatioValue").data("unitsComboBox").setTextBoxValue(n.transmissionRaioVal),l("Transmission ratio value can not be greater than 100."),!1;if(this.value<="0")return i.find(".trRatioValue").data("unitsComboBox").setTextBoxValue(n.transmissionRaioVal),l("Transmission ratio value can not be less than 1."),!1;l(""),n.transmissionRaioVal=this.value,i.find(".transmissionRaioVal").html("&nbsp;:&nbsp;"+n.transmissionRaioVal),f("TransmissionRatio",this.value)}}});var d=e('<div class="transmissionRaioVal">&nbsp;: 1</div>');s.append(d),n.disableControls&&n.disableControls.transmRatioSlider&&$trRatioSlider.find("#trRatioSlider").slider("disable"),n.disableControls&&n.disableControls.transmRatioTextBox&&i.find("#trRatioValue").attr("disabled",!0),a.append('<div id="alertMessageContainer" class="alert alert-warning"><strong>Warning:-&nbsp;&nbsp;</strong><span></span></div>');var l=function(e){return""===e?void a.find("#alertMessageContainer").hide():(a.find("#alertMessageContainer span").text(e),a.find("#alertMessageContainer").show(),void setTimeout(function(){a.find("#alertMessageContainer").fadeOut("slow")},5e3))}},q=function(o){var t=e('<div class="titleSection">Motor T-S Curve</div>');o.append(t);var i=e('<div class="tsPlotContainer"></div>');o.append(i);var r=e('<div class="tsPlotArea"></div>');i.append(r),a(n.motorSelectedIndex+1),b()},b=function(){var e,o=[],a={colors:[n.graphLineColor.peakTSCurve,n.graphLineColor.peakTSCurve,n.graphLineColor.contionusTSCurve,n.graphLineColor.contionusTSCurve],series:{points:{show:!0}},legend:{backgroundOpacity:0},coordinate:{type:"rectangular"},axisLabels:{show:!0},xaxis:{axisLabel:"Speed (rpm)",tickFormatter:d},yaxis:{axisLabel:"Torque (N-m)",tickFormatter:d},grid:(e={hoverable:!0,clickable:!0,borderWidth:1,borderColor:"#333"},_defineProperty(e,"borderWidth",{top:0,right:0,bottom:1,left:1}),_defineProperty(e,"margin",0),_defineProperty(e,"markings",[{yaxis:{from:0,to:0,tickFormatter:d},color:"#333"},{xaxis:{from:0,to:0},color:"#333"},{xaxis:{from:0,to:n.xaxisMaxVale,tickFormatter:d},color:"#fff"}]),e),tooltip:!0,tooltipOpts:{cssClass:"tsCurveFlotTip",content:function(e,o,a,t){var i="";switch(t.seriesIndex){case 0:switch(t.dataIndex){case 0:i="Peak Stall Torque <br />";break;case 1:i="Roll Off Point<br />";break;case 2:i="Peak Torque at Max Speed <br />";break;case 3:i="Max Speed at Zero Torque <br />"}break;case 1:i="Peak T/S Point <br />";break;case 2:switch(t.dataIndex){case 0:i="Continuous Stall Torque <br />";break;case 1:i="Continuous Stall Torque at Max Speed <br />";break;case 2:i="Max Speed Point <br />"}break;case 3:i="RMS T/S Point <br />"}return i+"Speed: "+o+", Torque: "+a},defaultTheme:!1,shifts:{x:0,y:20}}};1==n.quadrant&&(a.xaxis.min=0,a.yaxis.min=0);var i=[],r=[],s=[],l=[],u=[],p=[],c=[],m=[],f=function(){i=[],r=[],s=[],l=[],u=[],p=[],c=[],m=[]},v=function(e){var o=e.maxSpeed;u=[[0,e.peakStallTorque],[e.rollOffSpeed,e.rollOffPoint],[o,e.peakTorqueAtMaxSpeed],[o,0]],c=[[0,e.continuousStallTorque],[o,e.continuosTorqueAtMaxSpeed],[o,0]]},x=function(e){var o=-1*e.maxSpeed;p=[[o,0],[o+1,e.peakStallTorque]],m=[[o,0],[o+1,e.continuousStallTorque]]},S=function(e){i=i.concat(u),r=r.concat(c)},T=function(e){var o=[],a=[];p.length>0&&p.forEach(function(e,a,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],o[a]=i}),i=i.concat(o),m.length>0&&m.forEach(function(e,o,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],a[o]=i}),r=r.concat(a)},h=function(e){var o=[],a=[];u.length>0&&u.forEach(function(e,a,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],o[a]=i}),i=i.concat(o),c.length>0&&c.forEach(function(e,o,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],a[o]=i}),r=r.concat(a)},k=function(e){i=i.concat(p),r=r.concat(m)},C=function(e){i.push([0,e.peakStallTorque]),r.push([0,e.continuousStallTorque])},M=function(e){var o=e.temp,a=40,t=155,i=25,r=o+.6*(t-o),n=a+.6*(t-a),s=-.0015,d=1-(o-a)/(t-a),l=(i+234.5)/(n+234.5),u=1+(r-n)*s;return e.peakStallTorque=(e.peakStallTorque*u).toFixed(2),e.rollOffPoint=(e.rollOffPoint*u).toFixed(2),e.rollOffSpeed=(e.rollOffSpeed/u).toFixed(2),e.continuousStallTorque=(e.continuousStallTorque*(u*Math.sqrt(d/l))).toFixed(2),e.continuosTorqueAtMaxSpeed=(e.continuosTorqueAtMaxSpeed*(u*Math.sqrt(d/l))).toFixed(2),e},q=function(e){S(e),T(e),h(e),k(e),C(e)},b=function(e){if(f(),"0"==n.firstTimeCall){var o=M(e);v(o),x(o),q(o)}else v(e),x(e),q(e)};n.showMotorTsCurve&&b(n.motorData[n.motorSelectedIndex]),n.showApplicationPoints&&(s.push(n.peakMotorData),l.push(n.rmsMotorData)),o.push({data:i,label:"Peak",lines:{lineWidth:2,show:!0}},{data:s,label:"",points:{show:!0,fillColor:n.graphLineColor.peakTSCurve,radius:4}},{data:r,label:"Continous",lines:{lineWidth:2,show:!0}},{data:l,label:"",points:{show:!0,fillColor:n.graphLineColor.contionusTSCurve,radius:4}}),t?R(o,a):B(o,a)},P=function(e){function o(e,o,a,t){var r=!1,n=(o[1]-e[1])/(o[0]-e[0]),s=e[1]-n*e[0],d=-1,l=n*a[0]-a[1]+s;if(r=0==l||l>0&&0>d||0>l&&d>0,t){var u=a[0]*a[1],f=a[0]*(n*a[0]+s),v=100*u/f;m.push(v)}else{var x=100*a[1]/(n*a[0]+s),S=100*a[0]/i.maxSpeed;p.push(x),c.push(S)}return r}function a(e){var o=100*e[1]/i.peakStallTorque,a=100*e[0]/i.maxSpeed;p.push(o),c.push(a)}function t(e){var o=e[0]*e[1],a=e[0]*i.continuousStallTorque,t=100*o/a;m.push(t)}var i=e,r=n.peakMotorData,s=n.rmsMotorData,d={PeakStallPoint:{x:0,y:i.peakStallTorque},RollOffPoint:{x:i.rollOffSpeed,y:i.rollOffPoint},PeakTarqueAtMaxSpeedPoint:{x:i.maxSpeed,y:i.peakTorqueAtMaxSpeed},ContinuousStallTorquePoint:{x:0,y:i.continuousStallTorque},ContinuousStallTorqueMaxSpeedPoint:{x:i.maxSpeed,y:i.continuosTorqueAtMaxSpeed}},l=0,u=null,p=[],c=[],m=[],f=null,v=null,x=null,S={status:u,torqueUtilization:f,speedUtilization:v,avgPower:x},T=s[0],h=s[1],k=r[0],C=r[1],M=!1,q=!1,b=null,P=null,A=null;return T<=i.maxSpeed?(b=[d.ContinuousStallTorquePoint.x,d.ContinuousStallTorquePoint.y],P=[d.ContinuousStallTorqueMaxSpeedPoint.x,d.ContinuousStallTorqueMaxSpeedPoint.y],A=[T,h],q=o(b,P,A,!0)):(l=-1,t([T,h])),C<=i.peakStallTorque&&k<=i.maxSpeed?k<=d.RollOffPoint.x?(b=[d.PeakStallPoint.x,d.PeakStallPoint.y],P=[d.RollOffPoint.x,d.RollOffPoint.y],A=[k,C],M=o(b,P,A,!1)):(b=[d.RollOffPoint.x,d.RollOffPoint.y],P=[d.PeakTarqueAtMaxSpeedPoint.x,d.PeakTarqueAtMaxSpeedPoint.y],A=[k,C],M=o(b,P,A,!1)):(l=-1,a([k,C])),-1!=l&&0!=M&&0!=q||(l=-1),-1==l?S.status=!1:0==l&&(S.status=!0),S.torqueUtilization=Math.max.apply(Math,p),S.speedUtilization=Math.max.apply(Math,c),S.avgPower=Math.max.apply(Math,m),S},A=function(){t.getAxes();if(!n.showMotorTsCurve){var e=Math.max(n.peakMotorData[0]+50,n.rmsMotorData[0]+50,200),o=Math.max(n.peakMotorData[1]+10,n.rmsMotorData[1]+10,150);t.getOptions().yaxes[0].max=o,t.getOptions().xaxes[0].max=e,4===n.quadrant&&(t.getOptions().yaxes[0].min=-1*o,t.getOptions().xaxes[0].min=-1*e)}},g=function(){4==n.quadrant?(t.getOptions().grid.markings[0].color="#bdbdbd",t.getOptions().grid.markings[1].color="#bdbdbd"):(t.getOptions().grid.markings[0].color="#333",t.getOptions().grid.markings[1].color="#333"),A(),t.setupGrid(),t.draw()},B=function(o,a){setTimeout(function(){t=e.plot(i.find(".tsPlotArea"),o,a),g(),D(),m()},0)},D=function(){i.find(".tsCruveContainer").resize(function(o){var a=e(this);a.width()<=940?(a.find("#servoMotorArea").addClass("resizeWidth"),a.find("#servoMotorTSCurve").addClass("resizeWidth"),a.find(".tsPlotArea").css("min-height",a.find(".tsPlotArea").width()),a.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%")):a.width()>940&&a.width()<1280?(a.find("#servoMotorArea").removeClass("resizeWidth"),a.find("#servoMotorTSCurve").removeClass("resizeWidth"),a.find(".tsPlotArea").css("min-height",a.find(".tsPlotArea").width()),a.find("#servoMotorArea").find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").css("width","auto"),a.find("#servoMotorArea").find(".response-status").attr("title",i.find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").text())):(a.find("#servoMotorArea").removeClass("resizeWidth"),a.find("#servoMotorTSCurve").removeClass("resizeWidth"),a.find(".tsPlotArea").css("min-height",a.find(".tsPlotArea").width()),a.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%"))})},R=function(e,o){o&&(void 0!=o.xaxis.min&&void 0!=o.yaxis.min?(t.getOptions().yaxes[0].min=o.yaxis.min,t.getOptions().xaxes[0].min=o.xaxis.min):(t.getOptions().yaxes[0].min=null,t.getOptions().xaxes[0].min=null)),t.setData(e),g(),w()},w=function(){n.assessmentMode&&n.assessmentCallback&&n.assessmentCallback({peakTorque:{value:i.find("#peakTorqueValue").val(),unit:"Nm"},peakSpeed:{value:i.find("#peakSpeedValue").val(),unit:"rad/sec"},rmsTorque:{value:i.find("#rmsTorqueValue").val(),unit:"Nm"},rmsSpeed:{value:i.find("#rmsSpeedValue").val(),unit:"rad/sec"},temperature:{value:i.find(".amount_TEMPERATURE").val(),unit:"C"},altitude:{value:i.find(".amount_ALTITUDE").val(),unit:"m"},transmissionRatio:{value:i.find("#trRatioValue").val(),unit:""},motorSelectedIndex:{value:n.motorSelectedIndex,unit:""}})},I=function(e){e.peakTorque&&(i.find("#peakTorqueSlider").slider("setValue",e.peakTorque.value),i.find("#peakTorqueValue").val(e.peakTorque.value),S("PeakTorque")),e.peakSpeed&&(i.find("#peakSpeedSlider").slider("setValue",e.peakSpeed.value),i.find("#peakSpeedValue").val(e.peakSpeed.value),S("PeakSpeed")),e.rmsTorque&&(i.find("#rmsTorqueSlider").slider("setValue",e.rmsTorque.value),i.find("#rmsTorqueValue").val(e.rmsTorque.value),S("RmsTorque")),e.rmsSpeed&&(i.find("#rmsSpeedSlider").slider("setValue",e.rmsSpeed.value),i.find("#rmsSpeedValue").val(e.rmsSpeed.value),S("RmsSpeed")),e.temperature&&(i.find("#tempSlider").slider("setValue",e.temperature.value),i.find(".amount_TEMPERATURE").val(e.temperature.value),S("Temperature")),e.altitude&&(i.find("#altitudeSlider").slider("setValue",e.altitude.value),i.find(".amount_ALTITUDE").val(e.altitude.value),S("Altitude")),e.transmissionRatio&&(i.find("#trRatioSlider").slider("setValue",e.transmissionRatio.value),i.find("#trRatioValue").val(e.transmissionRatio.value),S("TransmissionRatio")),e.motorSelectedIndex&&(i.find("#solutionSliderId").slider("setValue",parseInt(n.motorSelectedIndex)),i.find("#PaginationDiv").Folio({activePage:n.motorSelectedIndex}))},V=function(e){var o;if(e.peakTorque&&(o=e.peakTorque.status?"correct":"incorrect",i.find("#peakTorqueValue").addClass(o)),e.peakSpeed&&(o=e.peakSpeed.status?"correct":"incorrect",i.find("#peakSpeedValue").addClass(o)),e.rmsTorque&&(o=e.rmsTorque.status?"correct":"incorrect",i.find("#rmsTorqueValue").addClass(o)),e.rmsSpeed&&(o=e.rmsSpeed.status?"correct":"incorrect",i.find("#rmsSpeedValue").addClass(o)),e.temperature){o=e.temperature.status?"correct":"incorrect",i.find(".amount_TEMPERATURE").addClass(o),o=e.temperature.status?"fa-check correct":"fa-times incorrect",i.find("#envFactorsPanelContainer").find(".response-status").css({display:"flex","align-items":"center"}),i.find("#envFactorsPanelContainer").find(".response-status").find("span.fa").addClass(o);var a=e.temperature.status?"":"("+e.temperature.correctAnswer+"&#176;C)";i.find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").append(a),i.find("#envFactorsPanelContainer").find("#tempSlider").slider("disable"),i.find("#envFactorsPanelContainer").find(".amount_TEMPERATURE").attr("disabled",!0)}if(e.altitude&&(o=e.altitude.status?"correct":"incorrect",i.find(".amount_ALTITUDE").addClass(o)),e.transmissionRatio&&(o=e.transmissionRatio.status?"correct":"incorrect",i.find("#trRatioValue").addClass(o)),e.motorSelectedIndex){o=e.motorSelectedIndex.status?"fa-check correct":"fa-times incorrect",i.find(".solutionInfoTitle").find(".response-status").css({display:"inline-flex","align-items":"center"}),i.find(".solutionInfoTitle").find(".response-status").find("span.fa").addClass(o);var a=e.motorSelectedIndex.status?"":"(# "+e.motorSelectedIndex.correctAnswer+")";i.find(".solutionInfoTitle").find(".response-status").find(".correct-answer").append(a)}};return l(),{ref:this,updateInputs:I,markAnswers:V}}}(jQuery);