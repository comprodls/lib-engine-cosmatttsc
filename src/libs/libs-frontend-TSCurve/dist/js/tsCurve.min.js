"use strict";!function(e){e.fn.TSCurve=function(a){function o(e){var e=e-1;t.find("#driveNameId").text(r.format(i.motorData[e].maxSpeed)),t.find("#motorNameId").text("("+i.motorData[e].motorPartNo+")"),t.find("#voltageInfoId").text(r.format(i.motorData[e].motorInertia)),t.find("#peakStallTorque").text(r.format(i.motorData[e].peakStallTorque)),t.find("#continuousStallTorque").text(r.format(i.motorData[e].continuousStallTorque)),t.find("#solutionTitle").text("#"+(e+1)),t.find("#motorName").text("("+i.motorData[e].motorPartNo+")"),t.find("#tsMotorName").text("Motor T-S Curve : "+i.motorData[e].motorPartNo),i.motorSelectedIndex=e,i.motorInertia=i.motorData[e].motorInertia,t.find("#tempSlider").slider("setValue",i.motorData[i.motorSelectedIndex].temp),t.find(".amount_TEMPERATURE").val(i.motorData[i.motorSelectedIndex].temp),t.find("#altitudeSlider").slider("setValue",i.motorData[i.motorSelectedIndex].altitude),t.find(".amount_ALTITUDE").val(i.motorData[i.motorSelectedIndex].altitude),i.defaultPeakStallTorque=i.motorData[i.motorSelectedIndex].peakStallTorque,i.defaultRollOffPoint=i.motorData[i.motorSelectedIndex].rollOffPoint,i.defaultRollOffSpeed=i.motorData[i.motorSelectedIndex].rollOffSpeed,i.defaultPeakTorqueAtMaxSpeed=i.motorData[i.motorSelectedIndex].peakTorqueAtMaxSpeed,i.defaultContinuousStallTorque=i.motorData[i.motorSelectedIndex].continuousStallTorque,i.defaultContinuosTorqueAtMaxSpeed=i.motorData[i.motorSelectedIndex].continuosTorqueAtMaxSpeed,i.motorSelectedIndex=e,i.peakMotorData=[],i.rmsMotorData=[],i.peakAcceMotor=i.peakAcceData*i.transmissionRaioVal,i.peakMotorData[0]=i.peakPoints[0]*i.transmissionRaioVal,i.peakMotorData[1]=parseFloat(i.peakPoints[1])/i.transmissionRaioVal+i.peakAcceMotor*i.motorInertia,i.rmsAcceMotor=i.rmsAcceData*i.transmissionRaioVal,i.rmsMotorData[0]=i.peakMotorData[0],i.rmsMotorData[1]=parseFloat(i.rmsPoints[1])/i.transmissionRaioVal+i.rmsAcceMotor*i.motorInertia,t.find(".cosmatt-unitComboBox").length>0&&(t.find(".peakTorqueMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(i.peakMotorData[1]),t.find(".rmsTorqueMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(i.rmsMotorData[1]),t.find(".peakSpeedMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(i.peakMotorData[0]),t.find(".rmsAccelerationMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(i.rmsAcceMotor),t.find(".peakAccelerationMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(i.peakAcceMotor)),x(),P()}var t=e(this),n={showApplicationPoints:!1,motorSelectedIndex:3,rmsPoints:[1200,5.9],peakPoints:[1200,9.4],peakAcceData:1478,rmsAcceData:1097,quadrant:1,transmissionRaioVal:1,openAppReqPanel:!1,sliderLimit:{peakMaxSpeed:800,peakMaxTorque:100,rmsMaxSpeed:800,rmsMaxTorque:100,maxTemp:125,maxAltitude:1e4,maxVoltage:10,maxTrRatio:1e3},showQuadrantToggle:!0,showMotorTsCurve:!0,showMotorSelForm:!0,showAppPointsForm:!0,showEnviorForm:!0,showTransmissionForm:!0,uniqeId:"1",xaxisMaxVale:12e6,sequenceIndex:"0",transmTextChange:!1,graphLineColor:{peakTSCurve:"#FF0808",contionusTSCurve:"#9ADC54"},motorData:[{motorPartNo:"CPB-1-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:1,peakStallTorque:2.7,rollOffPoint:2.7,peakTorqueAtMaxSpeed:1.8,continuosTorqueAtMaxSpeed:.72,rollOffSpeed:3200,maxSpeed:4500,temp:40,altitude:1,motorInertia:1e-5},{motorPartNo:"CPB-1-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:1.7,peakStallTorque:4.4,rollOffPoint:4.4,peakTorqueAtMaxSpeed:2.4,continuosTorqueAtMaxSpeed:1.302,rollOffSpeed:3300,maxSpeed:5e3,temp:40,altitude:1,motorInertia:15e-6},{motorPartNo:"CPB-1-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:2.3,peakStallTorque:7.5,rollOffPoint:7.5,peakTorqueAtMaxSpeed:4.2,continuosTorqueAtMaxSpeed:1.71,rollOffSpeed:3100,maxSpeed:4500,temp:40,altitude:1,motorInertia:25e-6},{motorPartNo:"CPB-2-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:2,peakStallTorque:3.8,rollOffPoint:3.8,peakTorqueAtMaxSpeed:2,continuosTorqueAtMaxSpeed:1.7,rollOffSpeed:4e3,maxSpeed:6e3,temp:40,altitude:1,motorInertia:65e-6},{motorPartNo:"CPB-2-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:3.4,peakStallTorque:7.8,rollOffPoint:7.8,peakTorqueAtMaxSpeed:4,continuosTorqueAtMaxSpeed:3.09,rollOffSpeed:4400,maxSpeed:6e3,temp:40,altitude:1,motorInertia:8e-5},{motorPartNo:"CPB-2-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:4.2,peakStallTorque:11,rollOffPoint:11,peakTorqueAtMaxSpeed:6,continuosTorqueAtMaxSpeed:2.9,rollOffSpeed:3100,maxSpeed:5e3,temp:40,altitude:1,motorInertia:12e-5},{motorPartNo:"CPB-3-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:9,peakStallTorque:21,rollOffPoint:21,peakTorqueAtMaxSpeed:13,continuosTorqueAtMaxSpeed:6.3,rollOffSpeed:3200,maxSpeed:4e3,temp:40,altitude:1,motorInertia:4e-4},{motorPartNo:"CPB-3-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:10,peakStallTorque:29,rollOffPoint:29,peakTorqueAtMaxSpeed:16,continuosTorqueAtMaxSpeed:6.91,rollOffSpeed:2500,maxSpeed:3500,temp:40,altitude:1,motorInertia:6e-4},{motorPartNo:"CPB-4-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:20,peakStallTorque:50,rollOffPoint:50,peakTorqueAtMaxSpeed:25,continuosTorqueAtMaxSpeed:15.3,rollOffSpeed:1800,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0015},{motorPartNo:"CPB-4-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:25,peakStallTorque:68,rollOffPoint:68,peakTorqueAtMaxSpeed:30,continuosTorqueAtMaxSpeed:17.53,rollOffSpeed:1900,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0022},{motorPartNo:"CPB-4-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:32,peakStallTorque:75,rollOffPoint:75,peakTorqueAtMaxSpeed:32,continuosTorqueAtMaxSpeed:22.8,rollOffSpeed:2100,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0029}],numberFormatterOptions:{significantDigits:3,maxPositiveExponent:6,minNegativeExponent:-4},notifyIOData:function(){}},i=e.extend({},n,a),r=new Cosmatt.NumberFormatter(i.numberFormatterOptions);i.selectIndex=i.motorSelectedIndex-1;var s=60/6.28*i.peakPoints[0];i.peakPoints[0]=s;var l,d=function(e,a){return""===e.toString().trim()?e:r.format(e)},c=function(){var a=e('<div class="tsCruveContainer row m-0"></div>');t.append(a),u(a)},u=function(a){var o=e('<div id="servoMotorTSCurve"></div>');if(a.append(o),i.showMotorSelForm||i.showAppPointsForm||i.showEnviorForm||i.showTransmissionForm){o.addClass("col-xs-6 col-6");var n=e('<div class="col-xs-6 col-6" id="servoMotorArea"></div>');a.append(n),p(n)}else o.addClass("col-xs-12 col-12"),t.find(".tsCruveContainer").addClass("widthMaxLimit");g(o)},p=function(a){var o=e('<div id="motorAreaAccordionContainer"></div>');a.append(o);var t=e('<div class="panel-group" id="accordion'+i.uniqeId+'" role="tablist" aria-multiselectable="true"></div>');o.append(t),i.showMotorTsCurve||(i.showMotorSelForm=!1),i.showMotorSelForm&&m(t),i.showApplicationPoints||(i.showAppPointsForm=!1),i.showAppPointsForm&&S(t),i.showEnviorForm&&h(t),i.showTransmissionForm&&b(t),x()},m=function(a){var t=e('<div class="panelNew panel-defaultNew"></div>');a.append(t);var n=e('<div class="panel-heading panelHeadingNew" role="tab" id="headingOne"> <div id="PaginationDiv" class="Pagination"></div><span class="accordion-plus-minus  pull-right" aria-hidden="true" style="color: grey;"></span> </div>');t.append(n);var r=e('<div id="collapseOne" class="panel-collapse collapse motorDataOpenPanle" role="tabpanel" aria-labelledby="headingOne"></div>');t.append(r);var s=e('<div class="panel-body"></div>');r.append(s),t.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),t.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")});var s=t.find("#collapseOne .panel-body"),l=e('<div id="motorDataContainer" class="row"></div>');s.append(l);var d=e('<div class="col-xs-12 col-12 solutionInfoTitle">Selected Motor: <div id="solutionTitle"></div>&nbsp;<div id="motorName"></div> <div class="statusContainer"><div class="solutionStatus motorPass" id="statusValueContainer">Pass</div></div></div>');l.append(d);var c=e('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>');d.append(c);var u=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');l.append(u);var p=e('<div class="col-xs-6 col-6 padding-right-zero"><span class="maxSpeedTitle">Maximum Speed:&nbsp;</span><span class="maxSpeedValue" id="driveNameId">'+i.motorData[i.motorSelectedIndex-1].maxSpeed+'</span><span class="unitStyle">&nbsp;rpm</span></div>');u.append(p);var m=e('<div class="col-xs-6 col-6 padding-left-right-zero"><span class="inertiaTitle">Inertia:&nbsp;</span><span class="inertiaValue" id="voltageInfoId">'+i.motorData[i.motorSelectedIndex-1].motorInertia+'</span><div class="display-inline unitStyle">&nbsp;kg-m<sup>2</sup></div></div>');u.append(m);var f=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');l.append(f);var v=e('<div class="col-xs-6 col-6 padding-right-zero"><span class="pkStallTorqueTitle">Peak Stall Torque:&nbsp;</span><span class="peakStaTorqueVal" id="peakStallTorque">'+i.motorData[i.motorSelectedIndex-1].peakStallTorque+'</span><span class="unitStyle">&nbsp;N-m</span></div>');f.append(v);var x=e('<div class="col-xs-6 col-6 padding-left-right-zero"><div class="contStallTorqueTitle">Continuous Stall Torque:&nbsp;</div><div class="continuousStaTorqueVal" id="continuousStallTorque">'+i.motorData[i.motorSelectedIndex-1].continuousStallTorque+'</div><div class="unitStyle">&nbsp;N-m</div></div>');f.append(x),n.find("#PaginationDiv").Folio({totalPages:i.motorData.length,maxPages:9,activePage:i.motorSelectedIndex,previousClass:"fa fa-chevron-left",nextClass:"fa fa-chevron-right",onUpdate:function(e){i.sequenceIndex=e,o(e)}})},f=function(){var e=t.find(".tsCruveContainer");e.width()<=940?(e.find("#servoMotorArea").addClass("resizeWidth"),e.find("#servoMotorTSCurve").addClass("resizeWidth")):(e.find("#servoMotorArea").removeClass("resizeWidth"),e.find("#servoMotorTSCurve").removeClass("resizeWidth"))},v=function(e,a){var o=l.getData();switch(i.transmissionRaioVal=parseFloat(a),e){case"PeakTorque":i.peakMotorData[1]=parseFloat(i.peakPoints[1])/i.transmissionRaioVal+i.peakAcceMotor*i.motorInertia,o[1].data[0][1]=i.peakMotorData[1],t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(i.peakMotorData[1]);break;case"RmsTorque":i.rmsMotorData[1]=parseFloat(i.rmsPoints[1])/i.transmissionRaioVal+i.rmsAcceMotor*i.motorInertia,o[3].data[0][1]=i.rmsMotorData[1],t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(i.rmsMotorData[1]);break;case"PeakSpeed":i.rmsMotorData[0]=i.peakMotorData[0]=i.peakPoints[0]*i.transmissionRaioVal,t.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(i.peakMotorData[0]),o[1].data[0][0]=o[3].data[0][0]=i.rmsMotorData[0]=i.peakMotorData[0]=i.peakSpeedRpm;break;case"RmsAcceleration":i.rmsAcceMotor=i.rmsAcceData*i.transmissionRaioVal,i.rmsMotorData[1]=parseFloat(i.rmsPoints[1])/i.transmissionRaioVal+i.rmsAcceMotor*i.motorInertia,o[3].data[0][1]=i.rmsMotorData[1],t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(i.rmsMotorData[1]),t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(i.rmsAcceMotor);break;case"PeakAcceleration":i.peakAcceMotor=i.peakAcceData*i.transmissionRaioVal,i.peakMotorData[1]=parseFloat(i.peakPoints[1])/i.transmissionRaioVal+i.peakAcceMotor*i.motorInertia,o[1].data[0][1]=i.peakMotorData[1],t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(i.peakMotorData[1]),t.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(i.peakAcceMotor);break;case"TransmissionRatio":i.peakAcceMotor=i.peakAcceData*i.transmissionRaioVal,i.rmsAcceMotor=i.rmsAcceData*i.transmissionRaioVal,o[1].data[0][0]=o[3].data[0][0]=i.rmsMotorData[0]=i.peakMotorData[0]=i.peakPoints[0]*i.transmissionRaioVal,o[1].data[0][1]=i.peakMotorData[1]=i.peakPoints[1]/i.transmissionRaioVal+i.peakAcceMotor*i.motorInertia,o[3].data[0][1]=i.rmsMotorData[1]=i.rmsPoints[1]/i.transmissionRaioVal+i.rmsAcceMotor*i.motorInertia,t.find(".cosmatt-unitComboBox").length>0&&(t.find(".peakTorqueMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(i.peakMotorData[1]),t.find(".rmsTorqueMotorSide").find(".cosmatt-unitComboBox")&&t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(i.rmsMotorData[1]),t.find(".peakSpeedMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(i.peakMotorData[0]),t.find(".rmsAccelerationMotorSide").find(".cosmatt-unitComboBox")&&t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(i.rmsAcceMotor),t.find(".peakAccelerationMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(i.peakAcceMotor))}R(o),x()},x=function(){var e=q(i.motorData[i.motorSelectedIndex]).status;if(i.motorStatus=e,i.showMotorSelForm){var a=t.find("#statusValueContainer");a.removeClass("motorPass"),a.removeClass("motorFail"),a.addClass(e?"motorPass":"motorFail"),a.text(e?"Pass":"Fail")}if(i.showAppPointsForm){var o=t.find("#servoMotorArea #tsPointsPanelContainer #statusValueContainer");o.find(".motorStatusIcon").removeClass("glyphicon-remove").removeClass("glyphicon-ok").addClass(e?"glyphicon-ok":"glyphicon-remove"),o.find("#statusValueLabel").text(e?"Motor Pass":"Motor Fail")}},S=function(a){var o=e('<div class="panel panel-default"></div>');a.append(o);var t=e('<div class="panel-heading" role="tab" id="headingTwo"> <h4 class="panel-title"> <a role="button"  data-toggle="collapse"  href="#collapseTwo'+i.uniqeId+'" aria-controls="collapseTwo" aria-expanded="true"><span>Application Torque Speed Requirements </span><span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');o.append(t);var n="";1==i.openAppReqPanel&&(n="show");var r=e('<div id="collapseTwo'+i.uniqeId+'" class="panel-collapse collapse in '+n+'" role="tabpanel" aria-labelledby="headingTwo"></div>');o.append(r),o.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),o.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),i.showMotorSelForm||r.addClass("in"),T(r)},T=function(a){var o=e('<div class="panel-body"></div>');a.append(o);var n=e('<div id="tsPointsPanelContainer"></div>');o.append(n);var r=e('<div class="row vertical-divider" ></div>');n.append(r);var s=e('<div class="col-xs-3 col-3 title"></div>');r.append(s);var l=e('<div class="col-xs-5 col-5"><div class="titleTextLoad ">Load Side</div><div class="loadSideImg"></div></div>');r.append(l);var d=e('<div class="col-xs-4 col-4 padding-right-zero"><div class="titleTextMotor">Motor Side</div><div class="motorSideImg"></div></div>');r.append(d);var c=e('<div  class="row greyClass vertical-divider"></div>');n.append(c);var u=e('<div class="col-xs-3 col-3 title">Peak Torque:</div>');c.append(u);var p=e('<div class="col-xs-5 col-5  peakTorqueDataSide appComboBox"></div>');c.append(p);var m=e('<div class="col-xs-4 col-4  peakTorqueMotorSide"> </div>');c.append(m);var f="true",x="true";i.disableControls&&i.disableControls.peakTorqueTextBox&&(f="false",x="false"),p.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",step:".1",dataRule:"currency",min:0,enable:{textbox:f,comboBox:x},value:i.peakPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if("dropdown"==this.type&&t.find(".peakTorqueMotorSide").data("unitsComboBox").setDropBoxItem(this.unit),void 0!=this.type&&"dropdown"!=this.type){if(this.value<i.rmsPoints[1])return t.find(".peakTorqueDataSide").data("unitsComboBox").setTextBoxValue(i.peakPoints[1]),z("Peak Torque can not be less than RMS Torque."),!1;z(""),i.peakPoints[1]=this.SIValue,v("PeakTorque",i.transmissionRaioVal)}}}),p.setSIValue(i.peakPoints[1]),m.unitsLabelControl({unitType:"TORQUE",unit:"newtonmeter",value:i.peakMotorData[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"}}),m.setSIValue(i.peakMotorData[1]),m.find(".cosmatt-unitLabelControl").append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>');var S=e('<div class="row vertical-divider"></div>');n.append(S);var T=e('<div class="col-xs-3 col-3 title"><span id="rmsTorqueTitle" title="RMS Torque">RMS Torque: </sapn></div>');S.append(T);var h=e('<div class="col-xs-5 col-5  rmsTorqueLoadSide appComboBox"></div>');S.append(h);var C=e('<div class="col-xs-4 col-4  rmsTorqueMotorSide"> </div>');S.append(C);var k="true",b="true";i.disableControls&&i.disableControls.rmsTorqueTextBox&&(k="false",b="false"),h.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",step:".1",dataRule:"currency",enable:{textbox:k,comboBox:b},min:0,value:i.rmsPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>i.peakPoints[1])return t.find(".rmsTorqueLoadSide").data("unitsComboBox").setTextBoxValue(i.rmsPoints[1]),z("RMS Torque can not be greater than Peak Torque."),!1;z(""),i.rmsPoints[1]=this.SIValue,v("RmsTorque",i.transmissionRaioVal)}"dropdown"==this.type&&t.find(".rmsTorqueMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),h.setSIValue(i.rmsPoints[1]),C.unitsLabelControl({unitType:"TORQUE",unit:"newtonmeter",value:i.rmsMotorData[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"}}),C.setSIValue(i.rmsMotorData[1]),C.find(".cosmatt-unitLabelControl").append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>');var M=e('<div  class="row greyClass vertical-divider"></div>');n.append(M);var A=e('<div class="col-xs-3 col-3 title"><span id="peakSpeedTitle" title="Peak Speed">Peak Speed: </sapn></div>');M.append(A);var g=e('<div class="col-xs-5 col-5  peakSpeedLoadSide appComboBox"></div>');M.append(g);var P=e('<div class="col-xs-4 col-4  peakSpeedMotorSide"></div>');M.append(P);var q="true",I="true";i.disableControls&&i.disableControls.peakSpeedTextBox&&(q="false",I="false"),g.unitsComboBox({unitType:"ANGULARVELOCITY",unit:"revolutionsperminute",mode:"spin",step:"1",dataRule:"currency",min:0,enable:{textbox:q,comboBox:I},value:i.peakPoints[0],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){void 0!=this.type&&"dropdown"!=this.type&&(i.peakPoints[0]=this.value,i.peakSpeedRpm=COSMATT.UNITCONVERTER.getUnitConvertedValue("ANGULARVELOCITY",this.value,this.unit,"revolutionsperminute"),v("PeakSpeed",i.transmissionRaioVal)),"dropdown"==this.type&&t.find(".peakSpeedMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),P.unitsLabelControl({unitType:"ANGULARVELOCITY",unit:"revolutionsperminute",value:i.peakMotorData[0],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){}}),P.setSIValue(i.peakPoints[0]),P.find(".cosmatt-unitLabelControl").append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>');var D=e('<div  class="row vertical-divider"></div>');n.append(D);var B=e('<div class="col-xs-3 col-3 title"><div title="Peak Acceleration" class="peakAccele">Peak Acceleration: </div></div>');D.append(B);var w=e('<div class="col-xs-5 col-5  peakAccelerationLoadSide appComboBox"></div>');D.append(w);var R=e('<div class="col-xs-4 col-4  peakAccelerationMotorSide"></div>');D.append(R);var y="true",V="true";i.disableControls&&i.disableControls.peakAcceleration&&(y="false",V="false"),w.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",mode:"spin",step:"1",dataRule:"currency",enable:{textbox:y,comboBox:V},value:i.peakAcceData,min:0,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value<i.rmsAcceData)return t.find(".peakAccelerationLoadSide").data("unitsComboBox").setTextBoxValue(i.peakAcceData),z("Peak Acceleration can not be less than RMS Acceleration."),!1;z(""),i.peakAcceData=this.SIValue,v("PeakAcceleration",i.transmissionRaioVal)}"dropdown"==this.type&&t.find(".peakAccelerationMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),w.setSIValue(i.peakAcceData),R.unitsLabelControl({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",value:i.peakAcceMotor,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){}}),R.setSIValue(i.peakAcceMotor),R.find(".cosmatt-unitLabelControl").append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>');var L=e('<div  class="row greyClass vertical-divider"></div>');n.append(L);var O=e('<div class="col-xs-3 col-3 title"><div id="rmsSpeedTitle" title="RMS Acceleration" class="rmsAccele">RMS Acceleration: </div></div>');L.append(O);var F=e('<div class="col-xs-5 col-5  rmsAccelerationLoadSide appComboBox"></div>');L.append(F);var E=e('<div class="col-xs-4 col-4  rmsAccelerationMotorSide"></div>');L.append(E);var N="true",U="true";if(i.disableControls&&i.disableControls.rmsAcceleration&&(N="false",U="false"),F.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",mode:"spin",step:"1",dataRule:"currency",enable:{textbox:N,comboBox:U},min:0,value:i.rmsAcceData,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>i.peakAcceData)return t.find(".rmsAccelerationLoadSide").data("unitsComboBox").setTextBoxValue(i.rmsAcceData),z("RMS Acceleration can not be greater than Peak Acceleration."),!1;z(""),i.rmsAcceData=this.SIValue,v("RmsAcceleration",i.transmissionRaioVal)}"dropdown"==this.type&&t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),F.setSIValue(i.rmsAcceData),E.unitsLabelControl({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",value:i.rmsAcceMotor,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){}}),E.setSIValue(i.rmsAcceMotor),E.find(".cosmatt-unitLabelControl").append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>'),i.disableControls&&i.disableControls.rmsSpeedTextBox&&t.find("#rmsSpeedValue").attr("disabled",!0),i.showMotorTsCurve){var _=e('<div  class="row"></div>');n.append(_)}n.append('<div id="alertMessageContainer" class="alert alert-warning"><strong>Warning:-&nbsp;&nbsp;</strong><span></span></div>');var z=function(e){return""===e?void n.find("#alertMessageContainer").hide():(n.find("#alertMessageContainer span").text(e),n.find("#alertMessageContainer").show(),void setTimeout(function(){n.find("#alertMessageContainer").fadeOut("slow")},3e3))}},h=function(a){var o=e('<div class="panel panel-default"></div>');a.append(o);var t=e('<div class="panel-heading" role="tab" id="headingThree"> <h4 class="panel-title"> <a role="button"   data-toggle="collapse"  href="#collapseThree'+i.uniqeId+'" aria-controls="collapseThree" aria-expanded="false"><span> Environmental Factors</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');o.append(t);var n=e('<div id="collapseThree'+i.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree"></div>');o.append(n);var r=e('<div class="panel-body"></div>');n.append(r),o.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),o.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),C(r)},C=function(a){var o=e('<div id="envFactorsPanelContainer"></div>');a.append(o);var r=e('<div  class="row"></div>');o.append(r);var s=e('<div class="col-xs-3 col-3 title"><span id="tempTitle">Temperature: </span></div>');r.append(s);var d=e('<div class="col-xs-3 col-3  "><input id="tempSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');r.append(d);var c=i.sliderLimit.maxTemp||n.sliderLimit.maxTemp,u=e('<div class="col-xs-6 col-6  temp-unit-dropdown display-flex margin-bottom"></label></div>');r.append(u),i.defaultPeakStallTorque=i.motorData[i.motorSelectedIndex].peakStallTorque,i.defaultRollOffPoint=i.motorData[i.motorSelectedIndex].rollOffPoint,i.defaultRollOffSpeed=i.motorData[i.motorSelectedIndex].rollOffSpeed,i.defaultPeakTorqueAtMaxSpeed=i.motorData[i.motorSelectedIndex].peakTorqueAtMaxSpeed,i.defaultContinuousStallTorque=i.motorData[i.motorSelectedIndex].continuousStallTorque,i.defaultContinuosTorqueAtMaxSpeed=i.motorData[i.motorSelectedIndex].continuosTorqueAtMaxSpeed,r.find("#tempSlider").slider({value:i.motorData[i.motorSelectedIndex].temp,min:0,max:c,step:1}).on("change",function(a){e(".temp-unit-dropdown").data("unitsComboBox").setTextBoxValue(a.value.newValue),i.motorData[i.motorSelectedIndex].temp=a.value.newValue;var o=a.value.newValue-a.value.oldValue;0!==o&&p(a.value.newValue)}),i.disableControls&&i.disableControls.tempSlider&&r.find("#tempSlider").slider("disable"),u.unitsComboBox({unitType:"TEMPERATURE",unit:"celsius",mode:"spin",step:"1",dataRule:"currency",min:0,value:i.motorData[i.motorSelectedIndex].temp,comboBoxWidthRatio:{textBox:"45%",comboBox:"35%"},callBackFn:function(){void 0!=this.type&&"dropdown"!=this.type&&(i.motorData[i.motorSelectedIndex].temp=this.value,t.find("#tempSlider").slider("setValue",parseInt(this.value)),p(this.value))}}),u.append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>'),i.disableControls&&i.disableControls.tempTextBox&&t.find(".amount_TEMPERATURE").attr("disabled",!0);var p=function(e){m("peakPlot",parseInt(e)),m("rmsPlot",parseInt(e))},m=function(e,a){var o=l.getData(),t=a,n=40,r=155,s=25,d=t+.6*(r-t),c=n+.6*(r-n),u=-.0015,p=1-(t-n)/(r-n),m=(s+234.5)/(c+234.5),f=1+(d-c)*u;switch(e){case"peakPlot":for(var v=o[0].data,S=0;S<v.length;S++)void 0!=i.motorData[i.motorSelectedIndex]&&(0!=S&&12!=S&&6!=S||(v[S][1]=i.defaultPeakStallTorque*f,0==S&&(i.motorData[i.motorSelectedIndex].peakStallTorque=v[S][1]),6==S&&(v[S][1]=-v[S][1])),1!=S&&7!=S||(v[S][1]=i.defaultRollOffPoint*f,v[S][0]=i.defaultRollOffSpeed/f,i.motorData[i.motorSelectedIndex].rollOffPoint=v[S][1],i.motorData[i.motorSelectedIndex].rollOffSpeed=v[S][0],7==S&&(v[S][0]=-v[S][0],v[S][1]=-v[S][1])),2!=S&&8!=S||(v[S][1]=i.defaultPeakTorqueAtMaxSpeed*f,i.motorData[i.motorSelectedIndex].peakTorqueAtMaxSpeed=v[S][1],8==S&&(v[S][1]=-v[S][1])));o[0].data=v;break;case"rmsPlot":for(var T=o[2].data,S=0;S<T.length;S++)void 0!=i.motorData[i.motorSelectedIndex]&&(0!=S&&10!=S&&5!=S||(T[S][1]=i.defaultContinuousStallTorque*(f*Math.sqrt(p/m)),i.motorData[i.motorSelectedIndex].continuousStallTorque=T[S][1],5==S&&(T[S][1]=-T[S][1])),1!=S&&6!=S||(T[S][1]=i.defaultContinuosTorqueAtMaxSpeed*(f*Math.sqrt(p/m)),i.motorData[i.motorSelectedIndex].continuosTorqueAtMaxSpeed=T[S][1],6==S&&(T[S][1]=-T[S][1])));o[2].data=T}R(o),x()},f=e('<div  class="row"></div>');o.append(f);var v=e('<div class="col-xs-3 col-3 title"><span id="altitudeTitle">Altitude: </span></div>');f.append(v);var S=e('<div class="col-xs-3 col-3  "><input id="altitudeSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');f.append(S);var c=i.sliderLimit.maxAltitude||n.sliderLimit.maxAltitude,T=e('<div class="col-xs-6 col-6 altitude-unit-combobox display-flex margin-bottom"> </div>');f.append(T),i.defaultContinuousStallTorque=i.motorData[i.motorSelectedIndex].continuousStallTorque,i.defaultContinuosTorqueAtMaxSpeed=i.motorData[i.motorSelectedIndex].continuosTorqueAtMaxSpeed,S.find("#altitudeSlider").slider({value:i.motorData[i.motorSelectedIndex].altitude,min:0,max:1e4,step:1}).on("change",function(e){k(e.value.newValue)}),i.disableControls&&i.disableControls.altitudeSlider&&S.find("#altitudeSlider").slider("disable"),T.unitsComboBox({unitType:"ALTITUDE",unit:"meter",mode:"spin",step:"1",dataRule:"currency",min:0,value:i.motorData[i.motorSelectedIndex].altitude,comboBoxWidthRatio:{textBox:"45%",comboBox:"35%"},callBackFn:function(){void 0!=this.type&&"dropdown"!=this.type&&k(parseInt(this.value))}}),T.append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>'),i.disableControls&&i.disableControls.transmRatioTextBox&&t.find(".amount_ALTITUDE").attr("disabled",!0)},k=function(e){t.find(".altitude-unit-combobox").data("unitsComboBox").setTextBoxValue(e);var a=l.getData(),o=a[2].data;if(i.motorData[i.motorSelectedIndex].altitude=e,e>1500){var n=[1-(e-1500)/1e4];o[0][1]=o[10][1]=(i.defaultContinuousStallTorque*n).toFixed(3),o[1][1]=(i.defaultContinuosTorqueAtMaxSpeed*n).toFixed(3),a[2].data=o,i.motorData[i.motorSelectedIndex].continuousStallTorque=o[0][1],i.motorData[i.motorSelectedIndex].continuosTorqueAtMaxSpeed=o[1][1]}else{var n=1;o[0][1]=o[10][1]=(i.defaultContinuousStallTorque*n).toFixed(3),o[1][1]=(i.defaultContinuosTorqueAtMaxSpeed*n).toFixed(3),a[2].data=o,i.motorData[i.motorSelectedIndex].continuousStallTorque=o[0][1],i.motorData[i.motorSelectedIndex].continuosTorqueAtMaxSpeed=o[1][1]}R(a),x()},b=function(a){var o=e('<div class="panel panel-default"></div>');a.append(o);var t=e('<div class="panel-heading" role="tab" id="headingFour"> <h4 class="panel-title"> <a role="button"  data-toggle="collapse"  href="#collapseFour'+i.uniqeId+'" aria-controls="collapseFour" aria-expanded="false"><span> Transmission Ratio</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');o.append(t);var n=e('<div id="collapseFour'+i.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour"></div>');o.append(n);var r=e('<div class="panel-body"></div>');n.append(r),o.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),o.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),M(r)},M=function(a){var o=e('<div id="transmissionRatioPanelContainer"></div>');a.append(o);var n=e('<div  class="row"></div>');o.append(n);var s=e('<div class="col-xs-3 col-3 title"><span id="trRatioTitle">Transmission Ratio: </span></div>');n.append(s);var l=e('<div class="col-xs-6 col-6 trRatioSlider"></div>');n.append(l);var d=e('<div class="transmContainer"><div class="transmInnerContainer"></div></div>');l.append(d);var c=e('<div class="transmLabel"><ul><li class="firstLi">1:1</li><li class="secondLi">10:1</li><li class="thirdLi">100:1</li><li class="fourthLi">1000:1</li></ul></div>');l.append(c);var u=e('<div class="col-xs-3 col-3 trRatioValue"><input type="text" value="'+i.transmissionRaioVal+'" class="transInputBox form-control text-left input-control" id="transInputBox"/> </div>');n.append(u),i.defaultRmsTorque=i.rmsMotorData[1],i.defaultRmsSpeed=i.rmsMotorData[0],
i.defaultPeakTorque=i.peakMotorData[1],i.defaultPeakSpeed=i.peakMotorData[0];var p="true",m="true",f=function(e){i.transmTextChange=!0,i.sliderVal=Math.log(e)/Math.log("1.071519305"),l.find(".transmContainer").mCustomScrollbar("scrollTo",i.sliderVal+"%")};i.disableControls&&i.disableControls.transmission&&(p="false",m="false"),setTimeout(function(){A("26","26")},50);var x=0,S=function(){t.find("input.transInputBox").on("input",function(){var a=this;x>0&&clearTimeout(x),x=setTimeout(function(){if(a.value>1e3)return e(a).val(i.transmissionRaioVal),h("Transmission ratio value can not be greater than 1000."),!1;if(a.value<="0")return e(a).val(i.transmissionRaioVal),h("Transmission ratio value can not be less than 1."),!1;h("");var o=r.format(e(a).val());e(a).val(o),i.transmissionRaioVal=o,f(o),v("TransmissionRatio",o)},800)})};S();var T=e('<div class="transmissionRaioVal">&nbsp;: 1</div>');u.append(T),u.append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>'),i.disableControls&&i.disableControls.transmRatioSlider&&$trRatioSlider.find("#trRatioSlider").slider("disable"),i.disableControls&&i.disableControls.transmRatioTextBox&&t.find("#trRatioValue").attr("disabled",!0),o.append('<div id="alertMessageContainer" class="alert alert-warning"><strong>Warning:-&nbsp;&nbsp;</strong><span></span></div>'),e(".mCSB_buttonRight, .mCSB_buttonLeft, .mCSB_draggerContainer, #mCSB_1_dragger_horizontal").click(function(e){i.transmTextChange=!1}),e("#mCSB_1_dragger_horizontal").mouseenter(function(){i.transmTextChange=!1});var h=function(e){return""===e?void o.find("#alertMessageContainer").hide():(o.find("#alertMessageContainer span").text(e),o.find("#alertMessageContainer").show(),void setTimeout(function(){o.find("#alertMessageContainer").fadeOut("slow")},5e3))}},A=function(a,o){t.find(".transmContainer").mCustomScrollbar({axis:"x",theme:"rounded-dark",scrollButtons:{enable:!0,scrollAmount:a,scrollType:"stepped"},keyboard:{enable:!1},mouseWheel:{enable:!1},scrollInertia:10,snapAmount:o,snapOffset:0,callbacks:{whileScrolling:function(){0==i.transmTextChange&&n(this.mcs.leftPct)}}}),i.transmTextChange=!0,i.sliderVal=Math.log(i.transmissionRaioVal)/Math.log("1.071519305"),t.find(".transmContainer").mCustomScrollbar("scrollTo",i.sliderVal+"%");var n=function(e){var a=Math.pow(1.07151930525057,e);a=r.format(a),a>12&&(a=Math.round(a)),i.transmissionRaioVal=a,t.find(".transInputBox").val(a),v("TransmissionRatio",a)};e(".mCSB_buttonRight, .mCSB_buttonLeft, .mCSB_draggerContainer, #mCSB_1_dragger_horizontal").click(function(e){i.transmTextChange=!1}),e("#mCSB_1_dragger_horizontal, .mCSB_dragger").mouseenter(function(){i.transmTextChange=!1})},g=function(a){var t=e('<div class="titleSection" id="tsMotorName">Motor T-S Curve : '+i.motorData[i.motorSelectedIndex].motorPartNo+"</div>");a.append(t);var n=e('<div class="tsPlotContainer"></div>');a.append(n);var r=e('<div class="tsPlotArea"></div>');n.append(r),o(i.motorSelectedIndex+1),P()},P=function(){var e=[],a={colors:[i.graphLineColor.peakTSCurve,i.graphLineColor.peakTSCurve,i.graphLineColor.contionusTSCurve,i.graphLineColor.contionusTSCurve],series:{points:{show:!0}},legend:{backgroundOpacity:0},coordinate:{type:"rectangular"},axisLabels:{show:!0},xaxis:{axisLabel:"Speed (rpm)",tickFormatter:d},yaxis:{axisLabel:"Torque (N-m)",tickFormatter:d},grid:{hoverable:!0,clickable:!0,borderColor:"#333",borderWidth:{top:0,right:0,bottom:1,left:1},margin:0,markings:[{yaxis:{from:0,to:0,tickFormatter:d},color:"#333"},{xaxis:{from:0,to:0},color:"#333"},{xaxis:{from:0,to:i.xaxisMaxVale,tickFormatter:d},color:"#fff"}]},tooltip:!0,tooltipOpts:{cssClass:"tsCurveFlotTip",content:function(e,a,o,t){var n="";switch(t.seriesIndex){case 0:switch(t.dataIndex){case 0:n="Peak Stall Torque <br />";break;case 1:n="Roll Off Point<br />";break;case 2:n="Peak Torque at Max Speed <br />";break;case 3:n="Max Speed at Zero Torque <br />"}break;case 1:n="Peak T/S Point <br />";break;case 2:switch(t.dataIndex){case 0:n="Continuous Stall Torque <br />";break;case 1:n="Continuous Stall Torque at Max Speed <br />";break;case 2:n="Max Speed Point <br />"}break;case 3:n="RMS T/S Point <br />"}return n+"Speed: "+r.format(a)+", Torque: "+r.format(o)},defaultTheme:!1,shifts:{x:0,y:20}}};1==i.quadrant&&(a.xaxis.min=0,a.yaxis.min=0);var o=[],t=[],n=[],s=[],c=[],u=[],p=[],m=[],f=function(){o=[],t=[],n=[],s=[],c=[],u=[],p=[],m=[]},v=function(e){var a=e.maxSpeed;c=[[0,e.peakStallTorque],[e.rollOffSpeed,e.rollOffPoint],[a,e.peakTorqueAtMaxSpeed],[a,0]],p=[[0,e.continuousStallTorque],[a,e.continuosTorqueAtMaxSpeed],[a,0]]},x=function(e){var a=-1*e.maxSpeed;u=[[a,0],[a+1,e.peakStallTorque]],m=[[a,0],[a+1,e.continuousStallTorque]]},S=function(e){o=o.concat(c),t=t.concat(p)},T=function(e){var a=[],n=[];u.length>0&&u.forEach(function(e,o,t){var n=[];n[0]=-1*e[0],n[1]=-1*e[1],a[o]=n}),o=o.concat(a),m.length>0&&m.forEach(function(e,a,o){var t=[];t[0]=-1*e[0],t[1]=-1*e[1],n[a]=t}),t=t.concat(n)},h=function(e){var a=[],n=[];c.length>0&&c.forEach(function(e,o,t){var n=[];n[0]=-1*e[0],n[1]=-1*e[1],a[o]=n}),o=o.concat(a),p.length>0&&p.forEach(function(e,a,o){var t=[];t[0]=-1*e[0],t[1]=-1*e[1],n[a]=t}),t=t.concat(n)},C=function(e){o=o.concat(u),t=t.concat(m)},k=function(e){o.push([0,e.peakStallTorque]),t.push([0,e.continuousStallTorque])},b=function(e){var a=e.temp,o=40,t=155,n=25,i=a+.6*(t-a),r=o+.6*(t-o),s=-.0015,l=1-(a-o)/(t-o),d=(n+234.5)/(r+234.5),c=1+(i-r)*s;return e.peakStallTorque=(e.peakStallTorque*c).toFixed(2),e.rollOffPoint=(e.rollOffPoint*c).toFixed(2),e.rollOffSpeed=(e.rollOffSpeed/c).toFixed(2),e.continuousStallTorque=(e.continuousStallTorque*(c*Math.sqrt(l/d))).toFixed(2),e.continuosTorqueAtMaxSpeed=(e.continuosTorqueAtMaxSpeed*(c*Math.sqrt(l/d))).toFixed(2),e},M=function(e){S(e),T(e),h(e),C(e),k(e)},A=function(e){if(f(),"0"==i.sequenceIndex){var a=b(e);v(a),x(a),M(a)}else v(e),x(e),M(e)};i.showMotorTsCurve&&A(i.motorData[i.motorSelectedIndex]),i.showApplicationPoints&&(n.push(i.peakMotorData),s.push(i.rmsMotorData)),e.push({data:o,label:"Peak",lines:{lineWidth:2,show:!0}},{data:n,label:"",points:{show:!0,fillColor:i.graphLineColor.peakTSCurve,radius:4}},{data:t,label:"Continous",lines:{lineWidth:2,show:!0}},{data:s,label:"",points:{show:!0,fillColor:i.graphLineColor.contionusTSCurve,radius:4}});var g={peakTorque:i.peakPoints[1],peakSpeed:i.peakPoints[0],rmsTorque:i.rmsPoints[1],peakAcceleration:i.peakAcceData,rmsAcceleration:i.rmsAcceData,temperature:i.motorData[i.motorSelectedIndex].temp,altitude:i.motorData[i.motorSelectedIndex].altitude,motorIndex:i.motorSelectedIndex},P={motorInertia:i.motorInertia,motorStatus:i.motorStatus};i.notifyIOData&&"function"==typeof i.notifyIOData&&i.notifyIOData({inputs:g,output:P}),l?R(e,a):B(e,a)},q=function(e){function a(e,a,o,t){var i=!1,r=(a[1]-e[1])/(a[0]-e[0]),s=e[1]-r*e[0],l=-1,d=r*o[0]-o[1]+s;if(i=0==d||d>0&&0>l||0>d&&l>0,t){var c=o[0]*o[1],f=o[0]*(r*o[0]+s),v=100*c/f;m.push(v)}else{var x=100*o[1]/(r*o[0]+s),S=100*o[0]/n.maxSpeed;u.push(x),p.push(S)}return i}function o(e){var a=100*e[1]/n.peakStallTorque,o=100*e[0]/n.maxSpeed;u.push(a),p.push(o)}function t(e){var a=e[0]*e[1],o=e[0]*n.continuousStallTorque,t=100*a/o;m.push(t)}var n=e,r=i.peakMotorData,s=i.rmsMotorData,l={PeakStallPoint:{x:0,y:n.peakStallTorque},RollOffPoint:{x:n.rollOffSpeed,y:n.rollOffPoint},PeakTarqueAtMaxSpeedPoint:{x:n.maxSpeed,y:n.peakTorqueAtMaxSpeed},ContinuousStallTorquePoint:{x:0,y:n.continuousStallTorque},ContinuousStallTorqueMaxSpeedPoint:{x:n.maxSpeed,y:n.continuosTorqueAtMaxSpeed}},d=0,c=null,u=[],p=[],m=[],f=null,v=null,x=null,S={status:c,torqueUtilization:f,speedUtilization:v,avgPower:x},T=s[0],h=s[1],C=r[0],k=r[1],b=!1,M=!1,A=null,g=null,P=null;return T<=n.maxSpeed?(A=[l.ContinuousStallTorquePoint.x,l.ContinuousStallTorquePoint.y],g=[l.ContinuousStallTorqueMaxSpeedPoint.x,l.ContinuousStallTorqueMaxSpeedPoint.y],P=[T,h],M=a(A,g,P,!0)):(d=-1,t([T,h])),k<=n.peakStallTorque&&C<=n.maxSpeed?C<=l.RollOffPoint.x?(A=[l.PeakStallPoint.x,l.PeakStallPoint.y],g=[l.RollOffPoint.x,l.RollOffPoint.y],P=[C,k],b=a(A,g,P,!1)):(A=[l.RollOffPoint.x,l.RollOffPoint.y],g=[l.PeakTarqueAtMaxSpeedPoint.x,l.PeakTarqueAtMaxSpeedPoint.y],P=[C,k],b=a(A,g,P,!1)):(d=-1,o([C,k])),-1!=d&&0!=b&&0!=M||(d=-1),-1==d?S.status=!1:0==d&&(S.status=!0),S.torqueUtilization=Math.max.apply(Math,u),S.speedUtilization=Math.max.apply(Math,p),S.avgPower=Math.max.apply(Math,m),S},I=function(){l.getAxes();if(!i.showMotorTsCurve){var e=Math.max(i.peakMotorData[0]+50,i.rmsMotorData[0]+50,200),a=Math.max(i.peakMotorData[1]+10,i.rmsMotorData[1]+10,150);l.getOptions().yaxes[0].max=a,l.getOptions().xaxes[0].max=e,4===i.quadrant&&(l.getOptions().yaxes[0].min=-1*a,l.getOptions().xaxes[0].min=-1*e)}},D=function(){4==i.quadrant?(l.getOptions().grid.markings[0].color="#bdbdbd",l.getOptions().grid.markings[1].color="#bdbdbd"):(l.getOptions().grid.markings[0].color="#333",l.getOptions().grid.markings[1].color="#333"),I(),l.setupGrid(),l.draw()},B=function(a,o){setTimeout(function(){l=e.plot(t.find(".tsPlotArea"),a,o),D(),w(),f()},0)},w=function(){var a=0;t.find(".tsCruveContainer").resize(function(o){var n=e(this);n.find("#transmissionRatioPanelContainer").width()<=502?(n.find(".transmContainer").css("width","210px"),n.find(".transmInnerContainer").css("width","2310px"),t.find(".transmContainer").mCustomScrollbar("destroy"),setTimeout(function(){A("21","21")},500),n.find(".transmLabel").find("li.firstLi").css("left","35px"),n.find(".transmLabel").find("li.secondLi").css("left","83px"),n.find(".transmLabel").find("li.thirdLi").css("left","132px"),n.find(".transmLabel").find("li.fourthLi").css("left","182px")):(n.find(".transmContainer").css("width","260px"),n.find(".transmInnerContainer").css("width","2860px"),t.find(".transmContainer").mCustomScrollbar("destroy"),setTimeout(function(){A("26","26")},500),n.find(".transmLabel").find("li.firstLi").css("left","28px"),n.find(".transmLabel").find("li.secondLi").css("left","94px"),n.find(".transmLabel").find("li.thirdLi").css("left","160px"),n.find(".transmLabel").find("li.fourthLi").css("left","230px")),n.width()<=940?(n.find("#servoMotorArea").addClass("resizeWidth"),n.find("#servoMotorTSCurve").addClass("resizeWidth"),n.find(".tsPlotArea").css("min-height",n.find(".tsPlotArea").width()),n.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%")):n.width()>940&&n.width()<1280?(n.find("#servoMotorArea").removeClass("resizeWidth"),n.find("#servoMotorTSCurve").removeClass("resizeWidth"),n.find(".tsPlotArea").css("min-height",n.find(".tsPlotArea").width()),n.find("#servoMotorArea").find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").css("width","auto"),n.find("#servoMotorArea").find(".response-status").attr("title",t.find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").text())):(n.find("#servoMotorArea").removeClass("resizeWidth"),n.find("#servoMotorTSCurve").removeClass("resizeWidth"),n.find(".tsPlotArea").css("min-height",n.find(".tsPlotArea").width()),n.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%")),a>0&&clearTimeout(a),i.autoResizer&&!a&&(a=setTimeout(function(){i.autoResizer()},500))})},R=function(e,a){var o={peakTorque:i.peakPoints[1],peakSpeed:i.peakPoints[0],rmsTorque:i.rmsPoints[1],peakAcceleration:i.peakAcceData,rmsAcceleration:i.rmsAcceData,temperature:i.motorData[i.motorSelectedIndex].temp,altitude:i.motorData[i.motorSelectedIndex].altitude,motorIndex:i.motorSelectedIndex},t={motorInertia:i.motorInertia,motorStatus:i.motorStatus};i.notifyIOData&&"function"==typeof i.notifyIOData&&i.notifyIOData({inputs:o,output:t}),a&&(void 0!=a.xaxis.min&&void 0!=a.yaxis.min?(l.getOptions().yaxes[0].min=a.yaxis.min,l.getOptions().xaxes[0].min=a.xaxis.min):(l.getOptions().yaxes[0].min=null,l.getOptions().xaxes[0].min=null)),l.setData(e),D(),y()},y=function(){i.assessmentMode&&i.assessmentCallback&&i.assessmentCallback({peakTorque:{value:i.peakPoints[1],unit:"Nm"},peakSpeed:{value:i.peakPoints[0],unit:"rad/sec"},rmsTorque:{value:i.rmsPoints[1],unit:"Nm"},peakAcceData:{value:i.peakAcceData,unit:"rad/sec2"},rmsAcceData:{value:i.peakAcceMotor,unit:"rad/sec2"},temperature:{value:t.find(".amount_TEMPERATURE").val(),unit:"C"},altitude:{value:t.find(".amount_ALTITUDE").val(),unit:"m"},transmissionRatio:{value:i.transmissionRaioVal,unit:""},motorSelectedIndex:{value:i.motorSelectedIndex,unit:""}})},V=function(e){e.peakTorque&&t.find(".peakTorqueDataSide").data("unitsComboBox").setSIValue(e.peakTorque.value),e.peakSpeed&&t.find(".peakSpeedLoadSide").data("unitsComboBox").setSIValue(e.peakSpeed.value),e.rmsTorque&&t.find(".rmsTorqueLoadSide").data("unitsComboBox").setSIValue(e.rmsTorque.value),e.peakAcceData&&t.find(".peakAccelerationLoadSide").data("unitsComboBox").setSIValue(e.peakAcceData.value),e.rmsAcceData&&t.find(".rmsAccelerationLoadSide").data("unitsComboBox").setSIValue(e.rmsAcceData.value),e.temperature&&(t.find("#tempSlider").slider("setValue",e.temperature.value),t.find(".amount_TEMPERATURE").val(e.temperature.value)),e.altitude&&(t.find("#altitudeSlider").slider("setValue",e.altitude.value),t.find(".amount_ALTITUDE").val(e.altitude.value)),e.transmissionRatio&&(i.sliderVal=Math.log(e.transmissionRatio.value)/Math.log("1.071519305"),t.find(".transmContainer").mCustomScrollbar("scrollTo",i.sliderVal+"%"),t.find(".transInputBox").val(e.transmissionRatio.value),v("TransmissionRatio",e.transmissionRatio.value)),e.motorSelectedIndex&&(t.find("#solutionSliderId").slider("setValue",parseInt(i.motorSelectedIndex)),t.find("#PaginationDiv").Folio({activePage:i.motorSelectedIndex}))},L=function(e){var a;if(e.peakTorque&&(a=e.peakTorque.status?"correct":"incorrect",t.find(".peakTorqueDataSide").find("input.amount_TORQUE").addClass(a),a=e.peakTorque.status?"fa-check correct":"fa-times incorrect",t.find(".peakTorqueMotorSide").find(".response-status").css({display:"inline","align-items":"center"}),t.find(".peakTorqueMotorSide").find(".response-status").find("span.fa").addClass(a)),e.peakSpeed&&(a=e.peakSpeed.status?"correct":"incorrect",t.find(".peakSpeedLoadSide").find("input.amount_ANGULARVELOCITY").addClass(a),a=e.peakSpeed.status?"fa-check correct":"fa-times incorrect",t.find(".peakSpeedMotorSide").find(".response-status").css({display:"inline","align-items":"center"}),t.find(".peakSpeedMotorSide").find(".response-status").find("span.fa").addClass(a)),e.rmsTorque&&(a=e.rmsTorque.status?"correct":"incorrect",t.find(".rmsTorqueLoadSide").find("input.amount_TORQUE").addClass(a),a=e.rmsTorque.status?"fa-check correct":"fa-times incorrect",t.find(".rmsTorqueMotorSide").find(".response-status").css({display:"inline","align-items":"center"}),t.find(".rmsTorqueMotorSide").find(".response-status").find("span.fa").addClass(a)),e.peakAcceData&&(a=e.peakAcceData.status?"correct":"incorrect",t.find(".peakAccelerationLoadSide").find("input.amount_ANGULARACCELERATION").addClass(a),a=e.peakAcceData.status?"fa-check correct":"fa-times incorrect",t.find(".peakAccelerationMotorSide").find(".response-status").css({display:"inline","align-items":"center"}),t.find(".peakAccelerationMotorSide").find(".response-status").find("span.fa").addClass(a)),e.rmsAcceData&&(a=e.rmsAcceData.status?"correct":"incorrect",t.find(".rmsAccelerationLoadSide").find("input.amount_ANGULARACCELERATION").addClass(a),a=e.rmsAcceData.status?"fa-check correct":"fa-times incorrect",t.find(".rmsAccelerationMotorSide").find(".response-status").css({display:"inline","align-items":"center"}),t.find(".rmsAccelerationMotorSide").find(".response-status").find("span.fa").addClass(a)),e.temperature){a=e.temperature.status?"correct":"incorrect",t.find(".amount_TEMPERATURE").addClass(a),a=e.temperature.status?"fa-check correct":"fa-times incorrect",t.find("#envFactorsPanelContainer").find(".temp-unit-dropdown").find(".response-status").css({display:"flex","align-items":"center"}),t.find("#envFactorsPanelContainer").find(".temp-unit-dropdown").find(".response-status").find("span.fa").addClass(a);var o=e.temperature.status?"":"("+e.temperature.correctAnswer+" &#176;C)";t.find("#envFactorsPanelContainer").find(".temp-unit-dropdown").find(".response-status").find(".correct-answer").append(o),t.find("#envFactorsPanelContainer").find("#tempSlider").slider("disable"),t.find("#envFactorsPanelContainer").find(".amount_TEMPERATURE").attr("disabled",!0)}if(e.altitude){a=e.altitude.status?"correct":"incorrect",t.find(".amount_ALTITUDE").addClass(a),a=e.altitude.status?"fa-check correct":"fa-times incorrect",t.find("#envFactorsPanelContainer").find(".altitude-unit-combobox").find(".response-status").css({display:"flex","align-items":"center"}),t.find("#envFactorsPanelContainer").find(".altitude-unit-combobox").find(".response-status").find("span.fa").addClass(a);var o=e.altitude.status?"":"("+e.altitude.correctAnswer+" m)";t.find("#envFactorsPanelContainer").find(".altitude-unit-combobox").find(".response-status").find(".correct-answer").append(o),t.find("#envFactorsPanelContainer").find("#altitudeSlider").slider("disable"),t.find("#envFactorsPanelContainer").find(".amount_ALTITUDE").attr("disabled",!0)}if(e.transmissionRatio){a=e.transmissionRatio.status?"correct":"incorrect",t.find(".transInputBox").addClass(a),a=e.transmissionRatio.status?"fa-check correct":"fa-times incorrect",t.find("#transmissionRatioPanelContainer").find(".trRatioValue").find(".response-status").css({display:"inline","align-items":"center"}),t.find(".trRatioSlider").addClass("pointer-events-none"),t.find(".transInputBox").css("width","40%"),t.find(".transInputBox").attr("disabled","disabled"),t.find("#transmissionRatioPanelContainer").find(".trRatioValue").find(".response-status").find("span.fa").addClass(a);var o=e.transmissionRatio.status?"":"("+e.transmissionRatio.correctAnswer+" : 1)";t.find("#transmissionRatioPanelContainer").find(".trRatioValue").find(".response-status").find(".correct-answer").append(o)}if(e.motorSelectedIndex){a=e.motorSelectedIndex.status?"fa-check correct":"fa-times incorrect",t.find(".solutionInfoTitle").find(".response-status").css({display:"inline","align-items":"center"}),t.find(".solutionInfoTitle").find(".response-status").find("span.fa").addClass(a),t.find("#PaginationDiv .Folio").addClass("pointer-events-none"),t.find("#PaginationDiv .Folio .FolioPages, #PaginationDiv .Folio span.FolioPage").addClass("gray-background");var o=e.motorSelectedIndex.status?"":"(#"+(e.motorSelectedIndex.correctAnswer+1)+" : "+i.motorData[e.motorSelectedIndex.correctAnswer].motorPartNo+")";t.find(".solutionInfoTitle").find(".response-status").find(".correct-answer").append(o)}};return c(),{ref:this,updateInputs:V,markAnswers:L}}}(jQuery);