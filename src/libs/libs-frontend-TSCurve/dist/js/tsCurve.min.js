"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("jquery")):e(jQuery)}(function(e){var a,o,t=function n(a,o){return this.$el=a,this.options=e.extend({},n.rules.defaults,n.rules[o.rule]||{},o),this.min=Number(this.options.min)||0,this.max=Number(this.options.max)||0,this.$el.on({"focus.spinner":e.proxy(function(a){a.preventDefault(),e(document).trigger("mouseup.spinner"),this.oldValue=this.value()},this),"change.spinner":e.proxy(function(e){e.preventDefault(),this.value(this.$el.val())},this),"keydown.spinner":e.proxy(function(e){var a={38:"up",40:"down"}[e.which];a&&(e.preventDefault(),this.spin(a))},this)}),this.oldValue=this.value(),this.value(this.$el.val()),this};t.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:null,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},t.prototype={spin:function(a){if(!this.$el.prop("disabled")){this.oldValue=this.value();var o=e.isFunction(this.options.step)?this.options.step.call(this,a):this.options.step,t="up"===a?1:-1;this.value(this.oldValue+Number(o)*t)}},value:function(t){if(null===t||void 0===t)return this.numeric(this.$el.val());t=this.numeric(t);var i=this.validate(t);0!==i&&(t=-1===i?this.min:this.max),this.$el.val(t.toFixed(this.options.precision)),this.$el.trigger("changing.spinner",[this.value(),this.oldValue]),clearTimeout(a),a=setTimeout(e.proxy(function(){this.$el.trigger("changed.spinner",[this.value(),this.oldValue])},this),o.delay)},numeric:function(e){return e=this.options.precision>0?parseFloat(e,10):parseInt(e,10),isFinite(e)?e:e||this.options.min||0},validate:function(e){return null!==this.options.min&&e<this.min?-1:null!==this.options.max&&e>this.max?1:0}},o=function(a,o){this.$el=e(a),this.$spinning=this.$el.find('[data-spin="spinner"]'),0===this.$spinning.length&&(this.$spinning=this.$el.find(':input[type="text"]')),o=e.extend({},o,this.$spinning.data()),this.spinning=new t(this.$spinning,o),this.$el.on("click.spinner",'[data-spin="up"], [data-spin="down"]',e.proxy(this,"spin")).on("mousedown.spinner",'[data-spin="up"], [data-spin="down"]',e.proxy(this,"spin")),e(document).on("mouseup.spinner",e.proxy(function(){clearTimeout(this.spinTimeout),clearInterval(this.spinInterval)},this)),o.delay&&this.delay(o.delay),o.changed&&this.changed(o.changed),o.changing&&this.changing(o.changing)},o.delay=500,o.prototype={constructor:o,spin:function(a){var o=e(a.currentTarget).data("spin");switch(a.type){case"click":a.preventDefault(),this.spinning.spin(o);break;case"mousedown":1===a.which&&(this.spinTimeout=setTimeout(e.proxy(this,"beginSpin",o),300))}},delay:function s(e){var s=Number(e);s>=0&&(this.constructor.delay=s+100)},value:function(){return this.spinning.value()},changed:function(e){this.bindHandler("changed.spinner",e)},changing:function(e){this.bindHandler("changing.spinner",e)},bindHandler:function(a,o){e.isFunction(o)?this.$spinning.on(a,o):this.$spinning.off(a)},beginSpin:function(a){this.spinInterval=setInterval(e.proxy(this.spinning,"spin",a),100)}};var i=e.fn.spinner;return e.fn.spinner=function(a,t){return this.each(function(){var i=e.data(this,"spinner");i||(i=new o(this,a),e.data(this,"spinner",i)),"delay"===a||"changed"===a||"changing"===a?i[a](t):"step"===a&&t?i.spinning.step=t:"spin"===a&&t&&i.spinning.spin(t)})},e.fn.spinner.Constructor=o,e.fn.spinner.noConflict=function(){return e.fn.spinner=i,this},e(function(){e('[data-trigger="spinner"]').spinner()}),e.fn.spinner}),function(e){e.fn.TSCurve=function(a){var o,t=e(this),i={showApplicationPoints:!1,motorSelectedIndex:3,rmsPoints:[190,44],peakPoints:[400,60],quadrant:1,sliderLimit:{peakMaxSpeed:800,peakMaxTorque:100,rmsMaxSpeed:800,rmsMaxTorque:100,maxTemp:125,maxAltitude:1e4,maxVoltage:10,maxTrRatio:100},showQuadrantToggle:!0,showMotorTsCurve:!0,showMotorSelForm:!0,showAppPointsForm:!0,showEnviorForm:!0,showTransmissionForm:!0,uniqeId:"1",firstTimeCall:"0"},n=e.extend({},i,a),s=function(){var a=e('<div class="tsCruveContainer row m-0"></div>');t.append(a),r(a)},r=function(a){var o=e('<div id="servoMotorTSCurve"></div>');if(a.append(o),n.showMotorSelForm||n.showAppPointsForm||n.showEnviorForm||n.showTransmissionForm){o.addClass("col-xs-6 col-6");var i=e('<div class="col-xs-6 col-6" id="servoMotorArea"></div>');a.append(i),l(i)}else o.addClass("col-xs-12 col-12"),t.find(".tsCruveContainer").addClass("widthMaxLimit");T(o)},l=function(a){var o=e('<div id="motorAreaAccordionContainer"></div>');a.append(o);var t=e('<div class="panel-group" id="accordion'+n.uniqeId+'" role="tablist" aria-multiselectable="true"></div>');o.append(t),n.showMotorTsCurve||(n.showMotorSelForm=!1),n.showMotorSelForm&&d(t),n.showApplicationPoints||(n.showAppPointsForm=!1),n.showAppPointsForm&&c(t),n.showEnviorForm&&v(t),n.showTransmissionForm&&h(t),p()},d=function(a){function o(e){var e=e-1;d.find("#driveNameId").text(n.motorData[e].maxSpeed+" rad/sec"),d.find("#motorNameId").text(n.motorData[e].motorPartNo),d.find("#voltageInfoId").text(n.motorData[e].motorInertia),d.find("#peakStallTorque").text(n.motorData[e].peakStallTorque+" N-m"),d.find("#continuousStallTorque").text(n.motorData[e].continuousStallTorque+" N-m"),d.find("#solutionTitle").text("Selected Soultion: # "+(e+1)),n.motorSelectedIndex=e,n.motorInertia=n.motorData[e].motorInertia,t.find("#tempSlider").slider("setValue",n.motorData[n.motorSelectedIndex].temp),t.find("#tempValue").val(n.motorData[n.motorSelectedIndex].temp),t.find("#altitudeSlider").slider("setValue",n.motorData[n.motorSelectedIndex].altitude),t.find("#altitudeValue").val(n.motorData[n.motorSelectedIndex].altitude),n.defaultPeakStallTorque=n.motorData[n.motorSelectedIndex].peakStallTorque,n.defaultRollOffPoint=n.motorData[n.motorSelectedIndex].rollOffPoint,n.defaultRollOffSpeed=n.motorData[n.motorSelectedIndex].rollOffSpeed,n.defaultPeakTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].peakTorqueAtMaxSpeed,n.defaultContinuousStallTorque=n.motorData[n.motorSelectedIndex].continuousStallTorque,n.defaultContinuosTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed,n.motorSelectedIndex=e,n.peakMotorData=[],n.rmsMotorData=[],n.peakAcceMotor=n.peakAcceData*n.transmissionRaioVal,n.peakMotorData[0]=n.peakPoints[0]*n.transmissionRaioVal,n.peakMotorData[1]=parseFloat(n.peakPoints[1])/n.transmissionRaioVal+n.peakAcceMotor*n.motorInertia,n.rmsAcceMotor=n.rmsAcceData*n.transmissionRaioVal,n.rmsMotorData[0]=n.peakMotorData[0],n.rmsMotorData[1]=parseFloat(n.rmsPoints[1])/n.transmissionRaioVal+n.rmsAcceMotor*n.motorInertia,t.find(".cosmatt-unitComboBox").length>0&&(t.find(".peakTorqueMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[1]),t.find(".rmsTorqueMotorSide").find(".cosmatt-unitComboBox")&&t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsMotorData[1]),t.find(".peakSpeedMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[0]),t.find(".rmsAccelerationMotorSide").find(".cosmatt-unitComboBox")&&t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsAcceMotor),t.find(".peakAccelerationMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.peakAcceMotor)),b(),p()}var i=e('<div class="panelNew panel-defaultNew"></div>');a.append(i);var s=e('<div class="panel-heading panelHeadingNew" role="tab" id="headingOne"> <div id="PaginationDiv" class="Pagination"></div><span class="accordion-plus-minus  pull-right" aria-hidden="true" style="color: grey;"></span> </div>');i.append(s);var r=e('<div id="collapseOne" class="panel-collapse collapse motorDataOpenPanle" role="tabpanel" aria-labelledby="headingOne"></div>');i.append(r);var l=e('<div class="panel-body"></div>');r.append(l),i.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),i.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")});var l=i.find("#collapseOne .panel-body"),d=e('<div id="motorDataContainer" class="row"></div>');l.append(d);var u=e('<div class="col-xs-12 col-12 solutionInfoTitle"><div id="solutionTitle"></div></div>');d.append(u),u.append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>');var c=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');d.append(c);var m=e('<div class="col-xs-6 col-6 maxSpeed"><span class="driveTitle">Maximum Speed:</span><span class="driveName" id="driveNameId">'+n.motorData[n.motorSelectedIndex].maxSpeed+"</span></div>");c.append(m);var f=e('<div class="col-xs-6 col-6"><span class="motorTitle">Motor:</span><span class="motorName" id="motorNameId">'+n.motorData[n.motorSelectedIndex].motorPartNo+"</span></div>");c.append(f);var v=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');d.append(v);var x=e('<div class="col-xs-6 col-6"><span class="voltageTitle">Peak Stall Torque:</span><span class="voltageName" id="peakStallTorque">'+n.motorData[n.motorSelectedIndex].peakStallTorque+" V</span></div>");v.append(x);var h=e('<div class="col-xs-6 col-6"><span class="voltageTitle">Continuous Stall Torque:</span><span class="voltageName" id="continuousStallTorque">'+n.motorData[n.motorSelectedIndex].continuousStallTorque+" V</span></div>");v.append(h);var S=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');d.append(S);var T=e('<div class="col-xs-6 col-6"><span class="voltageTitle">Inertia:</span><span class="voltageName" id="voltageInfoId">'+n.motorData[n.motorSelectedIndex].motorInertia+'</span><div class="display-inline">kg-m<sup>2</sup></div></div>');S.append(T);var k=e('<div class="col-xs-6 col-6"><span class="solutionStatusTitle">Solution Status:</span><span class="solutionStatus motorPass" id="statusValueContainer">Pass</span></div>');S.append(k),s.find("#PaginationDiv").Folio({totalPages:n.motorData.length,maxPages:9,activePage:n.motorSelectedIndex,previousClass:"fa fa-chevron-left",nextClass:"fa fa-chevron-right",onUpdate:function(e){n.firstTimeCall=e,o(e)}})},u=function(e,a){var i=o.getData();switch(n.transmissionRaioVal=parseInt(a),e){case"PeakTorque":n.peakMotorData[1]=parseFloat(n.peakPoints[1])/n.transmissionRaioVal+n.peakAcceMotor*n.motorInertia,i[1].data[0][1]=n.peakMotorData[1],t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[1]);break;case"RmsTorque":n.rmsMotorData[1]=parseFloat(n.rmsPoints[1])/n.transmissionRaioVal+n.rmsAcceMotor*n.motorInertia,i[3].data[0][1]=n.rmsMotorData[1],t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsMotorData[1]);break;case"PeakSpeed":n.rmsMotorData[0]=n.peakMotorData[0]=n.peakPoints[0]*n.transmissionRaioVal,i[1].data[0][0]=i[3].data[0][0]=n.rmsMotorData[0],t.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[0]);break;case"RmsAcceleration":n.rmsAcceMotor=n.rmsAcceData*n.transmissionRaioVal,n.rmsMotorData[1]=parseFloat(n.rmsPoints[1])/n.transmissionRaioVal+n.rmsAcceMotor*n.motorInertia,i[3].data[0][1]=n.rmsMotorData[1],t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsMotorData[1]),t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsAcceMotor);break;case"PeakAcceleration":n.peakAcceMotor=n.peakAcceData*n.transmissionRaioVal,n.peakMotorData[1]=parseFloat(n.peakPoints[1])/n.transmissionRaioVal+n.peakAcceMotor*n.motorInertia,i[1].data[0][1]=n.peakMotorData[1],t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[1]),t.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.peakAcceMotor);break;case"TransmissionRatio":n.peakAcceMotor=n.peakAcceData*n.transmissionRaioVal,n.rmsAcceMotor=n.rmsAcceData*n.transmissionRaioVal,i[1].data[0][0]=i[3].data[0][0]=n.rmsMotorData[0]=n.peakMotorData[0]=n.peakPoints[0]*n.transmissionRaioVal,i[1].data[0][1]=n.peakMotorData[1]=n.peakPoints[1]/n.transmissionRaioVal+n.peakAcceMotor*n.motorInertia,i[3].data[0][1]=n.rmsMotorData[1]=n.rmsPoints[1]/n.transmissionRaioVal+n.rmsAcceMotor*n.motorInertia,t.find(".cosmatt-unitComboBox").length>0&&(t.find(".peakTorqueMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[1]),t.find(".rmsTorqueMotorSide").find(".cosmatt-unitComboBox")&&t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsMotorData[1]),t.find(".peakSpeedMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(n.peakMotorData[0]),t.find(".rmsAccelerationMotorSide").find(".cosmatt-unitComboBox")&&t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.rmsAcceMotor),t.find(".peakAccelerationMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(n.peakAcceMotor))}P(i),p()},p=function(){var e=k(n.motorData[n.motorSelectedIndex]).status;if(n.showMotorSelForm){var a=t.find("#statusValueContainer");a.removeClass("motorPass"),a.removeClass("motorFail"),a.addClass(e?"motorPass":"motorFail"),a.text(e?"Pass":"Fail")}if(n.showAppPointsForm){var o=t.find("#servoMotorArea #tsPointsPanelContainer #statusValueContainer");o.find(".motorStatusIcon").removeClass("glyphicon-remove").removeClass("glyphicon-ok").addClass(e?"glyphicon-ok":"glyphicon-remove"),o.find("#statusValueLabel").text(e?"Motor Pass":"Motor Fail")}},c=function(a){var o=e('<div class="panel panel-default"></div>');a.append(o);var t=e('<div class="panel-heading" role="tab" id="headingTwo"> <h4 class="panel-title"> <a role="button" data-parent="#accordion'+n.uniqeId+'" data-toggle="collapse"  href="#collapseTwo'+n.uniqeId+'" aria-controls="collapseTwo" aria-expanded="false"><span>Application Torque Speed Requirements </span><span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');o.append(t);var i=e('<div id="collapseTwo'+n.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo"></div>');o.append(i),o.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),o.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),n.showMotorSelForm||i.addClass("in"),f(i)},m=function(a){var i=o.getData();switch(a){case"PeakSpeed":i[1].data[0][0]=n.peakPoints[0]=t.find("#peakSpeedSlider").slider("getValue"),n.defaultPeakSpeed=t.find("#peakSpeedSlider").slider("getValue"),t.find("#peakSpeedValue").val(e("#peakSpeedSlider").slider("getValue"));break;case"PeakTorque":i[1].data[0][1]=n.peakPoints[1]=t.find("#peakTorqueSlider").slider("getValue"),n.defaultPeakTorque=t.find("#peakTorqueSlider").slider("getValue"),t.find("#peakTorqueValue").val(e("#peakTorqueSlider").slider("getValue"));break;case"RmsSpeed":i[3].data[0][0]=n.rmsPoints[0]=t.find("#rmsSpeedSlider").slider("getValue"),n.defaultRmsSpeed=t.find("#rmsSpeedSlider").slider("getValue"),t.find("#rmsSpeedValue").val(e("#rmsSpeedSlider").slider("getValue"));break;case"RmsTorque":i[3].data[0][1]=n.rmsPoints[1]=t.find("#rmsTorqueSlider").slider("getValue"),n.defaultRmsTorque=t.find("#rmsTorqueSlider").slider("getValue"),t.find("#rmsTorqueValue").val(e("#rmsTorqueSlider").slider("getValue"));break;case"TransmissionRatio":var s=t.find("#trRatioSlider").slider("getValue"),i=o.getData();i[1].data[0][0]=n.peakPoints[0]=(n.defaultPeakSpeed*s).toFixed(2),i[1].data[0][1]=n.peakPoints[1]=(n.defaultPeakTorque/s).toFixed(2),i[3].data[0][0]=n.rmsPoints[0]=(n.defaultRmsSpeed*s).toFixed(2),i[3].data[0][1]=n.rmsPoints[1]=(n.defaultRmsTorque/s).toFixed(2),i[1].data[0][0]>n.sliderLimit.peakMaxSpeed?t.find("#peakSpeedSlider").slider("setAttribute","max",parseInt(i[1].data[0][0])):t.find("#peakSpeedSlider").slider("setAttribute","max",n.sliderLimit.peakMaxSpeed),i[3].data[0][0]>n.sliderLimit.rmsMaxSpeed?t.find("#rmsSpeedSlider").slider("setAttribute","max",parseInt(i[3].data[0][0])):t.find("#rmsSpeedSlider").slider("setAttribute","max",n.sliderLimit.rmsMaxSpeed),t.find("#peakSpeedSlider").slider("setValue",i[1].data[0][0]),t.find("#peakTorqueSlider").slider("setValue",i[1].data[0][1]),t.find("#rmsSpeedSlider").slider("setValue",i[3].data[0][0]),t.find("#rmsTorqueSlider").slider("setValue",i[3].data[0][1]),t.find("#trRatioValue").val(s),t.find("#peakSpeedValue").val(i[1].data[0][0]),t.find("#peakTorqueValue").val(i[1].data[0][1]),t.find("#rmsSpeedValue").val(i[3].data[0][0]),t.find("#rmsTorqueValue").val(i[3].data[0][1])}P(i),p()},f=function(a){var o=e('<div class="panel-body"></div>');a.append(o);var i=e('<div id="tsPointsPanelContainer"></div>');o.append(i);var s=e('<div class="row" id="sliderContainer"></div>');i.append(s);var r=e('<div class="col-xs-2 col-2 title"></div>');s.append(r);var l=e('<div class="col-xs-5 col-5"><div class="titleTextLoad ">Load Side</div></div>');s.append(l);var d=e('<div class="col-xs-5 col-5"><div class="titleTextMotor">Motor Side</div></div>');s.append(d);var p=e('<div id="sliderContainer" class="row"></div>');i.append(p);var c=e('<div class="col-xs-2 col-2 title"><span id="peakTorqueTitle" title="Peak Torque">Peak Torque: </span></div>');p.append(c);var m=e('<div class="col-xs-5 col-5  peakTorqueDataSide"></div>');p.append(m);var f=e('<div class="col-xs-5 col-5  peakTorqueMotorSide"> </div>');p.append(f),m.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",roundOfNumber:"2",mode:"spin",step:".1",min:0,value:n.peakPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){this.value&&(n.peakPoints[1]=this.value,u("PeakTorque",n.transmissionRaioVal))}}),f.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",roundOfNumber:"2",mode:"spin",value:n.peakMotorData[1],enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}}),n.disableControls&&n.disableControls.peakTorqueTextBox&&t.find("#peakTorqueValue").attr("disabled",!0);var v=e('<div id="sliderContainer" class="row"></div>');i.append(v);var x=e('<div class="col-xs-2 col-2 title"><span id="rmsTorqueTitle" title="RMS Torque">RMS Torque: </sapn></div>');v.append(x);var h=e('<div class="col-xs-5 col-5  rmsTorqueLoadSide"></div>');v.append(h);var S=e('<div class="col-xs-5 col-5  rmsTorqueMotorSide"> </div>');v.append(S),h.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",roundOfNumber:"2",mode:"spin",step:".1",min:0,value:n.rmsPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){this.value&&(n.rmsPoints[1]=this.value,u("RmsTorque",n.transmissionRaioVal))}}),S.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",roundOfNumber:"2",mode:"spin",value:n.rmsMotorData[1],enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}}),n.disableControls&&n.disableControls.rmsTorqueTextBox&&t.find("#rmsTorqueValue").attr("disabled",!0);var T=e('<div id="sliderContainer" class="row"></div>');i.append(T);var b=e('<div class="col-xs-2 col-2 title"><span id="peakSpeedTitle" title="Peak Speed">Peak Speed: </sapn></div>');T.append(b);var k=e('<div class="col-xs-5 col-5  peakSpeedLoadSide"></div>');T.append(k);var g=e('<div class="col-xs-5 col-5  peakSpeedMotorSide"></div>');T.append(g),k.unitsComboBox({unitType:"ANGULARVELOCITY",unit:"radianpersecond",roundOfNumber:"2",mode:"spin",min:0,value:n.peakPoints[0],comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){this.value&&(n.peakPoints[0]=this.value,u("PeakSpeed",n.transmissionRaioVal))}}),g.unitsComboBox({unitType:"ANGULARVELOCITY",unit:"radianpersecond",roundOfNumber:"2",mode:"spin",value:n.peakMotorData[0],enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}});var C=e('<div id="sliderContainer" class="row"></div>');i.append(C);var M=e('<div class="col-xs-2 col-2 title"><span id="rmsSpeedTitle" title="RMS Acceleration">RMS Acceleration: </span></div>');C.append(M);var q=e('<div class="col-xs-5 col-5  rmsAccelerationLoadSide"></div>');C.append(q);var P=e('<div class="col-xs-5 col-5  rmsAccelerationMotorSide"></div>');C.append(P),q.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",roundOfNumber:"2",mode:"spin",min:0,value:n.rmsAcceData,comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){this.value&&(n.rmsAcceData=this.value,u("RmsAcceleration",n.transmissionRaioVal))}}),P.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",roundOfNumber:"2",mode:"spin",value:n.rmsAcceMotor,enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}}),n.disableControls&&n.disableControls.rmsSpeedTextBox&&t.find("#rmsSpeedValue").attr("disabled",!0);var w=e('<div id="sliderContainer" class="row"></div>');i.append(w);var A=e('<div class="col-xs-2 col-2 title"><span title="Peak Acceleration">Peak Acceleration: </span></div>');w.append(A);var y=e('<div class="col-xs-5 col-5  peakAccelerationLoadSide"></div>');w.append(y);var V=e('<div class="col-xs-5 col-5  peakAccelerationMotorSide"></div>');if(w.append(V),y.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",roundOfNumber:"2",mode:"spin",value:n.peakAcceData,min:0,comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){this.value&&(n.peakAcceData=this.value,u("PeakAcceleration",n.transmissionRaioVal))}}),V.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",roundOfNumber:"2",mode:"spin",value:n.peakAcceMotor,enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}}),n.showMotorTsCurve){var D=e('<div id="sliderContainer" class="row"></div>');i.append(D)}i.append('<div id="alertMessageContainer" class="alert alert-warning"><strong>Warning:-&nbsp;&nbsp;</strong><span></span></div>')},v=function(a){var o=e('<div class="panel panel-default"></div>');a.append(o);var t=e('<div class="panel-heading" role="tab" id="headingThree"> <h4 class="panel-title"> <a role="button"  data-parent="#accordion'+n.uniqeId+'" data-toggle="collapse"  href="#collapseThree'+n.uniqeId+'" aria-controls="collapseThree" aria-expanded="false"><span> Environmental Factors</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');o.append(t);var i=e('<div id="collapseThree'+n.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree"></div>');o.append(i);var s=e('<div class="panel-body"></div>');i.append(s),o.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),o.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),x(s)},x=function(a){var s=e('<div id="envFactorsPanelContainer"></div>');a.append(s);var r=e('<div id="sliderContainer" class="row"></div>');s.append(r);var l=e('<div class="col-xs-3 col-3 title"><span id="tempTitle">Temperature: </span></div>');r.append(l);var d=e('<div class="col-xs-4 col-4  "><input id="tempSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');r.append(d);var u=n.sliderLimit.maxTemp||i.sliderLimit.maxTemp,c=e('<div class="col-xs-5 col-5   display-flex margin-bottom"> <div class="input-group spinner" data-trigger="spinner" id="tempValueSpinner"><input id="tempValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+u+'" data-min="0" data-step="1"  value="'+n.motorData[n.motorSelectedIndex].temp+'" data-rule="percent"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value">&nbsp;&nbsp;&#176;C</label></div>');r.append(c),c.append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>'),n.defaultPeakStallTorque=n.motorData[n.motorSelectedIndex].peakStallTorque,n.defaultRollOffPoint=n.motorData[n.motorSelectedIndex].rollOffPoint,n.defaultRollOffSpeed=n.motorData[n.motorSelectedIndex].rollOffSpeed,n.defaultPeakTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].peakTorqueAtMaxSpeed,n.defaultContinuousStallTorque=n.motorData[n.motorSelectedIndex].continuousStallTorque,n.defaultContinuosTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed,r.find("#tempSlider").slider({value:n.motorData[n.motorSelectedIndex].temp,min:0,max:u,step:1}).on("change",function(e){t.find("#tempValue").val(e.value.newValue);var a=e.value.newValue-e.value.oldValue;0!==a&&(m("peakPlot",e.value.newValue),m("rmsPlot",e.value.newValue))}),n.disableControls&&n.disableControls.tempSlider&&r.find("#tempSlider").slider("disable"),t.find("#tempValueSpinner").spinner("changed",function(e,a,o){t.find("#tempSlider").slider("setValue",parseInt(a)),m("peakPlot",parseInt(a)),m("rmsPlot",parseInt(a))}),n.disableControls&&n.disableControls.tempTextBox&&t.find("#tempValue").attr("disabled",!0);var m=function(e,a){var t=o.getData(),i=a,s=40,r=155,l=25,d=i+.6*(r-i),u=s+.6*(r-s),c=-.0015,m=1-(i-s)/(r-s),f=(l+234.5)/(u+234.5),v=1+(d-u)*c;switch(e){case"peakPlot":for(var x=t[0].data,h=0;h<x.length;h++)void 0!=n.motorData[n.motorSelectedIndex]&&(0!=h&&12!=h&&6!=h||(x[h][1]=n.defaultPeakStallTorque*v,0==h&&(n.motorData[n.motorSelectedIndex].peakStallTorque=x[h][1]),6==h&&(x[h][1]=-x[h][1])),1!=h&&7!=h||(x[h][1]=n.defaultRollOffPoint*v,x[h][0]=n.defaultRollOffSpeed/v,n.motorData[n.motorSelectedIndex].rollOffPoint=x[h][1],n.motorData[n.motorSelectedIndex].rollOffSpeed=x[h][0],7==h&&(x[h][0]=-x[h][0],x[h][1]=-x[h][1])),2!=h&&8!=h||(x[h][1]=n.defaultPeakTorqueAtMaxSpeed*v,n.motorData[n.motorSelectedIndex].peakTorqueAtMaxSpeed=x[h][1],8==h&&(x[h][1]=-x[h][1])));t[0].data=x;break;case"rmsPlot":for(var S=t[2].data,h=0;h<S.length;h++)void 0!=n.motorData[n.motorSelectedIndex]&&(0!=h&&10!=h&&5!=h||(S[h][1]=n.defaultContinuousStallTorque*(v*Math.sqrt(m/f)),n.motorData[n.motorSelectedIndex].continuousStallTorque=S[h][1],5==h&&(S[h][1]=-S[h][1])),1!=h&&6!=h||(S[h][1]=n.defaultContinuosTorqueAtMaxSpeed*(v*Math.sqrt(m/f)),n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=S[h][1],6==h&&(S[h][1]=-S[h][1])));t[2].data=S}P(t),p()},f=e('<div id="sliderContainer" class="row"></div>');s.append(f);var v=e('<div class="col-xs-3 col-3 title"><span id="altitudeTitle">Altitude: </span></div>');f.append(v);var x=e('<div class="col-xs-4 col-4  "><input id="altitudeSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');f.append(x);var u=n.sliderLimit.maxAltitude||i.sliderLimit.maxAltitude,h=e('<div class="col-xs-5 col-5   display-flex margin-bottom"> <div class="input-group spinner" data-trigger="spinner" id="altitudeSpinner"><input id="altitudeValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+u+'" data-min="0" data-step="1"  value="'+n.motorData[n.motorSelectedIndex].altitude+'" data-rule="currency"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value"></label>&nbsp;&nbsp;m</div>');f.append(h),n.defaultContinuousStallTorque=n.motorData[n.motorSelectedIndex].continuousStallTorque,n.defaultContinuosTorqueAtMaxSpeed=n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed,x.find("#altitudeSlider").slider({value:n.motorData[n.motorSelectedIndex].altitude,min:0,max:1e4,step:1}).on("change",function(e){t.find("#altitudeValue").val(e.value.newValue);var a=o.getData(),i=a[2].data;if(e.value.newValue>1500){var s=[1-(e.value.newValue-1500)/1e4];i[0][1]=i[10][1]=(n.defaultContinuousStallTorque*s).toFixed(3),i[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*s).toFixed(3),a[2].data=i,n.motorData[n.motorSelectedIndex].continuousStallTorque=i[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=i[1][1]}else{var s=1;i[0][1]=i[10][1]=(n.defaultContinuousStallTorque*s).toFixed(3),i[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*s).toFixed(3),a[2].data=i,n.motorData[n.motorSelectedIndex].continuousStallTorque=i[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=i[1][1]}P(a),p()}),n.disableControls&&n.disableControls.altitudeSlider&&x.find("#altitudeSlider").slider("disable"),t.find("#altitudeSpinner").spinner("changed",function(e,a,i){var s=parseInt(a),r=o.getData(),l=r[2].data;if(t.find("#altitudeSlider").slider("setValue",s),s>1500){var d=[1-(s-1500)/1e4];l[0][1]=l[10][1]=(n.defaultContinuousStallTorque*d).toFixed(3),l[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*d).toFixed(3),r[2].data=l,n.motorData[n.motorSelectedIndex].continuousStallTorque=l[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=l[1][1]}else{var d=1;l[0][1]=l[10][1]=(n.defaultContinuousStallTorque*d).toFixed(3),l[1][1]=(n.defaultContinuosTorqueAtMaxSpeed*d).toFixed(3),r[2].data=l,n.motorData[n.motorSelectedIndex].continuousStallTorque=l[0][1],n.motorData[n.motorSelectedIndex].continuosTorqueAtMaxSpeed=l[1][1]}P(r),p()}),n.disableControls&&n.disableControls.transmRatioTextBox&&t.find("#altitudeValue").attr("disabled",!0)},h=function(a){var o=e('<div class="panel panel-default"></div>');a.append(o);var t=e('<div class="panel-heading" role="tab" id="headingFour"> <h4 class="panel-title"> <a role="button"   data-parent="#accordion'+n.uniqeId+'"  data-toggle="collapse"  href="#collapseFour'+n.uniqeId+'" aria-controls="collapseFour" aria-expanded="false"><span> Transmission Ratio</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');o.append(t);var i=e('<div id="collapseFour'+n.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour"></div>');o.append(i);var s=e('<div class="panel-body"></div>');i.append(s),o.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),o.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),S(s)},S=function(a){var o=e('<div id="transmissionRatioPanelContainer"></div>');a.append(o);var s=e('<div id="sliderContainer" class="row"></div>');o.append(s);var r=e('<div class="col-xs-3 col-3 title"><span id="trRatioTitle">Transmission Ratio: </span></div>');
s.append(r);var l=e('<div class="col-xs-4 col-4  " ><input id="trRatioSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');s.append(l);var d=e('<div class="col-xs-5 col-5   display-flex margin-bottom"> <div class="input-group spinner" data-trigger="spinner" id="trRatioSpinner"><input id="trRatioValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+n.sliderLimit.maxTrRatio+'" data-min="1" data-step="1"  value="'+n.transmissionRaioVal+'" data-rule="quantity"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value"></label>&nbsp;: 1</div>');s.append(d),n.defaultRmsTorque=n.rmsMotorData[1],n.defaultRmsSpeed=n.rmsMotorData[0],n.defaultPeakTorque=n.peakMotorData[1],n.defaultPeakSpeed=n.peakMotorData[0],l.find("#trRatioSlider").slider({min:1,value:1,max:n.sliderLimit.maxTrRatio||i.sliderLimit.maxTrRatio,step:1}).on("change",function(e){u("TransmissionRatio",e.value.newValue),t.find("#trRatioValue").val(e.value.newValue)}),n.disableControls&&n.disableControls.transmRatioSlider&&l.find("#trRatioSlider").slider("disable"),t.find("#trRatioSpinner").spinner("changed",function(e,a,o){a!=o&&(u("TransmissionRatio",a),t.find("#trRatioSlider").slider("setValue",a))}),n.disableControls&&n.disableControls.transmRatioTextBox&&t.find("#trRatioValue").attr("disabled",!0)},T=function(a){var o=e('<div class="tsPlotContainer"></div>');a.append(o);var t=e('<div class="tsPlotArea"></div>');o.append(t),b()},b=function(){var e=[],a={colors:[n.graphLineColor.peakTSCurve,n.graphLineColor.peakTSCurve,n.graphLineColor.contionusTSCurve,n.graphLineColor.contionusTSCurve],series:{points:{show:!0}},legend:{backgroundOpacity:0},coordinate:{type:"rectangular"},axisLabels:{show:!0},xaxis:{axisLabel:"Speed (rad/sec)"},yaxis:{axisLabel:"Torque (N-m)"},grid:{hoverable:!0,clickable:!0,borderWidth:1,borderColor:"#D9D9D9",margin:0,markings:[{yaxis:{from:0,to:0},color:"#333"},{xaxis:{from:0,to:0},color:"#333"}]},tooltip:!0,tooltipOpts:{cssClass:"tsCurveFlotTip",content:function(e,a,o,t){var i="";switch(t.seriesIndex){case 0:switch(t.dataIndex){case 0:i="Peak Stall Torque <br />";break;case 1:i="Roll Off Point<br />";break;case 2:i="Peak Torque at Max Speed <br />";break;case 3:i="Max Speed at Zero Torque <br />"}break;case 1:i="Peak T/S Point <br />";break;case 2:switch(t.dataIndex){case 0:i="Continuous Stall Torque <br />";break;case 1:i="Continuous Stall Torque at Max Speed <br />";break;case 2:i="Max Speed Point <br />"}break;case 3:i="RMS T/S Point <br />"}return i+"Speed: "+a+", Torque: "+o},defaultTheme:!1,shifts:{x:0,y:20}}};1==n.quadrant&&(a.xaxis.min=0,a.yaxis.min=0);var t=[],i=[],s=[],r=[],l=[],d=[],u=[],p=[],c=function(){t=[],i=[],s=[],r=[],l=[],d=[],u=[],p=[]},m=function(e){var a=e.maxSpeed;l=[[0,e.peakStallTorque],[e.rollOffSpeed,e.rollOffPoint],[a,e.peakTorqueAtMaxSpeed],[a,0]],u=[[0,e.continuousStallTorque],[a,e.continuosTorqueAtMaxSpeed],[a,0]]},f=function(e){var a=-1*e.maxSpeed;d=[[a,0],[a+1,e.peakStallTorque]],p=[[a,0],[a+1,e.continuousStallTorque]]},v=function(e){t=t.concat(l),i=i.concat(u)},x=function(e){var a=[],o=[];d.length>0&&d.forEach(function(e,o,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],a[o]=i}),t=t.concat(a),p.length>0&&p.forEach(function(e,a,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],o[a]=i}),i=i.concat(o)},h=function(e){var a=[],o=[];l.length>0&&l.forEach(function(e,o,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],a[o]=i}),t=t.concat(a),u.length>0&&u.forEach(function(e,a,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],o[a]=i}),i=i.concat(o)},S=function(e){t=t.concat(d),i=i.concat(p)},T=function(e){t.push([0,e.peakStallTorque]),i.push([0,e.continuousStallTorque])},b=function(e){var a=e.temp,o=40,t=155,i=25,n=a+.6*(t-a),s=o+.6*(t-o),r=-.0015,l=1-(a-o)/(t-o),d=(i+234.5)/(s+234.5),u=1+(n-s)*r;return e.peakStallTorque=(e.peakStallTorque*u).toFixed(2),e.rollOffPoint=(e.rollOffPoint*u).toFixed(2),e.rollOffSpeed=(e.rollOffSpeed/u).toFixed(2),e.continuousStallTorque=(e.continuousStallTorque*(u*Math.sqrt(l/d))).toFixed(2),e.continuosTorqueAtMaxSpeed=(e.continuosTorqueAtMaxSpeed*(u*Math.sqrt(l/d))).toFixed(2),e},k=function(e){v(e),x(e),h(e),S(e),T(e)},g=function(e){if(c(),"0"==n.firstTimeCall){var a=b(e);m(a),f(a),k(a)}else m(e),f(e),k(e)};n.showMotorTsCurve&&g(n.motorData[n.motorSelectedIndex]),n.showApplicationPoints&&(s.push(n.peakMotorData),r.push(n.rmsMotorData)),e.push({data:t,label:"Peak T-S Curve",lines:{lineWidth:2,show:!0}},{data:s,label:"",points:{show:!0,fillColor:n.graphLineColor.peakTSCurve,radius:4}},{data:i,label:"Continous T-S Curve",lines:{lineWidth:2,show:!0}},{data:r,label:"",points:{show:!0,fillColor:n.graphLineColor.contionusTSCurve,radius:4}}),o?P(e,a):M(e,a)},k=function(e){function a(e,a,o,t){var n=!1,s=(a[1]-e[1])/(a[0]-e[0]),r=e[1]-s*e[0],l=-1,d=s*o[0]-o[1]+r;if(n=0==d||d>0&&0>l||0>d&&l>0,t){var u=o[0]*o[1],f=o[0]*(s*o[0]+r),v=100*u/f;m.push(v)}else{var x=100*o[1]/(s*o[0]+r),h=100*o[0]/i.maxSpeed;p.push(x),c.push(h)}return n}function o(e){var a=100*e[1]/i.peakStallTorque,o=100*e[0]/i.maxSpeed;p.push(a),c.push(o)}function t(e){var a=e[0]*e[1],o=e[0]*i.continuousStallTorque,t=100*a/o;m.push(t)}var i=e,s=n.peakMotorData,r=n.rmsMotorData,l={PeakStallPoint:{x:0,y:i.peakStallTorque},RollOffPoint:{x:i.rollOffSpeed,y:i.rollOffPoint},PeakTarqueAtMaxSpeedPoint:{x:i.maxSpeed,y:i.peakTorqueAtMaxSpeed},ContinuousStallTorquePoint:{x:0,y:i.continuousStallTorque},ContinuousStallTorqueMaxSpeedPoint:{x:i.maxSpeed,y:i.continuosTorqueAtMaxSpeed}},d=0,u=null,p=[],c=[],m=[],f=null,v=null,x=null,h={status:u,torqueUtilization:f,speedUtilization:v,avgPower:x},S=r[0],T=r[1],b=s[0],k=s[1],g=!1,C=!1,M=null,q=null,P=null;return S<=i.maxSpeed?(M=[l.ContinuousStallTorquePoint.x,l.ContinuousStallTorquePoint.y],q=[l.ContinuousStallTorqueMaxSpeedPoint.x,l.ContinuousStallTorqueMaxSpeedPoint.y],P=[S,T],C=a(M,q,P,!0)):(d=-1,t([S,T])),k<=i.peakStallTorque&&b<=i.maxSpeed?b<=l.RollOffPoint.x?(M=[l.PeakStallPoint.x,l.PeakStallPoint.y],q=[l.RollOffPoint.x,l.RollOffPoint.y],P=[b,k],g=a(M,q,P,!1)):(M=[l.RollOffPoint.x,l.RollOffPoint.y],q=[l.PeakTarqueAtMaxSpeedPoint.x,l.PeakTarqueAtMaxSpeedPoint.y],P=[b,k],g=a(M,q,P,!1)):(d=-1,o([b,k])),-1!=d&&0!=g&&0!=C||(d=-1),-1==d?h.status=!1:0==d&&(h.status=!0),h.torqueUtilization=Math.max.apply(Math,p),h.speedUtilization=Math.max.apply(Math,c),h.avgPower=Math.max.apply(Math,m),h},g=function(){var e=o.getAxes();if(n.showMotorTsCurve){var a=Math.max(n.peakMotorData[1]+1,n.rmsMotorData[1]+1,35);e.yaxis.datamax<a?o.getOptions().yaxes[0].max=a:o.getOptions().yaxes[0].max=e.yaxis.datamax+30}if(!n.showMotorTsCurve){var t=Math.max(n.peakMotorData[0]+50,n.rmsMotorData[0]+50,200),a=Math.max(n.peakMotorData[1]+10,n.rmsMotorData[1]+10,150);o.getOptions().yaxes[0].max=a,o.getOptions().xaxes[0].max=t,4===n.quadrant&&(o.getOptions().yaxes[0].min=-1*a,o.getOptions().xaxes[0].min=-1*t)}},C=function(){4==n.quadrant?(o.getOptions().grid.markings[0].color="#bdbdbd",o.getOptions().grid.markings[1].color="#bdbdbd"):(o.getOptions().grid.markings[0].color="#333",o.getOptions().grid.markings[1].color="#333"),g(),o.setupGrid(),o.draw()},M=function(a,i){setTimeout(function(){o=e.plot(t.find(".tsPlotArea"),a,i),C(),q()},0)},q=function(){t.find(".tsCruveContainer").resize(function(a){var o=e(this);console.log("ele.width(): ",o.width()),o.width()<=785?(o.find("#servoMotorArea").addClass("resizeWidth"),o.find("#servoMotorTSCurve").addClass("resizeWidth"),o.find(".tsPlotArea").css("min-height",o.find(".tsPlotArea").width()),o.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%")):o.width()>785&&o.width()<1280?(o.find("#servoMotorArea").removeClass("resizeWidth"),o.find("#servoMotorTSCurve").removeClass("resizeWidth"),o.find(".tsPlotArea").css("min-height",o.find(".tsPlotArea").width()),o.find("#servoMotorArea").find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").css("width","54%"),o.find("#servoMotorArea").find(".response-status").attr("title",t.find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").text())):(o.find("#servoMotorArea").removeClass("resizeWidth"),o.find("#servoMotorTSCurve").removeClass("resizeWidth"),o.find(".tsPlotArea").css("min-height",o.find(".tsPlotArea").width()),o.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%"))})},P=function(e,a){a&&(void 0!=a.xaxis.min&&void 0!=a.yaxis.min?(o.getOptions().yaxes[0].min=a.yaxis.min,o.getOptions().xaxes[0].min=a.xaxis.min):(o.getOptions().yaxes[0].min=null,o.getOptions().xaxes[0].min=null)),o.setData(e),C(),w()},w=function(){n.assessmentMode&&n.assessmentCallback&&n.assessmentCallback({peakTorque:{value:t.find("#peakTorqueValue").val(),unit:"Nm"},peakSpeed:{value:t.find("#peakSpeedValue").val(),unit:"rad/sec"},rmsTorque:{value:t.find("#rmsTorqueValue").val(),unit:"Nm"},rmsSpeed:{value:t.find("#rmsSpeedValue").val(),unit:"rad/sec"},temperature:{value:t.find("#tempValue").val(),unit:"C"},altitude:{value:t.find("#altitudeValue").val(),unit:"m"},transmissionRatio:{value:t.find("#trRatioValue").val(),unit:""},motorSelectedIndex:{value:n.motorSelectedIndex,unit:""}})},A=function(e){e.peakTorque&&(t.find("#peakTorqueSlider").slider("setValue",e.peakTorque.value),t.find("#peakTorqueValue").val(e.peakTorque.value),m("PeakTorque")),e.peakSpeed&&(t.find("#peakSpeedSlider").slider("setValue",e.peakSpeed.value),t.find("#peakSpeedValue").val(e.peakSpeed.value),m("PeakSpeed")),e.rmsTorque&&(t.find("#rmsTorqueSlider").slider("setValue",e.rmsTorque.value),t.find("#rmsTorqueValue").val(e.rmsTorque.value),m("RmsTorque")),e.rmsSpeed&&(t.find("#rmsSpeedSlider").slider("setValue",e.rmsSpeed.value),t.find("#rmsSpeedValue").val(e.rmsSpeed.value),m("RmsSpeed")),e.temperature&&(t.find("#tempSlider").slider("setValue",e.temperature.value),t.find("#tempValue").val(e.temperature.value),m("Temperature")),e.altitude&&(t.find("#altitudeSlider").slider("setValue",e.altitude.value),t.find("#altitudeValue").val(e.altitude.value),m("Altitude")),e.transmissionRatio&&(t.find("#trRatioSlider").slider("setValue",e.transmissionRatio.value),t.find("#trRatioValue").val(e.transmissionRatio.value),m("TransmissionRatio")),e.motorSelectedIndex&&(t.find("#solutionSliderId").slider("setValue",parseInt(n.motorSelectedIndex)),t.find("#PaginationDiv").Folio({activePage:n.motorSelectedIndex}))},y=function(e){var a;if(e.peakTorque&&(a=e.peakTorque.status?"correct":"incorrect",t.find("#peakTorqueValue").addClass(a)),e.peakSpeed&&(a=e.peakSpeed.status?"correct":"incorrect",t.find("#peakSpeedValue").addClass(a)),e.rmsTorque&&(a=e.rmsTorque.status?"correct":"incorrect",t.find("#rmsTorqueValue").addClass(a)),e.rmsSpeed&&(a=e.rmsSpeed.status?"correct":"incorrect",t.find("#rmsSpeedValue").addClass(a)),e.temperature){a=e.temperature.status?"correct":"incorrect",t.find("#tempValue").addClass(a),a=e.temperature.status?"fa-check correct":"fa-times incorrect",t.find("#envFactorsPanelContainer").find(".response-status").css("display","block"),t.find("#envFactorsPanelContainer").find(".response-status").find("span.fa").addClass(a);var o=e.temperature.status?"":"("+e.temperature.correctAnswer+"&#176;C)";t.find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").append(o),t.find("#envFactorsPanelContainer").find("#tempSlider").slider("disable"),t.find("#envFactorsPanelContainer").find("#tempValue").attr("disabled",!0)}if(e.altitude&&(a=e.altitude.status?"correct":"incorrect",t.find("#altitudeValue").addClass(a)),e.transmissionRatio&&(a=e.transmissionRatio.status?"correct":"incorrect",t.find("#trRatioValue").addClass(a)),e.motorSelectedIndex){a=e.motorSelectedIndex.status?"fa-check correct":"fa-times incorrect",t.find(".solutionInfoTitle").find(".response-status").css("display","inline-block"),t.find(".solutionInfoTitle").find(".response-status").find("span.fa").addClass(a);var o=e.motorSelectedIndex.status?"":"(# "+e.motorSelectedIndex.correctAnswer+")";t.find(".solutionInfoTitle").find(".response-status").find(".correct-answer").append(o)}};return s(),{ref:this,updateInputs:A,markAnswers:y}}}(jQuery);