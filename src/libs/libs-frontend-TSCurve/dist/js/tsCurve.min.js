"use strict";function _defineProperty(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}!function(e){e.fn.TSCurve=function(o){function a(e){var e=e-1;if(t.find("#driveNameId").text(n.format(r.motorData[e].maxSpeed)),t.find("#motorNameId").text("("+r.motorData[e].motorPartNo+")"),t.find("#voltageInfoId").text(n.format(r.motorData[e].motorInertia)),t.find("#peakStallTorque").text(n.format(r.motorData[e].peakStallTorque)),t.find("#continuousStallTorque").text(n.format(r.motorData[e].continuousStallTorque)),t.find("#solutionTitle").text("#"+(e+1)),t.find("#motorName").text("("+r.motorData[e].motorPartNo+")"),r.motorSelectedIndex=e,r.motorInertia=r.motorData[e].motorInertia,t.find("#tempSlider").slider("setValue",r.motorData[r.motorSelectedIndex].temp),t.find(".amount_TEMPERATURE").val(r.motorData[r.motorSelectedIndex].temp),t.find("#altitudeSlider").slider("setValue",r.motorData[r.motorSelectedIndex].altitude),t.find(".amount_ALTITUDE").val(r.motorData[r.motorSelectedIndex].altitude),r.defaultPeakStallTorque=r.motorData[r.motorSelectedIndex].peakStallTorque,r.defaultRollOffPoint=r.motorData[r.motorSelectedIndex].rollOffPoint,r.defaultRollOffSpeed=r.motorData[r.motorSelectedIndex].rollOffSpeed,r.defaultPeakTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].peakTorqueAtMaxSpeed,r.defaultContinuousStallTorque=r.motorData[r.motorSelectedIndex].continuousStallTorque,r.defaultContinuosTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed,r.motorSelectedIndex=e,r.peakMotorData=[],r.rmsMotorData=[],r.peakAcceMotor=r.peakAcceData*r.transmissionRaioVal,r.selectIndex==r.motorSelectedIndex){var o=60/6.28*r.peakPoints[0];r.peakMotorData[0]=o*r.transmissionRaioVal}else r.selectIndex=r.motorSelectedIndex,r.peakMotorData[0]=r.peakPoints[0]*r.transmissionRaioVal;r.peakMotorData[1]=parseFloat(r.peakPoints[1])/r.transmissionRaioVal+r.peakAcceMotor*r.motorInertia,r.rmsAcceMotor=r.rmsAcceData*r.transmissionRaioVal,r.rmsMotorData[0]=r.peakMotorData[0],r.rmsMotorData[1]=parseFloat(r.rmsPoints[1])/r.transmissionRaioVal+r.rmsAcceMotor*r.motorInertia,t.find(".cosmatt-unitComboBox").length>0&&(t.find(".peakTorqueMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[1]),t.find(".rmsTorqueMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsMotorData[1]),t.find(".peakSpeedMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[0]),t.find(".rmsAccelerationMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsAcceMotor),t.find(".peakAccelerationMotorSide").find(".cosmatt-unitLabelControl").length>0&&t.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.peakAcceMotor)),v(),q()}var t=e(this),i={showApplicationPoints:!1,motorSelectedIndex:3,rmsPoints:[1200,5.9],peakPoints:[1200,9.4],peakAcceData:1478,rmsAcceData:1097,quadrant:1,transmissionRaioVal:1,sliderLimit:{peakMaxSpeed:800,peakMaxTorque:100,rmsMaxSpeed:800,rmsMaxTorque:100,maxTemp:125,maxAltitude:1e4,maxVoltage:10,maxTrRatio:100},showQuadrantToggle:!0,showMotorTsCurve:!0,showMotorSelForm:!0,showAppPointsForm:!0,showEnviorForm:!0,showTransmissionForm:!0,uniqeId:"1",xaxisMaxVale:12e4,firstTimeCall:"0",graphLineColor:{peakTSCurve:"#FF0808",contionusTSCurve:"#9ADC54"},motorData:[{motorPartNo:"CPB-1-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:1,peakStallTorque:2.7,rollOffPoint:2.7,peakTorqueAtMaxSpeed:1.8,continuosTorqueAtMaxSpeed:.72,rollOffSpeed:3200,maxSpeed:4500,temp:40,altitude:1,motorInertia:1e-5},{motorPartNo:"CPB-1-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:1.7,peakStallTorque:4.4,rollOffPoint:4.4,peakTorqueAtMaxSpeed:2.4,continuosTorqueAtMaxSpeed:1.302,rollOffSpeed:3300,maxSpeed:5e3,temp:40,altitude:1,motorInertia:15e-6},{motorPartNo:"CPB-1-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:2.3,peakStallTorque:7.5,rollOffPoint:7.5,peakTorqueAtMaxSpeed:4.2,continuosTorqueAtMaxSpeed:1.71,rollOffSpeed:3100,maxSpeed:4500,temp:40,altitude:1,motorInertia:25e-6},{motorPartNo:"CPB-2-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:2,peakStallTorque:3.8,rollOffPoint:3.8,peakTorqueAtMaxSpeed:2,continuosTorqueAtMaxSpeed:1.7,rollOffSpeed:4e3,maxSpeed:6e3,temp:40,altitude:1,motorInertia:65e-6},{motorPartNo:"CPB-2-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:3.4,peakStallTorque:7.8,rollOffPoint:7.8,peakTorqueAtMaxSpeed:4,continuosTorqueAtMaxSpeed:3.09,rollOffSpeed:4400,maxSpeed:6e3,temp:40,altitude:1,motorInertia:8e-5},{motorPartNo:"CPB-2-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:4.2,peakStallTorque:11,rollOffPoint:11,peakTorqueAtMaxSpeed:6,continuosTorqueAtMaxSpeed:2.9,rollOffSpeed:3100,maxSpeed:5e3,temp:40,altitude:1,motorInertia:12e-5},{motorPartNo:"CPB-3-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:9,peakStallTorque:21,rollOffPoint:21,peakTorqueAtMaxSpeed:13,continuosTorqueAtMaxSpeed:6.3,rollOffSpeed:3200,maxSpeed:4e3,temp:40,altitude:1,motorInertia:4e-4},{motorPartNo:"CPB-3-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:10,peakStallTorque:29,rollOffPoint:29,peakTorqueAtMaxSpeed:16,continuosTorqueAtMaxSpeed:6.91,rollOffSpeed:2500,maxSpeed:3500,temp:40,altitude:1,motorInertia:6e-4},{motorPartNo:"CPB-4-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:20,peakStallTorque:50,rollOffPoint:50,peakTorqueAtMaxSpeed:25,continuosTorqueAtMaxSpeed:15.3,rollOffSpeed:1800,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0015},{motorPartNo:"CPB-4-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:25,peakStallTorque:68,rollOffPoint:68,peakTorqueAtMaxSpeed:30,continuosTorqueAtMaxSpeed:17.53,rollOffSpeed:1900,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0022},{motorPartNo:"CPB-4-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:32,peakStallTorque:75,rollOffPoint:75,peakTorqueAtMaxSpeed:32,continuosTorqueAtMaxSpeed:22.8,rollOffSpeed:2100,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0029}],numberFormatterOptions:{significantDigits:3,maxPositiveExponent:6,minNegativeExponent:-4},notifyIOData:function(){}},r=e.extend({},i,o),n=new Cosmatt.NumberFormatter(r.numberFormatterOptions);r.selectIndex=r.motorSelectedIndex-1;var s,l=function(e,o){return""===e.toString().trim()?e:n.format(e)},d=function(){var o=e('<div class="tsCruveContainer row m-0"></div>');t.append(o),u(o)},u=function(o){var a=e('<div id="servoMotorTSCurve"></div>');if(o.append(a),r.showMotorSelForm||r.showAppPointsForm||r.showEnviorForm||r.showTransmissionForm){a.addClass("col-xs-6 col-6");var i=e('<div class="col-xs-6 col-6" id="servoMotorArea"></div>');o.append(i),p(i)}else a.addClass("col-xs-12 col-12"),t.find(".tsCruveContainer").addClass("widthMaxLimit");b(a)},p=function(o){var a=e('<div id="motorAreaAccordionContainer"></div>');o.append(a);var t=e('<div class="panel-group" id="accordion'+r.uniqeId+'" role="tablist" aria-multiselectable="true"></div>');a.append(t),r.showMotorTsCurve||(r.showMotorSelForm=!1),r.showMotorSelForm&&c(t),r.showApplicationPoints||(r.showAppPointsForm=!1),r.showAppPointsForm&&x(t),r.showEnviorForm&&h(t),r.showTransmissionForm&&C(t),v()},c=function(o){var t=e('<div class="panelNew panel-defaultNew"></div>');o.append(t);var i=e('<div class="panel-heading panelHeadingNew" role="tab" id="headingOne"> <div id="PaginationDiv" class="Pagination"></div><span class="accordion-plus-minus  pull-right" aria-hidden="true" style="color: grey;"></span> </div>');t.append(i);var n=e('<div id="collapseOne" class="panel-collapse collapse motorDataOpenPanle" role="tabpanel" aria-labelledby="headingOne"></div>');t.append(n);var s=e('<div class="panel-body"></div>');n.append(s),t.on("show.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),t.on("hide.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")});var s=t.find("#collapseOne .panel-body"),l=e('<div id="motorDataContainer" class="row"></div>');s.append(l);var d=e('<div class="col-xs-12 col-12 solutionInfoTitle">Selected Motor: <div id="solutionTitle"></div>&nbsp;<div id="motorName"></div> <div class="statusContainer"><div class="solutionStatus motorPass" id="statusValueContainer">Pass</div></div></div>');l.append(d);var u=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');l.append(u);var p=e('<div class="col-xs-6 col-6 padding-right-zero"><span class="maxSpeedTitle">Maximum Speed:&nbsp;</span><span class="maxSpeedValue" id="driveNameId">'+r.motorData[r.motorSelectedIndex].maxSpeed+'</span><span class="unitStyle">&nbsp;rpm</span></div>');u.append(p);var c=e('<div class="col-xs-6 col-6 padding-left-right-zero"><span class="inertiaTitle">Inertia:&nbsp;</span><span class="inertiaValue" id="voltageInfoId">'+r.motorData[r.motorSelectedIndex].motorInertia+'</span><div class="display-inline unitStyle">&nbsp;kg-m<sup>2</sup></div></div>');u.append(c);var m=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');l.append(m);var f=e('<div class="col-xs-6 col-6 padding-right-zero"><span class="pkStallTorqueTitle">Peak Stall Torque:&nbsp;</span><span class="peakStaTorqueVal" id="peakStallTorque">'+r.motorData[r.motorSelectedIndex].peakStallTorque+'</span><span class="unitStyle">&nbsp;N-m</span></div>');m.append(f);var v=e('<div class="col-xs-6 col-6 padding-left-right-zero"><div class="contStallTorqueTitle">Continuous Stall Torque:&nbsp;</div><div class="continuousStaTorqueVal" id="continuousStallTorque">'+r.motorData[r.motorSelectedIndex].continuousStallTorque+'</div><div class="unitStyle">&nbsp;N-m</div></div>');m.append(v),i.find("#PaginationDiv").Folio({totalPages:r.motorData.length,maxPages:9,activePage:r.motorSelectedIndex,previousClass:"fa fa-chevron-left",nextClass:"fa fa-chevron-right",onUpdate:function(e){r.firstTimeCall=e,a(e)}})},m=function(){var e=t.find(".tsCruveContainer");e.width()<=940?(e.find("#servoMotorArea").addClass("resizeWidth"),e.find("#servoMotorTSCurve").addClass("resizeWidth")):(e.find("#servoMotorArea").removeClass("resizeWidth"),e.find("#servoMotorTSCurve").removeClass("resizeWidth"))},f=function(e,o){var a=s.getData();switch(r.transmissionRaioVal=parseFloat(o),e){case"PeakTorque":r.peakMotorData[1]=parseFloat(r.peakPoints[1])/r.transmissionRaioVal+r.peakAcceMotor*r.motorInertia,a[1].data[0][1]=r.peakMotorData[1],t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[1]);break;case"RmsTorque":r.rmsMotorData[1]=parseFloat(r.rmsPoints[1])/r.transmissionRaioVal+r.rmsAcceMotor*r.motorInertia,a[3].data[0][1]=r.rmsMotorData[1],t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsMotorData[1]);break;case"PeakSpeed":r.rmsMotorData[0]=r.peakMotorData[0]=r.peakPoints[0]*r.transmissionRaioVal,a[1].data[0][0]=a[3].data[0][0]=r.rmsMotorData[0],t.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[0]);break;case"RmsAcceleration":r.rmsAcceMotor=r.rmsAcceData*r.transmissionRaioVal,r.rmsMotorData[1]=parseFloat(r.rmsPoints[1])/r.transmissionRaioVal+r.rmsAcceMotor*r.motorInertia,a[3].data[0][1]=r.rmsMotorData[1],t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsMotorData[1]),t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsAcceMotor);break;case"PeakAcceleration":r.peakAcceMotor=r.peakAcceData*r.transmissionRaioVal,r.peakMotorData[1]=parseFloat(r.peakPoints[1])/r.transmissionRaioVal+r.peakAcceMotor*r.motorInertia,a[1].data[0][1]=r.peakMotorData[1],t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[1]),t.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.peakAcceMotor);break;case"TransmissionRatio":r.peakAcceMotor=r.peakAcceData*r.transmissionRaioVal,r.rmsAcceMotor=r.rmsAcceData*r.transmissionRaioVal,a[1].data[0][0]=a[3].data[0][0]=r.rmsMotorData[0]=r.peakMotorData[0]=r.peakPoints[0]*r.transmissionRaioVal,a[1].data[0][1]=r.peakMotorData[1]=r.peakPoints[1]/r.transmissionRaioVal+r.peakAcceMotor*r.motorInertia,a[3].data[0][1]=r.rmsMotorData[1]=r.rmsPoints[1]/r.transmissionRaioVal+r.rmsAcceMotor*r.motorInertia,t.find(".cosmatt-unitComboBox").length>0&&(t.find(".peakTorqueMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[1]),t.find(".rmsTorqueMotorSide").find(".cosmatt-unitComboBox")&&t.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsMotorData[1]),t.find(".peakSpeedMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[0]),t.find(".rmsAccelerationMotorSide").find(".cosmatt-unitComboBox")&&t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsAcceMotor),t.find(".peakAccelerationMotorSide").find(".cosmatt-unitComboBox")&&t.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.peakAcceMotor))}B(a),v()},v=function(){var e=P(r.motorData[r.motorSelectedIndex]).status;if(r.motorStatus=e,r.showMotorSelForm){var o=t.find("#statusValueContainer");o.removeClass("motorPass"),o.removeClass("motorFail"),o.addClass(e?"motorPass":"motorFail"),o.text(e?"Pass":"Fail")}if(r.showAppPointsForm){var a=t.find("#servoMotorArea #tsPointsPanelContainer #statusValueContainer");a.find(".motorStatusIcon").removeClass("glyphicon-remove").removeClass("glyphicon-ok").addClass(e?"glyphicon-ok":"glyphicon-remove"),a.find("#statusValueLabel").text(e?"Motor Pass":"Motor Fail")}},x=function(o){var a=e('<div class="panel panel-default"></div>');o.append(a);var t=e('<div class="panel-heading" role="tab" id="headingTwo"> <h4 class="panel-title"> <a role="button"  data-toggle="collapse"  href="#collapseTwo'+r.uniqeId+'" aria-controls="collapseTwo" aria-expanded="true"><span>Application Torque Speed Requirements </span><span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');a.append(t);var i=e('<div id="collapseTwo'+r.uniqeId+'" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingTwo"></div>');a.append(i),a.on("show.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),a.on("hide.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),r.showMotorSelForm||i.addClass("in"),T(i)},S=function(o){var a=s.getData();switch(o){case"PeakSpeed":a[1].data[0][0]=r.peakPoints[0]=t.find("#peakSpeedSlider").slider("getValue"),r.defaultPeakSpeed=t.find("#peakSpeedSlider").slider("getValue"),t.find("#peakSpeedValue").val(e("#peakSpeedSlider").slider("getValue"));break;case"PeakTorque":a[1].data[0][1]=r.peakPoints[1]=t.find("#peakTorqueSlider").slider("getValue"),r.defaultPeakTorque=t.find("#peakTorqueSlider").slider("getValue"),t.find("#peakTorqueValue").val(e("#peakTorqueSlider").slider("getValue"));break;case"RmsSpeed":a[3].data[0][0]=r.rmsPoints[0]=t.find("#rmsSpeedSlider").slider("getValue"),r.defaultRmsSpeed=t.find("#rmsSpeedSlider").slider("getValue"),t.find("#rmsSpeedValue").val(e("#rmsSpeedSlider").slider("getValue"));break;case"RmsTorque":a[3].data[0][1]=r.rmsPoints[1]=t.find("#rmsTorqueSlider").slider("getValue"),r.defaultRmsTorque=t.find("#rmsTorqueSlider").slider("getValue"),t.find("#rmsTorqueValue").val(e("#rmsTorqueSlider").slider("getValue"));break;case"TransmissionRatio":var i=t.find("#trRatioSlider").slider("getValue"),a=s.getData();a[1].data[0][0]=r.peakPoints[0]=(r.defaultPeakSpeed*i).toFixed(2),a[1].data[0][1]=r.peakPoints[1]=(r.defaultPeakTorque/i).toFixed(2),a[3].data[0][0]=r.rmsPoints[0]=(r.defaultRmsSpeed*i).toFixed(2),a[3].data[0][1]=r.rmsPoints[1]=(r.defaultRmsTorque/i).toFixed(2),a[1].data[0][0]>r.sliderLimit.peakMaxSpeed?t.find("#peakSpeedSlider").slider("setAttribute","max",parseInt(a[1].data[0][0])):t.find("#peakSpeedSlider").slider("setAttribute","max",r.sliderLimit.peakMaxSpeed),a[3].data[0][0]>r.sliderLimit.rmsMaxSpeed?t.find("#rmsSpeedSlider").slider("setAttribute","max",parseInt(a[3].data[0][0])):t.find("#rmsSpeedSlider").slider("setAttribute","max",r.sliderLimit.rmsMaxSpeed),t.find("#peakSpeedSlider").slider("setValue",a[1].data[0][0]),t.find("#peakTorqueSlider").slider("setValue",a[1].data[0][1]),t.find("#rmsSpeedSlider").slider("setValue",a[3].data[0][0]),t.find("#rmsTorqueSlider").slider("setValue",a[3].data[0][1]),t.find("#trRatioValue").val(i),t.find("#peakSpeedValue").val(a[1].data[0][0]),t.find("#peakTorqueValue").val(a[1].data[0][1]),t.find("#rmsSpeedValue").val(a[3].data[0][0]),t.find("#rmsTorqueValue").val(a[3].data[0][1])}B(a),v()},T=function(o){var a=e('<div class="panel-body"></div>');o.append(a);var i=e('<div id="tsPointsPanelContainer"></div>');a.append(i);var n=e('<div class="row vertical-divider" id="sliderContainer"></div>');i.append(n);var s=e('<div class="col-xs-3 col-3 title"></div>');n.append(s);var l=e('<div class="col-xs-5 col-5"><div class="titleTextLoad ">Load Side</div><div class="loadSideImg"></div></div>');n.append(l);var d=e('<div class="col-xs-4 col-4 padding-right-zero"><div class="titleTextMotor">Motor Side</div><div class="motorSideImg"></div></div>');n.append(d);var u=e('<div id="sliderContainer" class="row greyClass vertical-divider"></div>');i.append(u);var p=e('<div class="col-xs-3 col-3 title">Peak Torque:</div>');u.append(p);var c=e('<div class="col-xs-5 col-5  peakTorqueDataSide"></div>');u.append(c);var m=e('<div class="col-xs-4 col-4  peakTorqueMotorSide"> </div>');u.append(m);var v="true",x="true";r.disableControls&&r.disableControls.peakTorqueTextBox&&(v="false",x="false"),c.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",step:".1",dataRule:"currency",min:0,enable:{textbox:v,comboBox:x},value:r.peakPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if("dropdown"==this.type&&t.find(".peakTorqueMotorSide").data("unitsComboBox").setDropBoxItem(this.unit),void 0!=this.type&&"dropdown"!=this.type){if(this.value<r.rmsPoints[1])return t.find(".peakTorqueDataSide").data("unitsComboBox").setTextBoxValue(r.peakPoints[1]),z("Peak Torque can not be less than RMS Torque."),!1;z(""),r.peakPoints[1]=this.SIValue,f("PeakTorque",r.transmissionRaioVal)}}}),c.setSIValue(r.peakPoints[1]),m.unitsLabelControl({unitType:"TORQUE",unit:"newtonmeter",value:r.peakMotorData[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"}}),m.setSIValue(r.peakMotorData[1]);var S=e('<div id="sliderContainer" class="row vertical-divider"></div>');i.append(S);var T=e('<div class="col-xs-3 col-3 title"><span id="rmsTorqueTitle" title="RMS Torque">RMS Torque: </sapn></div>');S.append(T);var h=e('<div class="col-xs-5 col-5  rmsTorqueLoadSide"></div>');S.append(h);var k=e('<div class="col-xs-4 col-4  rmsTorqueMotorSide"> </div>');S.append(k);var C="true",M="true";r.disableControls&&r.disableControls.rmsTorqueTextBox&&(C="false",M="false"),h.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",step:".1",dataRule:"currency",enable:{textbox:C,comboBox:M},min:0,value:r.rmsPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>r.peakPoints[1])return t.find(".rmsTorqueLoadSide").data("unitsComboBox").setTextBoxValue(r.rmsPoints[1]),z("RMS Torque can not be greater than Peak Torque."),!1;z(""),r.rmsPoints[1]=this.SIValue,f("RmsTorque",r.transmissionRaioVal)}"dropdown"==this.type&&t.find(".rmsTorqueMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),h.setSIValue(r.rmsPoints[1]),k.unitsLabelControl({unitType:"TORQUE",unit:"newtonmeter",value:r.rmsMotorData[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"}}),k.setSIValue(r.rmsMotorData[1]);var b=e('<div id="sliderContainer" class="row greyClass vertical-divider"></div>');i.append(b);var q=e('<div class="col-xs-3 col-3 title"><span id="peakSpeedTitle" title="Peak Speed">Peak Speed: </sapn></div>');b.append(q);var P=e('<div class="col-xs-5 col-5  peakSpeedLoadSide"></div>');b.append(P);var A=e('<div class="col-xs-4 col-4  peakSpeedMotorSide"></div>');b.append(A);var g="true",I="true";r.disableControls&&r.disableControls.peakSpeedTextBox&&(g="false",I="false"),P.unitsComboBox({unitType:"ANGULARVELOCITY",unit:"revolutionsperminute",mode:"spin",step:"1",dataRule:"currency",min:0,enable:{textbox:g,comboBox:I},value:r.peakPoints[0],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type&&(this.unit="revolutionsperminute")){var e=60/6.28*this.SIValue;r.peakPoints[0]=e,f("PeakSpeed",r.transmissionRaioVal)}"dropdown"==this.type&&t.find(".peakSpeedMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),P.setSIValue(r.peakPoints[0]),A.unitsLabelControl({unitType:"ANGULARVELOCITY",unit:"revolutionsperminute",value:r.peakMotorData[0],comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){}}),A.setSIValue(r.peakPoints[0]);var D=e('<div id="sliderContainer" class="row vertical-divider"></div>');i.append(D);var B=e('<div class="col-xs-3 col-3 title"><div title="Peak Acceleration" class="peakAccele">Peak Acceleration: </div></div>');D.append(B);var V=e('<div class="col-xs-5 col-5  peakAccelerationLoadSide"></div>');D.append(V);var R=e('<div class="col-xs-4 col-4  peakAccelerationMotorSide"></div>');D.append(R);var w="true",y="true";r.disableControls&&r.disableControls.peakAcceleration&&(w="false",y="false"),V.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",mode:"spin",step:"1",dataRule:"currency",enable:{textbox:w,comboBox:y},value:r.peakAcceData,min:0,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value<r.rmsAcceData)return t.find(".peakAccelerationLoadSide").data("unitsComboBox").setTextBoxValue(r.peakAcceData),z("Peak Acceleration can not be less than RMS Acceleration."),!1;z(""),r.peakAcceData=this.SIValue,f("PeakAcceleration",r.transmissionRaioVal)}"dropdown"==this.type&&t.find(".peakAccelerationMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),V.setSIValue(r.peakAcceData),R.unitsLabelControl({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",value:r.peakAcceMotor,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){}}),R.setSIValue(r.peakAcceMotor);var O=e('<div id="sliderContainer" class="row greyClass vertical-divider"></div>');i.append(O);var F=e('<div class="col-xs-3 col-3 title"><div id="rmsSpeedTitle" title="RMS Acceleration" class="rmsAccele">RMS Acceleration: </div></div>');O.append(F);var L=e('<div class="col-xs-5 col-5  rmsAccelerationLoadSide"></div>');O.append(L);var E=e('<div class="col-xs-4 col-4  rmsAccelerationMotorSide"></div>');O.append(E);var N="true",W="true";if(r.disableControls&&r.disableControls.rmsAcceleration&&(N="false",W="false"),L.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",mode:"spin",step:"1",dataRule:"currency",enable:{textbox:N,comboBox:W},min:0,value:r.rmsAcceData,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>r.peakAcceData)return t.find(".rmsAccelerationLoadSide").data("unitsComboBox").setTextBoxValue(r.rmsAcceData),z("RMS Acceleration can not be greater than Peak Acceleration."),!1;z(""),r.rmsAcceData=this.SIValue,f("RmsAcceleration",r.transmissionRaioVal)}"dropdown"==this.type&&t.find(".rmsAccelerationMotorSide").data("unitsComboBox").setDropBoxItem(this.unit)}}),L.setSIValue(r.rmsAcceData),E.unitsLabelControl({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",value:r.rmsAcceMotor,comboBoxWidthRatio:{textBox:"50%",comboBox:"50%"},callBackFn:function(){}}),E.setSIValue(r.rmsAcceMotor),r.disableControls&&r.disableControls.rmsSpeedTextBox&&t.find("#rmsSpeedValue").attr("disabled",!0),r.showMotorTsCurve){var U=e('<div id="sliderContainer" class="row"></div>');i.append(U)}i.append('<div id="alertMessageContainer" class="alert alert-warning"><strong>Warning:-&nbsp;&nbsp;</strong><span></span></div>');var z=function(e){return""===e?void i.find("#alertMessageContainer").hide():(i.find("#alertMessageContainer span").text(e),i.find("#alertMessageContainer").show(),void setTimeout(function(){i.find("#alertMessageContainer").fadeOut("slow")},3e3))}},h=function(o){var a=e('<div class="panel panel-default"></div>');o.append(a);var t=e('<div class="panel-heading" role="tab" id="headingThree"> <h4 class="panel-title"> <a role="button"   data-toggle="collapse"  href="#collapseThree'+r.uniqeId+'" aria-controls="collapseThree" aria-expanded="false"><span> Environmental Factors</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');a.append(t);var i=e('<div id="collapseThree'+r.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree"></div>');a.append(i);var n=e('<div class="panel-body"></div>');i.append(n),a.on("show.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),a.on("hide.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),k(n)},k=function(o){var a=e('<div id="envFactorsPanelContainer"></div>');o.append(a);var n=e('<div id="sliderContainer" class="row"></div>');a.append(n);var l=e('<div class="col-xs-3 col-3 title"><span id="tempTitle">Temperature: </span></div>');n.append(l);var d=e('<div class="col-xs-3 col-3  "><input id="tempSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');n.append(d);var u=r.sliderLimit.maxTemp||i.sliderLimit.maxTemp,p=e('<div class="col-xs-6 col-6  temp-unit-dropdown display-flex margin-bottom"></label></div>');n.append(p),r.defaultPeakStallTorque=r.motorData[r.motorSelectedIndex].peakStallTorque,r.defaultRollOffPoint=r.motorData[r.motorSelectedIndex].rollOffPoint,r.defaultRollOffSpeed=r.motorData[r.motorSelectedIndex].rollOffSpeed,r.defaultPeakTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].peakTorqueAtMaxSpeed,r.defaultContinuousStallTorque=r.motorData[r.motorSelectedIndex].continuousStallTorque,r.defaultContinuosTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed,n.find("#tempSlider").slider({value:r.motorData[r.motorSelectedIndex].temp,min:0,max:u,step:1}).on("change",function(o){e(".temp-unit-dropdown").data("unitsComboBox").setTextBoxValue(o.value.newValue),r.motorData[r.motorSelectedIndex].temp=o.value.newValue;var a=o.value.newValue-o.value.oldValue;0!==a&&(c("peakPlot",o.value.newValue),c("rmsPlot",o.value.newValue))}),r.disableControls&&r.disableControls.tempSlider&&n.find("#tempSlider").slider("disable"),p.unitsComboBox({unitType:"TEMPERATURE",unit:"celsius",mode:"spin",step:"1",dataRule:"currency",min:0,value:r.motorData[r.motorSelectedIndex].temp,comboBoxWidthRatio:{textBox:"45%",comboBox:"35%"},callBackFn:function(){void 0!=this.type&&"dropdown"!=this.type&&(r.motorData[r.motorSelectedIndex].temp=this.value,t.find("#tempSlider").slider("setValue",parseInt(this.value)),c("peakPlot",parseInt(this.value)),c("rmsPlot",parseInt(this.value)))}}),p.append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>'),r.disableControls&&r.disableControls.tempTextBox&&t.find(".amount_TEMPERATURE").attr("disabled",!0);var c=function(e,o){var a=s.getData(),t=o,i=40,n=155,l=25,d=t+.6*(n-t),u=i+.6*(n-i),p=-.0015,c=1-(t-i)/(n-i),m=(l+234.5)/(u+234.5),f=1+(d-u)*p;switch(e){case"peakPlot":for(var x=a[0].data,S=0;S<x.length;S++)void 0!=r.motorData[r.motorSelectedIndex]&&(0!=S&&12!=S&&6!=S||(x[S][1]=r.defaultPeakStallTorque*f,0==S&&(r.motorData[r.motorSelectedIndex].peakStallTorque=x[S][1]),6==S&&(x[S][1]=-x[S][1])),1!=S&&7!=S||(x[S][1]=r.defaultRollOffPoint*f,x[S][0]=r.defaultRollOffSpeed/f,r.motorData[r.motorSelectedIndex].rollOffPoint=x[S][1],r.motorData[r.motorSelectedIndex].rollOffSpeed=x[S][0],7==S&&(x[S][0]=-x[S][0],x[S][1]=-x[S][1])),2!=S&&8!=S||(x[S][1]=r.defaultPeakTorqueAtMaxSpeed*f,r.motorData[r.motorSelectedIndex].peakTorqueAtMaxSpeed=x[S][1],8==S&&(x[S][1]=-x[S][1])));a[0].data=x;break;case"rmsPlot":for(var T=a[2].data,S=0;S<T.length;S++)void 0!=r.motorData[r.motorSelectedIndex]&&(0!=S&&10!=S&&5!=S||(T[S][1]=r.defaultContinuousStallTorque*(f*Math.sqrt(c/m)),r.motorData[r.motorSelectedIndex].continuousStallTorque=T[S][1],5==S&&(T[S][1]=-T[S][1])),1!=S&&6!=S||(T[S][1]=r.defaultContinuosTorqueAtMaxSpeed*(f*Math.sqrt(c/m)),r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=T[S][1],6==S&&(T[S][1]=-T[S][1])));a[2].data=T}B(a),v()},m=e('<div id="sliderContainer" class="row"></div>');a.append(m);var f=e('<div class="col-xs-3 col-3 title"><span id="altitudeTitle">Altitude: </span></div>');m.append(f);var x=e('<div class="col-xs-3 col-3  "><input id="altitudeSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');m.append(x);var u=r.sliderLimit.maxAltitude||i.sliderLimit.maxAltitude,S=e('<div class="col-xs-6 col-6 altitude-unit-combobox display-flex margin-bottom"> </div>');m.append(S),r.defaultContinuousStallTorque=r.motorData[r.motorSelectedIndex].continuousStallTorque,r.defaultContinuosTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed,x.find("#altitudeSlider").slider({value:r.motorData[r.motorSelectedIndex].altitude,min:0,max:1e4,step:1}).on("change",function(o){e(".altitude-unit-combobox").data("unitsComboBox").setTextBoxValue(o.value.newValue);var a=s.getData(),t=a[2].data;if(o.value.newValue>1500){var i=[1-(o.value.newValue-1500)/1e4];t[0][1]=t[10][1]=(r.defaultContinuousStallTorque*i).toFixed(3),t[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*i).toFixed(3),a[2].data=t,r.motorData[r.motorSelectedIndex].continuousStallTorque=t[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=t[1][1]}else{var i=1;t[0][1]=t[10][1]=(r.defaultContinuousStallTorque*i).toFixed(3),t[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*i).toFixed(3),a[2].data=t,r.motorData[r.motorSelectedIndex].continuousStallTorque=t[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=t[1][1]}B(a),v()}),r.disableControls&&r.disableControls.altitudeSlider&&x.find("#altitudeSlider").slider("disable"),S.unitsComboBox({unitType:"ALTITUDE",unit:"meter",mode:"spin",step:"1",dataRule:"currency",min:0,value:r.motorData[r.motorSelectedIndex].altitude,comboBoxWidthRatio:{textBox:"45%",comboBox:"35%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){var e=parseInt(this.value),o=s.getData(),a=o[2].data;if(t.find("#altitudeSlider").slider("setValue",e),e>1500){var i=[1-(e-1500)/1e4];a[0][1]=a[10][1]=(r.defaultContinuousStallTorque*i).toFixed(3),a[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*i).toFixed(3),o[2].data=a,r.motorData[r.motorSelectedIndex].continuousStallTorque=a[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=a[1][1]}else{var i=1;a[0][1]=a[10][1]=(r.defaultContinuousStallTorque*i).toFixed(3),a[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*i).toFixed(3),o[2].data=a,r.motorData[r.motorSelectedIndex].continuousStallTorque=a[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=a[1][1];
}B(o),v()}}}),t.find("#altitudeSpinner").spinner("changed",function(e,o,a){var i=parseInt(o),n=s.getData(),l=n[2].data;if(t.find("#altitudeSlider").slider("setValue",i),i>1500){var d=[1-(i-1500)/1e4];l[0][1]=l[10][1]=(r.defaultContinuousStallTorque*d).toFixed(3),l[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*d).toFixed(3),n[2].data=l,r.motorData[r.motorSelectedIndex].continuousStallTorque=l[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=l[1][1]}else{var d=1;l[0][1]=l[10][1]=(r.defaultContinuousStallTorque*d).toFixed(3),l[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*d).toFixed(3),n[2].data=l,r.motorData[r.motorSelectedIndex].continuousStallTorque=l[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=l[1][1]}B(n),v()}),r.disableControls&&r.disableControls.transmRatioTextBox&&t.find(".amount_ALTITUDE").attr("disabled",!0)},C=function(o){var a=e('<div class="panel panel-default"></div>');o.append(a);var t=e('<div class="panel-heading" role="tab" id="headingFour"> <h4 class="panel-title"> <a role="button"  data-toggle="collapse"  href="#collapseFour'+r.uniqeId+'" aria-controls="collapseFour" aria-expanded="false"><span> Transmission Ratio</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');a.append(t);var i=e('<div id="collapseFour'+r.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour"></div>');a.append(i);var n=e('<div class="panel-body"></div>');i.append(n),a.on("show.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),a.on("hide.bs.collapse",function(o){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),M(n)},M=function(o){var a=e('<div id="transmissionRatioPanelContainer"></div>');o.append(a);var i=e('<div id="sliderContainer" class="row"></div>');a.append(i);var n=e('<div class="col-xs-6 col-6 title"><span id="trRatioTitle">Transmission Ratio: </span></div>');i.append(n);var s=e('<div class="col-xs-6 col-6 trRatioValue"></div>');i.append(s),r.defaultRmsTorque=r.rmsMotorData[1],r.defaultRmsSpeed=r.rmsMotorData[0],r.defaultPeakTorque=r.peakMotorData[1],r.defaultPeakSpeed=r.peakMotorData[0];var l="true",d="true";r.disableControls&&r.disableControls.transmission&&(l="false",d="false"),s.unitsComboBox({unitType:"PERCENTAGE",unit:"percentage",mode:"spin",step:"1",dataRule:"quantity",value:r.transmissionRaioVal,enable:{textbox:l,comboBox:d},showTextBoxOnly:"true",comboBoxWidthRatio:{textBox:"38%",comboBox:"0"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>r.sliderLimit.maxTrRatio)return t.find(".trRatioValue").data("unitsComboBox").setTextBoxValue(r.transmissionRaioVal),p("Transmission ratio value can not be greater than 100."),!1;if(this.value<="0")return t.find(".trRatioValue").data("unitsComboBox").setTextBoxValue(r.transmissionRaioVal),p("Transmission ratio value can not be less than 1."),!1;p(""),r.transmissionRaioVal=this.value,t.find(".transmissionRaioVal").html("&nbsp;:&nbsp;"+r.transmissionRaioVal),f("TransmissionRatio",this.value)}}});var u=e('<div class="transmissionRaioVal">&nbsp;: 1</div>');s.append(u),r.disableControls&&r.disableControls.transmRatioSlider&&$trRatioSlider.find("#trRatioSlider").slider("disable"),r.disableControls&&r.disableControls.transmRatioTextBox&&t.find("#trRatioValue").attr("disabled",!0),a.append('<div id="alertMessageContainer" class="alert alert-warning"><strong>Warning:-&nbsp;&nbsp;</strong><span></span></div>');var p=function(e){return""===e?void a.find("#alertMessageContainer").hide():(a.find("#alertMessageContainer span").text(e),a.find("#alertMessageContainer").show(),void setTimeout(function(){a.find("#alertMessageContainer").fadeOut("slow")},5e3))}},b=function(o){var t=e('<div class="titleSection">Motor T-S Curve</div>');o.append(t);var i=e('<div class="tsPlotContainer"></div>');o.append(i);var n=e('<div class="tsPlotArea"></div>');i.append(n),a(r.motorSelectedIndex+1),q()},q=function(){var e,o=[],a={colors:[r.graphLineColor.peakTSCurve,r.graphLineColor.peakTSCurve,r.graphLineColor.contionusTSCurve,r.graphLineColor.contionusTSCurve],series:{points:{show:!0}},legend:{backgroundOpacity:0},coordinate:{type:"rectangular"},axisLabels:{show:!0},xaxis:{axisLabel:"Speed (rpm)",tickFormatter:l},yaxis:{axisLabel:"Torque (N-m)",tickFormatter:l},grid:(e={hoverable:!0,clickable:!0,borderWidth:1,borderColor:"#333"},_defineProperty(e,"borderWidth",{top:0,right:0,bottom:1,left:1}),_defineProperty(e,"margin",0),_defineProperty(e,"markings",[{yaxis:{from:0,to:0,tickFormatter:l},color:"#333"},{xaxis:{from:0,to:0},color:"#333"},{xaxis:{from:0,to:r.xaxisMaxVale,tickFormatter:l},color:"#fff"}]),e),tooltip:!0,tooltipOpts:{cssClass:"tsCurveFlotTip",content:function(e,o,a,t){var i="";switch(t.seriesIndex){case 0:switch(t.dataIndex){case 0:i="Peak Stall Torque <br />";break;case 1:i="Roll Off Point<br />";break;case 2:i="Peak Torque at Max Speed <br />";break;case 3:i="Max Speed at Zero Torque <br />"}break;case 1:i="Peak T/S Point <br />";break;case 2:switch(t.dataIndex){case 0:i="Continuous Stall Torque <br />";break;case 1:i="Continuous Stall Torque at Max Speed <br />";break;case 2:i="Max Speed Point <br />"}break;case 3:i="RMS T/S Point <br />"}return i+"Speed: "+o+", Torque: "+a},defaultTheme:!1,shifts:{x:0,y:20}}};1==r.quadrant&&(a.xaxis.min=0,a.yaxis.min=0);var t=[],i=[],n=[],d=[],u=[],p=[],c=[],m=[],f=function(){t=[],i=[],n=[],d=[],u=[],p=[],c=[],m=[]},v=function(e){var o=e.maxSpeed;u=[[0,e.peakStallTorque],[e.rollOffSpeed,e.rollOffPoint],[o,e.peakTorqueAtMaxSpeed],[o,0]],c=[[0,e.continuousStallTorque],[o,e.continuosTorqueAtMaxSpeed],[o,0]]},x=function(e){var o=-1*e.maxSpeed;p=[[o,0],[o+1,e.peakStallTorque]],m=[[o,0],[o+1,e.continuousStallTorque]]},S=function(e){t=t.concat(u),i=i.concat(c)},T=function(e){var o=[],a=[];p.length>0&&p.forEach(function(e,a,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],o[a]=i}),t=t.concat(o),m.length>0&&m.forEach(function(e,o,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],a[o]=i}),i=i.concat(a)},h=function(e){var o=[],a=[];u.length>0&&u.forEach(function(e,a,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],o[a]=i}),t=t.concat(o),c.length>0&&c.forEach(function(e,o,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],a[o]=i}),i=i.concat(a)},k=function(e){t=t.concat(p),i=i.concat(m)},C=function(e){t.push([0,e.peakStallTorque]),i.push([0,e.continuousStallTorque])},M=function(e){var o=e.temp,a=40,t=155,i=25,r=o+.6*(t-o),n=a+.6*(t-a),s=-.0015,l=1-(o-a)/(t-a),d=(i+234.5)/(n+234.5),u=1+(r-n)*s;return e.peakStallTorque=(e.peakStallTorque*u).toFixed(2),e.rollOffPoint=(e.rollOffPoint*u).toFixed(2),e.rollOffSpeed=(e.rollOffSpeed/u).toFixed(2),e.continuousStallTorque=(e.continuousStallTorque*(u*Math.sqrt(l/d))).toFixed(2),e.continuosTorqueAtMaxSpeed=(e.continuosTorqueAtMaxSpeed*(u*Math.sqrt(l/d))).toFixed(2),e},b=function(e){S(e),T(e),h(e),k(e),C(e)},q=function(e){if(f(),"0"==r.firstTimeCall){var o=M(e);v(o),x(o),b(o)}else v(e),x(e),b(e)};r.showMotorTsCurve&&q(r.motorData[r.motorSelectedIndex]),r.showApplicationPoints&&(n.push(r.peakMotorData),d.push(r.rmsMotorData)),o.push({data:t,label:"Peak",lines:{lineWidth:2,show:!0}},{data:n,label:"",points:{show:!0,fillColor:r.graphLineColor.peakTSCurve,radius:4}},{data:i,label:"Continous",lines:{lineWidth:2,show:!0}},{data:d,label:"",points:{show:!0,fillColor:r.graphLineColor.contionusTSCurve,radius:4}});var P={peakTorque:r.peakPoints[1],peakSpeed:r.peakPoints[0],rmsTorque:r.rmsPoints[1],peakAcceleration:r.peakAcceData,rmsAcceleration:r.rmsAcceData,temperature:r.motorData[r.motorSelectedIndex].temp,altitude:r.motorData[r.motorSelectedIndex].altitude,motorIndex:r.motorSelectedIndex},A={motorInertia:r.motorInertia,motorStatus:r.motorStatus};r.notifyIOData&&"function"==typeof r.notifyIOData&&r.notifyIOData({inputs:P,output:A}),s?B(o,a):I(o,a)},P=function(e){function o(e,o,a,t){var r=!1,n=(o[1]-e[1])/(o[0]-e[0]),s=e[1]-n*e[0],l=-1,d=n*a[0]-a[1]+s;if(r=0==d||d>0&&0>l||0>d&&l>0,t){var u=a[0]*a[1],f=a[0]*(n*a[0]+s),v=100*u/f;m.push(v)}else{var x=100*a[1]/(n*a[0]+s),S=100*a[0]/i.maxSpeed;p.push(x),c.push(S)}return r}function a(e){var o=100*e[1]/i.peakStallTorque,a=100*e[0]/i.maxSpeed;p.push(o),c.push(a)}function t(e){var o=e[0]*e[1],a=e[0]*i.continuousStallTorque,t=100*o/a;m.push(t)}var i=e,n=r.peakMotorData,s=r.rmsMotorData,l={PeakStallPoint:{x:0,y:i.peakStallTorque},RollOffPoint:{x:i.rollOffSpeed,y:i.rollOffPoint},PeakTarqueAtMaxSpeedPoint:{x:i.maxSpeed,y:i.peakTorqueAtMaxSpeed},ContinuousStallTorquePoint:{x:0,y:i.continuousStallTorque},ContinuousStallTorqueMaxSpeedPoint:{x:i.maxSpeed,y:i.continuosTorqueAtMaxSpeed}},d=0,u=null,p=[],c=[],m=[],f=null,v=null,x=null,S={status:u,torqueUtilization:f,speedUtilization:v,avgPower:x},T=s[0],h=s[1],k=n[0],C=n[1],M=!1,b=!1,q=null,P=null,A=null;return T<=i.maxSpeed?(q=[l.ContinuousStallTorquePoint.x,l.ContinuousStallTorquePoint.y],P=[l.ContinuousStallTorqueMaxSpeedPoint.x,l.ContinuousStallTorqueMaxSpeedPoint.y],A=[T,h],b=o(q,P,A,!0)):(d=-1,t([T,h])),C<=i.peakStallTorque&&k<=i.maxSpeed?k<=l.RollOffPoint.x?(q=[l.PeakStallPoint.x,l.PeakStallPoint.y],P=[l.RollOffPoint.x,l.RollOffPoint.y],A=[k,C],M=o(q,P,A,!1)):(q=[l.RollOffPoint.x,l.RollOffPoint.y],P=[l.PeakTarqueAtMaxSpeedPoint.x,l.PeakTarqueAtMaxSpeedPoint.y],A=[k,C],M=o(q,P,A,!1)):(d=-1,a([k,C])),-1!=d&&0!=M&&0!=b||(d=-1),-1==d?S.status=!1:0==d&&(S.status=!0),S.torqueUtilization=Math.max.apply(Math,p),S.speedUtilization=Math.max.apply(Math,c),S.avgPower=Math.max.apply(Math,m),S},A=function(){s.getAxes();if(!r.showMotorTsCurve){var e=Math.max(r.peakMotorData[0]+50,r.rmsMotorData[0]+50,200),o=Math.max(r.peakMotorData[1]+10,r.rmsMotorData[1]+10,150);s.getOptions().yaxes[0].max=o,s.getOptions().xaxes[0].max=e,4===r.quadrant&&(s.getOptions().yaxes[0].min=-1*o,s.getOptions().xaxes[0].min=-1*e)}},g=function(){4==r.quadrant?(s.getOptions().grid.markings[0].color="#bdbdbd",s.getOptions().grid.markings[1].color="#bdbdbd"):(s.getOptions().grid.markings[0].color="#333",s.getOptions().grid.markings[1].color="#333"),A(),s.setupGrid(),s.draw()},I=function(o,a){setTimeout(function(){s=e.plot(t.find(".tsPlotArea"),o,a),g(),D(),m()},0)},D=function(){t.find(".tsCruveContainer").resize(function(o){var a=e(this);a.width()<=940?(a.find("#servoMotorArea").addClass("resizeWidth"),a.find("#servoMotorTSCurve").addClass("resizeWidth"),a.find(".tsPlotArea").css("min-height",a.find(".tsPlotArea").width()),a.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%")):a.width()>940&&a.width()<1280?(a.find("#servoMotorArea").removeClass("resizeWidth"),a.find("#servoMotorTSCurve").removeClass("resizeWidth"),a.find(".tsPlotArea").css("min-height",a.find(".tsPlotArea").width()),a.find("#servoMotorArea").find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").css("width","auto"),a.find("#servoMotorArea").find(".response-status").attr("title",t.find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").text())):(a.find("#servoMotorArea").removeClass("resizeWidth"),a.find("#servoMotorTSCurve").removeClass("resizeWidth"),a.find(".tsPlotArea").css("min-height",a.find(".tsPlotArea").width()),a.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%"))})},B=function(e,o){var a={peakTorque:r.peakPoints[1],peakSpeed:r.peakPoints[0],rmsTorque:r.rmsPoints[1],peakAcceleration:r.peakAcceData,rmsAcceleration:r.rmsAcceData,temperature:r.motorData[r.motorSelectedIndex].temp,altitude:r.motorData[r.motorSelectedIndex].altitude,motorIndex:r.motorSelectedIndex},t={motorInertia:r.motorInertia,motorStatus:r.motorStatus};r.notifyIOData&&"function"==typeof r.notifyIOData&&r.notifyIOData({inputs:a,output:t}),o&&(void 0!=o.xaxis.min&&void 0!=o.yaxis.min?(s.getOptions().yaxes[0].min=o.yaxis.min,s.getOptions().xaxes[0].min=o.xaxis.min):(s.getOptions().yaxes[0].min=null,s.getOptions().xaxes[0].min=null)),s.setData(e),g(),V()},V=function(){r.assessmentMode&&r.assessmentCallback&&r.assessmentCallback({peakTorque:{value:t.find("#peakTorqueValue").val(),unit:"Nm"},peakSpeed:{value:t.find("#peakSpeedValue").val(),unit:"rad/sec"},rmsTorque:{value:t.find("#rmsTorqueValue").val(),unit:"Nm"},rmsSpeed:{value:t.find("#rmsSpeedValue").val(),unit:"rad/sec"},temperature:{value:t.find(".amount_TEMPERATURE").val(),unit:"C"},altitude:{value:t.find(".amount_ALTITUDE").val(),unit:"m"},transmissionRatio:{value:t.find("#trRatioValue").val(),unit:""},motorSelectedIndex:{value:r.motorSelectedIndex,unit:""}})},R=function(e){e.peakTorque&&(t.find("#peakTorqueSlider").slider("setValue",e.peakTorque.value),t.find("#peakTorqueValue").val(e.peakTorque.value),S("PeakTorque")),e.peakSpeed&&(t.find("#peakSpeedSlider").slider("setValue",e.peakSpeed.value),t.find("#peakSpeedValue").val(e.peakSpeed.value),S("PeakSpeed")),e.rmsTorque&&(t.find("#rmsTorqueSlider").slider("setValue",e.rmsTorque.value),t.find("#rmsTorqueValue").val(e.rmsTorque.value),S("RmsTorque")),e.rmsSpeed&&(t.find("#rmsSpeedSlider").slider("setValue",e.rmsSpeed.value),t.find("#rmsSpeedValue").val(e.rmsSpeed.value),S("RmsSpeed")),e.temperature&&(t.find("#tempSlider").slider("setValue",e.temperature.value),t.find(".amount_TEMPERATURE").val(e.temperature.value),S("Temperature")),e.altitude&&(t.find("#altitudeSlider").slider("setValue",e.altitude.value),t.find(".amount_ALTITUDE").val(e.altitude.value),S("Altitude")),e.transmissionRatio&&(t.find("#trRatioSlider").slider("setValue",e.transmissionRatio.value),t.find("#trRatioValue").val(e.transmissionRatio.value),S("TransmissionRatio")),e.motorSelectedIndex&&(t.find("#solutionSliderId").slider("setValue",parseInt(r.motorSelectedIndex)),t.find("#PaginationDiv").Folio({activePage:r.motorSelectedIndex}))},w=function(e){var o;if(e.peakTorque&&(o=e.peakTorque.status?"correct":"incorrect",t.find("#peakTorqueValue").addClass(o)),e.peakSpeed&&(o=e.peakSpeed.status?"correct":"incorrect",t.find("#peakSpeedValue").addClass(o)),e.rmsTorque&&(o=e.rmsTorque.status?"correct":"incorrect",t.find("#rmsTorqueValue").addClass(o)),e.rmsSpeed&&(o=e.rmsSpeed.status?"correct":"incorrect",t.find("#rmsSpeedValue").addClass(o)),e.temperature){o=e.temperature.status?"correct":"incorrect",t.find(".amount_TEMPERATURE").addClass(o),o=e.temperature.status?"fa-check correct":"fa-times incorrect",t.find("#envFactorsPanelContainer").find(".response-status").css({display:"flex","align-items":"center"}),t.find("#envFactorsPanelContainer").find(".response-status").find("span.fa").addClass(o);var a=e.temperature.status?"":"("+e.temperature.correctAnswer+"&#176;C)";t.find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").append(a),t.find("#envFactorsPanelContainer").find("#tempSlider").slider("disable"),t.find("#envFactorsPanelContainer").find(".amount_TEMPERATURE").attr("disabled",!0)}if(e.altitude&&(o=e.altitude.status?"correct":"incorrect",t.find(".amount_ALTITUDE").addClass(o)),e.transmissionRatio&&(o=e.transmissionRatio.status?"correct":"incorrect",t.find("#trRatioValue").addClass(o)),e.motorSelectedIndex){o=e.motorSelectedIndex.status?"fa-check correct":"fa-times incorrect",t.find(".solutionInfoTitle").find(".response-status").css({display:"inline-flex","align-items":"center"}),t.find(".solutionInfoTitle").find(".response-status").find("span.fa").addClass(o);var a=e.motorSelectedIndex.status?"":"(# "+e.motorSelectedIndex.correctAnswer+")";t.find(".solutionInfoTitle").find(".response-status").find(".correct-answer").append(a)}};return d(),{ref:this,updateInputs:R,markAnswers:w}}}(jQuery);