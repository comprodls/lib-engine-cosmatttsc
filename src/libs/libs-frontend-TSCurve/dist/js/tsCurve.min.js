"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("jquery")):e(jQuery)}(function(e){var a,t,i=function o(a,t){return this.$el=a,this.options=e.extend({},o.rules.defaults,o.rules[t.rule]||{},t),this.min=Number(this.options.min)||0,this.max=Number(this.options.max)||0,this.$el.on({"focus.spinner":e.proxy(function(a){a.preventDefault(),e(document).trigger("mouseup.spinner"),this.oldValue=this.value()},this),"change.spinner":e.proxy(function(e){e.preventDefault(),this.value(this.$el.val())},this),"keydown.spinner":e.proxy(function(e){var a={38:"up",40:"down"}[e.which];a&&(e.preventDefault(),this.spin(a))},this)}),this.oldValue=this.value(),this.value(this.$el.val()),this};i.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:null,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},i.prototype={spin:function(a){if(!this.$el.prop("disabled")){this.oldValue=this.value();var t=e.isFunction(this.options.step)?this.options.step.call(this,a):this.options.step,i="up"===a?1:-1;this.value(this.oldValue+Number(t)*i)}},value:function(i){if(null===i||void 0===i)return this.numeric(this.$el.val());i=this.numeric(i);var n=this.validate(i);0!==n&&(i=-1===n?this.min:this.max),this.$el.val(i.toFixed(this.options.precision)),this.$el.trigger("changing.spinner",[this.value(),this.oldValue]),clearTimeout(a),a=setTimeout(e.proxy(function(){this.$el.trigger("changed.spinner",[this.value(),this.oldValue])},this),t.delay)},numeric:function(e){return e=this.options.precision>0?parseFloat(e,10):parseInt(e,10),isFinite(e)?e:e||this.options.min||0},validate:function(e){return null!==this.options.min&&e<this.min?-1:null!==this.options.max&&e>this.max?1:0}},t=function(a,t){this.$el=e(a),this.$spinning=this.$el.find('[data-spin="spinner"]'),0===this.$spinning.length&&(this.$spinning=this.$el.find(':input[type="text"]')),t=e.extend({},t,this.$spinning.data()),this.spinning=new i(this.$spinning,t),this.$el.on("click.spinner",'[data-spin="up"], [data-spin="down"]',e.proxy(this,"spin")).on("mousedown.spinner",'[data-spin="up"], [data-spin="down"]',e.proxy(this,"spin")),e(document).on("mouseup.spinner",e.proxy(function(){clearTimeout(this.spinTimeout),clearInterval(this.spinInterval)},this)),t.delay&&this.delay(t.delay),t.changed&&this.changed(t.changed),t.changing&&this.changing(t.changing)},t.delay=500,t.prototype={constructor:t,spin:function(a){var t=e(a.currentTarget).data("spin");switch(a.type){case"click":a.preventDefault(),this.spinning.spin(t);break;case"mousedown":1===a.which&&(this.spinTimeout=setTimeout(e.proxy(this,"beginSpin",t),300))}},delay:function s(e){var s=Number(e);s>=0&&(this.constructor.delay=s+100)},value:function(){return this.spinning.value()},changed:function(e){this.bindHandler("changed.spinner",e)},changing:function(e){this.bindHandler("changing.spinner",e)},bindHandler:function(a,t){e.isFunction(t)?this.$spinning.on(a,t):this.$spinning.off(a)},beginSpin:function(a){this.spinInterval=setInterval(e.proxy(this.spinning,"spin",a),100)}};var n=e.fn.spinner;return e.fn.spinner=function(a,i){return this.each(function(){var n=e.data(this,"spinner");n||(n=new t(this,a),e.data(this,"spinner",n)),"delay"===a||"changed"===a||"changing"===a?n[a](i):"step"===a&&i?n.spinning.step=i:"spin"===a&&i&&n.spinning.spin(i)})},e.fn.spinner.Constructor=t,e.fn.spinner.noConflict=function(){return e.fn.spinner=n,this},e(function(){e('[data-trigger="spinner"]').spinner()}),e.fn.spinner}),function(e){e.fn.TSCurve=function(a){var t,i=e(this),n={showApplicationPoints:!1,motorSelectedIndex:3,rmsPoints:[190,44],peakPoints:[400,60],quadrant:1,sliderLimit:{peakMaxSpeed:800,peakMaxTorque:100,rmsMaxSpeed:800,rmsMaxTorque:100,maxTemp:125,maxAltitude:1e4,maxVoltage:10,maxTrRatio:100},showQuadrantToggle:!0,showMotorTsCurve:!0,showMotorSelForm:!0,showAppPointsForm:!0,showEnviorForm:!0,showTransmissionForm:!0,uniqeId:"1",firstTimeCall:"0"},o=e.extend({},n,a),s=function(){var a=e('<div class="tsCruveContainer row m-0"></div>');i.append(a),r(a)},r=function(a){var t=e('<div id="servoMotorTSCurve"></div>');if(a.append(t),o.showMotorSelForm||o.showAppPointsForm||o.showEnviorForm||o.showTransmissionForm){t.addClass("col-xs-6 col-6");var n=e('<div class="col-xs-6 col-6" id="servoMotorArea"></div>');a.append(n),d(n)}else t.addClass("col-xs-12 col-12"),i.find(".tsCruveContainer").addClass("widthMaxLimit");g(t)},d=function(a){var t=e('<div id="motorAreaAccordionContainer"></div>');a.append(t);var i=e('<div class="panel-group" id="accordion'+o.uniqeId+'" role="tablist" aria-multiselectable="true"></div>');t.append(i),o.showMotorTsCurve||(o.showMotorSelForm=!1),o.showMotorSelForm&&l(i),o.showApplicationPoints||(o.showAppPointsForm=!1),o.showAppPointsForm&&u(i),o.showEnviorForm&&f(i),o.showTransmissionForm&&S(i),p()},l=function(a){function t(e){var e=e-1;console.log(o.motorData[e].drivePartNo),l.find("#driveNameId").text(o.motorData[e].drivePartNo),l.find("#motorNameId").text(o.motorData[e].motorPartNo),l.find("#voltageInfoId").text(o.motorData[e].voltage+" V"),l.find("#solutionTitle").text("Soultion Summary: # "+(e+1)),o.motorSelectedIndex=e,i.find("#tempSlider").slider("setValue",o.motorData[o.motorSelectedIndex].temp),i.find("#tempValue").val(o.motorData[o.motorSelectedIndex].temp),i.find("#altitudeSlider").slider("setValue",o.motorData[o.motorSelectedIndex].altitude),i.find("#altitudeValue").val(o.motorData[o.motorSelectedIndex].altitude),o.defaultPeakStallTorque=o.motorData[o.motorSelectedIndex].peakStallTorque,o.defaultRollOffPoint=o.motorData[o.motorSelectedIndex].rollOffPoint,o.defaultRollOffSpeed=o.motorData[o.motorSelectedIndex].rollOffSpeed,o.defaultPeakTorqueAtMaxSpeed=o.motorData[o.motorSelectedIndex].peakTorqueAtMaxSpeed,o.defaultContinuousStallTorque=o.motorData[o.motorSelectedIndex].continuousStallTorque,o.defaultContinuosTorqueAtMaxSpeed=o.motorData[o.motorSelectedIndex].continuosTorqueAtMaxSpeed,o.motorSelectedIndex=e,T(),p()}var n=e('<div class="panelNew panel-defaultNew"></div>');a.append(n);var s=e('<div class="panel-heading panelHeadingNew" role="tab" id="headingOne"> <div id="PaginationDiv" class="Pagination"></div><span class="accordion-plus-minus  pull-right" aria-hidden="true" style="color: grey;"></span> </div>');n.append(s);var r=e('<div id="collapseOne" class="panel-collapse collapse motorDataOpenPanle" role="tabpanel" aria-labelledby="headingOne"></div>');n.append(r);var d=e('<div class="panel-body"></div>');r.append(d),n.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),n.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")});var d=n.find("#collapseOne .panel-body"),l=e('<div id="motorDataContainer" class="row"></div>');d.append(l);var u=e('<div class="col-xs-12 col-12 solutionInfoTitle" id="solutionTitle">Solution Summary</div>');l.append(u);var c=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');l.append(c);var m=e('<div class="col-xs-6 col-6"><span class="driveTitle">Drive:</span><span class="driveName" id="driveNameId">'+o.motorData[o.motorSelectedIndex].drivePartNo+"</span></div>");c.append(m);var v=e('<div class="col-xs-6 col-6"><span class="motorTitle">Motor:</span><span class="motorName" id="motorNameId">'+o.motorData[o.motorSelectedIndex].motorPartNo+"</span></div>");c.append(v);var f=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');l.append(f);var h=e('<div class="col-xs-6 col-6"><span class="voltageTitle">Voltage:</span><span class="voltageName" id="voltageInfoId">'+o.motorData[o.motorSelectedIndex].voltage+" V</span></div>");f.append(h);var S=e('<div class="col-xs-6 col-6"><span class="solutionStatusTitle">Solution Status:</span><span class="solutionStatus motorPass" id="statusValueContainer">Pass</span></div>');f.append(S),s.find("#PaginationDiv").Folio({totalPages:o.motorData.length,maxPages:9,activePage:o.motorSelectedIndex,previousClass:"fa fa-chevron-left",nextClass:"fa fa-chevron-right",onUpdate:function(e){o.firstTimeCall=e,t(e)}})},p=function(){var e=q(o.motorData[o.motorSelectedIndex]).status;if(o.showMotorSelForm){var a=i.find("#statusValueContainer");a.removeClass("motorPass"),a.removeClass("motorFail"),a.addClass(e?"motorPass":"motorFail"),a.text(e?"Pass":"Fail")}if(o.showAppPointsForm){var t=i.find("#servoMotorArea #tsPointsPanelContainer #statusValueContainer");t.find(".motorStatusIcon").removeClass("glyphicon-remove").removeClass("glyphicon-ok").addClass(e?"glyphicon-ok":"glyphicon-remove"),t.find("#statusValueLabel").text(e?"Motor Pass":"Motor Fail")}},u=function(a){var t=e('<div class="panel panel-default"></div>');a.append(t);var i=e('<div class="panel-heading" role="tab" id="headingTwo"> <h4 class="panel-title"> <a role="button" data-parent="#accordion'+o.uniqeId+'" data-toggle="collapse"  href="#collapseTwo'+o.uniqeId+'" aria-controls="collapseTwo" aria-expanded="false"><span>Application Torque Speed Requirements </span><span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');t.append(i);var n=e('<div id="collapseTwo'+o.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo"></div>');t.append(n),t.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),t.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),o.showMotorSelForm||n.addClass("in"),v(n)},c=function(e,a){var n=t.getData();switch(e){case"PeakSpeed":n[1].data[0][0]=o.peakPoints[0]=a,o.defaultPeakSpeed=a,i.find("#peakSpeedSlider").slider("setValue",a);break;case"PeakTorque":n[1].data[0][1]=o.peakPoints[1]=a,o.defaultPeakTorque=a,i.find("#peakTorqueSlider").slider("setValue",a);break;case"RmsSpeed":n[3].data[0][0]=o.rmsPoints[0]=a,o.defaultRmsSpeed=a,i.find("#rmsSpeedSlider").slider("setValue",a);break;case"RmsTorque":n[3].data[0][1]=o.rmsPoints[1]=a,o.defaultRmsTorque=a,i.find("#rmsTorqueSlider").slider("setValue",a);break;case"TransmissionRatio":var s=a,n=t.getData();n[1].data[0][0]=o.peakPoints[0]=(o.defaultPeakSpeed*s).toFixed(2),n[1].data[0][1]=o.peakPoints[1]=(o.defaultPeakTorque/s).toFixed(2),n[3].data[0][0]=o.rmsPoints[0]=(o.defaultRmsSpeed*s).toFixed(2),n[3].data[0][1]=o.rmsPoints[1]=(o.defaultRmsTorque/s).toFixed(2),n[1].data[0][0]>o.sliderLimit.peakMaxSpeed?i.find("#peakSpeedValue").attr("data-max",parseInt(n[1].data[0][0])):i.find("#peakSpeedValue").attr("data-max",o.sliderLimit.peakMaxSpeed),n[3].data[0][0]>o.sliderLimit.rmsMaxSpeed?i.find("#rmsSpeedValue").attr("data-max",parseInt(n[3].data[0][0])):i.find("#rmsSpeedValue").attr("data-max",o.sliderLimit.rmsMaxSpeed),i.find("#trRatioSlider").slider("setValue",a),i.find("#peakSpeedSlider").slider("setValue",n[1].data[0][0]),i.find("#peakTorqueSlider").slider("setValue",n[1].data[0][1]),i.find("#rmsSpeedSlider").slider("setValue",n[3].data[0][0]),i.find("#rmsTorqueSlider").slider("setValue",n[3].data[0][1]),i.find("#peakSpeedValue").val(n[1].data[0][0]),i.find("#peakTorqueValue").val(n[1].data[0][1]),i.find("#rmsSpeedValue").val(n[3].data[0][0]),i.find("#rmsTorqueValue").val(n[3].data[0][1])}V(n),p()},m=function(a){var n=t.getData();switch(a){case"PeakSpeed":n[1].data[0][0]=o.peakPoints[0]=i.find("#peakSpeedSlider").slider("getValue"),o.defaultPeakSpeed=i.find("#peakSpeedSlider").slider("getValue"),i.find("#peakSpeedValue").val(e("#peakSpeedSlider").slider("getValue"));break;case"PeakTorque":n[1].data[0][1]=o.peakPoints[1]=i.find("#peakTorqueSlider").slider("getValue"),o.defaultPeakTorque=i.find("#peakTorqueSlider").slider("getValue"),i.find("#peakTorqueValue").val(e("#peakTorqueSlider").slider("getValue"));break;case"RmsSpeed":n[3].data[0][0]=o.rmsPoints[0]=i.find("#rmsSpeedSlider").slider("getValue"),o.defaultRmsSpeed=i.find("#rmsSpeedSlider").slider("getValue"),i.find("#rmsSpeedValue").val(e("#rmsSpeedSlider").slider("getValue"));break;case"RmsTorque":n[3].data[0][1]=o.rmsPoints[1]=i.find("#rmsTorqueSlider").slider("getValue"),o.defaultRmsTorque=i.find("#rmsTorqueSlider").slider("getValue"),i.find("#rmsTorqueValue").val(e("#rmsTorqueSlider").slider("getValue"));break;case"TransmissionRatio":var s=i.find("#trRatioSlider").slider("getValue"),n=t.getData();n[1].data[0][0]=o.peakPoints[0]=(o.defaultPeakSpeed*s).toFixed(2),n[1].data[0][1]=o.peakPoints[1]=(o.defaultPeakTorque/s).toFixed(2),n[3].data[0][0]=o.rmsPoints[0]=(o.defaultRmsSpeed*s).toFixed(2),n[3].data[0][1]=o.rmsPoints[1]=(o.defaultRmsTorque/s).toFixed(2),n[1].data[0][0]>o.sliderLimit.peakMaxSpeed?i.find("#peakSpeedSlider").slider("setAttribute","max",parseInt(n[1].data[0][0])):i.find("#peakSpeedSlider").slider("setAttribute","max",o.sliderLimit.peakMaxSpeed),n[3].data[0][0]>o.sliderLimit.rmsMaxSpeed?i.find("#rmsSpeedSlider").slider("setAttribute","max",parseInt(n[3].data[0][0])):i.find("#rmsSpeedSlider").slider("setAttribute","max",o.sliderLimit.rmsMaxSpeed),i.find("#peakSpeedSlider").slider("setValue",n[1].data[0][0]),i.find("#peakTorqueSlider").slider("setValue",n[1].data[0][1]),i.find("#rmsSpeedSlider").slider("setValue",n[3].data[0][0]),i.find("#rmsTorqueSlider").slider("setValue",n[3].data[0][1]),i.find("#trRatioValue").val(s),i.find("#peakSpeedValue").val(n[1].data[0][0]),i.find("#peakTorqueValue").val(n[1].data[0][1]),i.find("#rmsSpeedValue").val(n[3].data[0][0]),i.find("#rmsTorqueValue").val(n[3].data[0][1])}V(n),p()},v=function(a){var t=e('<div class="panel-body"></div>');a.append(t);var n=e('<div id="tsPointsPanelContainer"></div>');t.append(n);var s=e('<div id="sliderContainer" class="row"></div>');n.append(s);var r=e('<div class="col-xs-3 col-3 title"><span id="peakTorqueTitle">Peak Torque: </span></div>');s.append(r);var d=e('<div class="col-xs-4 col-4 slider-right-padding"><input id="peakTorqueSlider" data-slider-value="'+o.peakPoints[1]+'" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');s.append(d);var l=e('<div class="col-xs-5 col-5 slider-right-padding display-flex"> <div class="input-group spinner" data-trigger="spinner" id="peakTorqueSpinner"><input id="peakTorqueValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+o.sliderLimit.peakMaxTorque+'" data-min="0" data-step="0.1"  value="'+o.peakPoints[1]+'" data-rule="currency"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value"></label>&nbsp;&nbsp;Nm</div>');s.append(l);var p=d.find("#peakTorqueSlider").slider({min:0,max:o.sliderLimit.peakMaxTorque,step:.1}).on("change",function(){return d.find("#peakTorqueSlider").slider("getValue")<o.rmsPoints[1]?(d.find("#peakTorqueSlider").slider("setValue",u),I("Peak Torque can not be less than RMS Torque."),!1):(I(""),m("PeakTorque"),void(u=d.find("#peakTorqueSlider").slider("getValue")))});o.disableControls&&o.disableControls.peakTorqueSlider&&p.slider("disable");var u=d.find("#peakTorqueSlider").slider("getValue");i.find("#peakTorqueSpinner").spinner("changed",function(a,t,n){if(e(this).data("oldValue",n),t<o.rmsPoints[1])return i.find("#peakTorqueValue").val(e(this).data("oldValue")),I("Peak Torque can not be less than RMS Torque."),!1;I("");var s=parseInt(e(this).attr("data-min")),r=parseInt(e(this).attr("data-max")),l=e(this).val();return l>=s&&r>=l?(e(this).data("oldValue",e(this).val()),void c("PeakTorque",t)):void e(this).val(d.find("#peakTorqueSlider").slider("getValue"))}),o.disableControls&&o.disableControls.peakTorqueTextBox&&i.find("#peakTorqueValue").attr("disabled",!0);var v=e('<div id="sliderContainer" class="row"></div>');n.append(v);var f=e('<div class="col-xs-3 col-3 title"><span id="peakSpeedTitle">Peak Speed: </sapn></div>');v.append(f);var h=e('<div class="col-xs-4 col-4 slider-right-padding"><input id="peakSpeedSlider" data-slider-value="'+o.peakPoints[0]+'" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');v.append(h);var S=e('<div class="col-xs-5 col-5 slider-right-padding display-flex"> <div class="input-group spinner" data-trigger="spinner" id="peakSpeedSpinner"><input id="peakSpeedValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+o.sliderLimit.peakMaxSpeed+'" data-min="0" data-step="1"  value="'+o.peakPoints[0]+'" data-rule="currency"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value"></label>&nbsp;&nbsp;rad/sec</div>');v.append(S);var x=h.find("#peakSpeedSlider").slider({min:0,max:o.sliderLimit.peakMaxSpeed,step:1}).on("change",function(){return h.find("#peakSpeedSlider").slider("getValue")<o.rmsPoints[0]?(h.find("#peakSpeedSlider").slider("setValue",o.rmsPoints[0]),I("Peak Speed can not be less than RMS Speed."),!1):(I(""),void m("PeakSpeed"))});o.disableControls&&o.disableControls.peakSpeedSlider&&x.slider("disable"),i.find("#peakSpeedSpinner").spinner("changed",function(a,t,n){if(e(this).data("oldValue",n),t<o.rmsPoints[0])return console.log("$(this).data('oldValue'): ",e(this).data("oldValue")),i.find("#peakSpeedValue").val(e(this).data("oldValue")),I("Peak Speed can not be less than RMS Speed."),!1;I("");var s=parseInt(e(this).attr("data-min")),r=parseInt(e(this).attr("data-max")),d=e(this).val();return d>=s&&r>=d?(e(this).data("oldValue",e(this).val()),void c("PeakSpeed",a.target.value)):void e(this).val(h.find("#peakSpeedSlider").slider("getValue"))}),o.disableControls&&o.disableControls.peakSpeedTextBox&&i.find("#peakSpeedValue").attr("disabled",!0);var g=e('<div id="sliderContainer" class="row"></div>');n.append(g);var T=e('<div class="col-xs-3 col-3 title"><span id="rmsTorqueTitle">RMS Torque: </sapn></div>');g.append(T);var q=e('<div class="col-xs-4 col-4 slider-right-padding"><input id="rmsTorqueSlider" data-slider-value="'+o.rmsPoints[1]+'" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');g.append(q);var k=e('<div class="col-xs-5 col-5 slider-right-padding display-flex"> <div class="input-group spinner" data-trigger="spinner" id="rmsTorqueSpinner"><input id="rmsTorqueValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+o.sliderLimit.rmsMaxTorque+'" data-min="0" data-step="0.1"  value="'+o.rmsPoints[1]+'" data-rule="currency"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value"></label>&nbsp;&nbsp;Nm</div>');g.append(k);var b=q.find("#rmsTorqueSlider").slider({min:0,max:o.sliderLimit.rmsMaxTorque,step:.1}).on("change",function(){return q.find("#rmsTorqueSlider").slider("getValue")>o.peakPoints[1]?(q.find("#rmsTorqueSlider").slider("setValue",o.peakPoints[1]),I("RMS Torque can not be greater than Peak Torque."),!1):(I(""),void m("RmsTorque"))});o.disableControls&&o.disableControls.rmsTorqueSlider&&b.slider("disable"),i.find("#rmsTorqueSpinner").spinner("changed",function(a,t,n){if(e(this).data("oldValue",n),t>o.peakPoints[1])return i.find("#rmsTorqueValue").val(e(this).data("oldValue")),I("RMS Torque can not be greater than Peak Torque."),!1;I("");var s=parseInt(e(this).attr("data-min")),r=parseInt(e(this).attr("data-max")),d=e(this).val();return d>=s&&r>=d?(e(this).data("oldValue",e(this).val()),void c("RmsTorque",a.target.value)):void e(this).val(q.find("#rmsTorqueSlider").slider("getValue"))}),o.disableControls&&o.disableControls.rmsTorqueTextBox&&i.find("#rmsTorqueValue").attr("disabled",!0);var P=e('<div id="sliderContainer" class="row"></div>');n.append(P);var C=e('<div class="col-xs-3 col-3 title"><span id="rmsSpeedTitle">RMS Speed: </span></div>');P.append(C);var V=e('<div class="col-xs-4 col-4 slider-right-padding"><input id="rmsSpeedSlider" data-slider-value="'+o.rmsPoints[0]+'" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');P.append(V);var y=e('<div class="col-xs-5 col-5 slider-right-padding display-flex"> <div class="input-group spinner" data-trigger="spinner" id="rmsSpeedSpinner"><input id="rmsSpeedValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+o.sliderLimit.rmsMaxSpeed+'" data-min="0" data-step="1"  value="'+o.rmsPoints[0]+'" data-rule="currency"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value"></label>&nbsp;&nbsp;rad/sec</div>');P.append(y);var w=V.find("#rmsSpeedSlider").slider({min:0,max:o.sliderLimit.rmsMaxSpeed,step:1}).on("change",function(){return V.find("#rmsSpeedSlider").slider("getValue")>o.peakPoints[0]?(V.find("#rmsSpeedSlider").slider("setValue",o.peakPoints[0]),void I("RMS Speed can not be greater than Peak Speed.")):(I(""),void m("RmsSpeed"))});if(o.disableControls&&o.disableControls.rmsSpeedSlider&&w.slider("disable"),i.find("#rmsSpeedSpinner").spinner("changed",function(a,t,n){if(e(this).data("oldValue",n),t>o.peakPoints[0])return i.find("#rmsSpeedValue").val(e(this).data("oldValue")),void I("RMS Speed can not be greater than Peak Speed.");I("");var s=parseInt(e(this).attr("data-min")),r=parseInt(e(this).attr("data-max")),d=e(this).val();return d>=s&&r>=d?(e(this).data("oldValue",e(this).val()),void c("RmsSpeed",t)):void e(this).val(V.find("#rmsSpeedSlider").slider("getValue"))}),o.disableControls&&o.disableControls.rmsSpeedTextBox&&i.find("#rmsSpeedValue").attr("disabled",!0),o.showMotorTsCurve){var M=e('<div id="sliderContainer" class="row"></div>');n.append(M)}n.append('<div id="alertMessageContainer" class="alert alert-warning"><strong>Warning:-&nbsp;&nbsp;</strong><span></span></div>');var I=function(e){return""===e?void n.find("#alertMessageContainer").hide():(n.find("#alertMessageContainer").show(),void n.find("#alertMessageContainer span").text(e))}},f=function(a){var t=e('<div class="panel panel-default"></div>');a.append(t);var i=e('<div class="panel-heading" role="tab" id="headingThree"> <h4 class="panel-title"> <a role="button"  data-parent="#accordion'+o.uniqeId+'" data-toggle="collapse"  href="#collapseThree'+o.uniqeId+'" aria-controls="collapseThree" aria-expanded="false"><span> Environmental Factors</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');t.append(i);var n=e('<div id="collapseThree'+o.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree"></div>');t.append(n);var s=e('<div class="panel-body"></div>');n.append(s),t.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),t.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),h(s)},h=function(a){var s=e('<div id="envFactorsPanelContainer"></div>');a.append(s);var r=e('<div id="sliderContainer" class="row"></div>');s.append(r);var d=e('<div class="col-xs-3 col-3 title"><span id="tempTitle">Temperature: </span></div>');r.append(d);var l=e('<div class="col-xs-4 col-4 slider-right-padding"><input id="tempSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');r.append(l);var u=o.sliderLimit.maxTemp||n.sliderLimit.maxTemp,c=e('<div class="col-xs-5 col-5 slider-right-padding display-flex"> <div class="input-group spinner" data-trigger="spinner" id="tempValueSpinner"><input id="tempValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+u+'" data-min="0" data-step="1"  value="'+o.motorData[o.motorSelectedIndex].temp+'" data-rule="percent"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value"></label>&nbsp;&nbsp;&#176;C</div>');r.append(c),o.defaultPeakStallTorque=o.motorData[o.motorSelectedIndex].peakStallTorque,o.defaultRollOffPoint=o.motorData[o.motorSelectedIndex].rollOffPoint,o.defaultRollOffSpeed=o.motorData[o.motorSelectedIndex].rollOffSpeed,o.defaultPeakTorqueAtMaxSpeed=o.motorData[o.motorSelectedIndex].peakTorqueAtMaxSpeed,o.defaultContinuousStallTorque=o.motorData[o.motorSelectedIndex].continuousStallTorque,o.defaultContinuosTorqueAtMaxSpeed=o.motorData[o.motorSelectedIndex].continuosTorqueAtMaxSpeed,r.find("#tempSlider").slider({value:o.motorData[o.motorSelectedIndex].temp,min:0,max:u,step:1}).on("change",function(e){i.find("#tempValue").val(e.value.newValue);var a=e.value.newValue-e.value.oldValue;0!==a&&(m("peakPlot",e.value.newValue),m("rmsPlot",e.value.newValue))}),o.disableControls&&o.disableControls.tempSlider&&r.find("#tempSlider").slider("disable"),i.find("#tempValueSpinner").spinner("changed",function(e,a,t){i.find("#tempSlider").slider("setValue",parseInt(a)),m("peakPlot",parseInt(a)),m("rmsPlot",parseInt(a))}),o.disableControls&&o.disableControls.tempTextBox&&i.find("#tempValue").attr("disabled",!0);var m=function(e,a){var i=t.getData(),n=a,s=40,r=155,d=25,l=n+.6*(r-n),u=s+.6*(r-s),c=-.0015,m=1-(n-s)/(r-s),v=(d+234.5)/(u+234.5),f=1+(l-u)*c;switch(e){case"peakPlot":for(var h=i[0].data,S=0;S<h.length;S++)void 0!=o.motorData[o.motorSelectedIndex]&&(0!=S&&12!=S&&6!=S||(h[S][1]=o.defaultPeakStallTorque*f,0==S&&(o.motorData[o.motorSelectedIndex].peakStallTorque=h[S][1]),6==S&&(h[S][1]=-h[S][1])),1!=S&&7!=S||(h[S][1]=o.defaultRollOffPoint*f,h[S][0]=o.defaultRollOffSpeed/f,o.motorData[o.motorSelectedIndex].rollOffPoint=h[S][1],o.motorData[o.motorSelectedIndex].rollOffSpeed=h[S][0],7==S&&(h[S][0]=-h[S][0],h[S][1]=-h[S][1])),2!=S&&8!=S||(h[S][1]=o.defaultPeakTorqueAtMaxSpeed*f,o.motorData[o.motorSelectedIndex].peakTorqueAtMaxSpeed=h[S][1],8==S&&(h[S][1]=-h[S][1])));i[0].data=h;break;case"rmsPlot":for(var x=i[2].data,S=0;S<x.length;S++)void 0!=o.motorData[o.motorSelectedIndex]&&(0!=S&&10!=S&&5!=S||(x[S][1]=o.defaultContinuousStallTorque*(f*Math.sqrt(m/v)),o.motorData[o.motorSelectedIndex].continuousStallTorque=x[S][1],5==S&&(x[S][1]=-x[S][1])),1!=S&&6!=S||(x[S][1]=o.defaultContinuosTorqueAtMaxSpeed*(f*Math.sqrt(m/v)),o.motorData[o.motorSelectedIndex].continuosTorqueAtMaxSpeed=x[S][1],6==S&&(x[S][1]=-x[S][1])));i[2].data=x}V(i),p()},v=e('<div id="sliderContainer" class="row"></div>');s.append(v);var f=e('<div class="col-xs-3 col-3 title"><span id="altitudeTitle">Altitude: </span></div>');v.append(f);var h=e('<div class="col-xs-4 col-4 slider-right-padding"><input id="altitudeSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');v.append(h);var u=o.sliderLimit.maxAltitude||n.sliderLimit.maxAltitude,S=e('<div class="col-xs-5 col-5 slider-right-padding display-flex"> <div class="input-group spinner" data-trigger="spinner" id="altitudeSpinner"><input id="altitudeValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+u+'" data-min="0" data-step="1"  value="'+o.motorData[o.motorSelectedIndex].altitude+'" data-rule="currency"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value"></label>&nbsp;&nbsp;m</div>');v.append(S),o.defaultContinuousStallTorque=o.motorData[o.motorSelectedIndex].continuousStallTorque,o.defaultContinuosTorqueAtMaxSpeed=o.motorData[o.motorSelectedIndex].continuosTorqueAtMaxSpeed,h.find("#altitudeSlider").slider({value:o.motorData[o.motorSelectedIndex].altitude,min:0,max:1e4,step:1}).on("change",function(e){i.find("#altitudeValue").val(e.value.newValue);var a=t.getData(),n=a[2].data;if(e.value.newValue>1500){var s=[1-(e.value.newValue-1500)/1e4];n[0][1]=n[10][1]=(o.defaultContinuousStallTorque*s).toFixed(3),n[1][1]=(o.defaultContinuosTorqueAtMaxSpeed*s).toFixed(3),a[2].data=n,o.motorData[o.motorSelectedIndex].continuousStallTorque=n[0][1],o.motorData[o.motorSelectedIndex].continuosTorqueAtMaxSpeed=n[1][1]}else{var s=1;n[0][1]=n[10][1]=(o.defaultContinuousStallTorque*s).toFixed(3),n[1][1]=(o.defaultContinuosTorqueAtMaxSpeed*s).toFixed(3),a[2].data=n,o.motorData[o.motorSelectedIndex].continuousStallTorque=n[0][1],o.motorData[o.motorSelectedIndex].continuosTorqueAtMaxSpeed=n[1][1]}V(a),p()}),o.disableControls&&o.disableControls.altitudeSlider&&h.find("#altitudeSlider").slider("disable"),i.find("#altitudeSpinner").spinner("changed",function(e,a,n){var s=parseInt(a),r=t.getData(),d=r[2].data;if(i.find("#altitudeSlider").slider("setValue",s),s>1500){var l=[1-(s-1500)/1e4];d[0][1]=d[10][1]=(o.defaultContinuousStallTorque*l).toFixed(3),d[1][1]=(o.defaultContinuosTorqueAtMaxSpeed*l).toFixed(3),r[2].data=d,o.motorData[o.motorSelectedIndex].continuousStallTorque=d[0][1],o.motorData[o.motorSelectedIndex].continuosTorqueAtMaxSpeed=d[1][1]}else{var l=1;d[0][1]=d[10][1]=(o.defaultContinuousStallTorque*l).toFixed(3),d[1][1]=(o.defaultContinuosTorqueAtMaxSpeed*l).toFixed(3),r[2].data=d,o.motorData[o.motorSelectedIndex].continuousStallTorque=d[0][1],o.motorData[o.motorSelectedIndex].continuosTorqueAtMaxSpeed=d[1][1]}V(r),p()}),o.disableControls&&o.disableControls.transmRatioTextBox&&i.find("#altitudeValue").attr("disabled",!0)},S=function(a){var t=e('<div class="panel panel-default"></div>');a.append(t);var i=e('<div class="panel-heading" role="tab" id="headingFour"> <h4 class="panel-title"> <a role="button"   data-parent="#accordion'+o.uniqeId+'"  data-toggle="collapse"  href="#collapseFour'+o.uniqeId+'" aria-controls="collapseFour" aria-expanded="false"><span> Transmission Ratio</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');t.append(i);var n=e('<div id="collapseFour'+o.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour"></div>');t.append(n);var s=e('<div class="panel-body"></div>');n.append(s),t.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),t.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),x(s)},x=function(a){var t=e('<div id="transmissionRatioPanelContainer"></div>');a.append(t);var s=e('<div id="sliderContainer" class="row"></div>');t.append(s);
var r=e('<div class="col-xs-3 col-3 title"><span id="trRatioTitle">Transmission Ratio: </span></div>');s.append(r);var d=e('<div class="col-xs-4 col-4 slider-right-padding" ><input id="trRatioSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');s.append(d);var l=e('<div class="col-xs-5 col-5 slider-right-padding display-flex"> <div class="input-group spinner" data-trigger="spinner" id="trRatioSpinner"><input id="trRatioValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+o.sliderLimit.maxTrRatio+'" data-min="1" data-step="1"  value="'+o.transmissionRaioVal+'" data-rule="quantity"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label class="value"></label>&nbsp;: 1</div>');s.append(l),o.defaultRmsTorque=o.rmsPoints[1],o.defaultRmsSpeed=o.rmsPoints[0],o.defaultPeakTorque=o.peakPoints[1],o.defaultPeakSpeed=o.peakPoints[0],d.find("#trRatioSlider").slider({min:1,value:1,max:o.sliderLimit.maxTrRatio||n.sliderLimit.maxTrRatio,step:1}).on("change",function(){m("TransmissionRatio")}),o.disableControls&&o.disableControls.transmRatioSlider&&d.find("#trRatioSlider").slider("disable"),i.find("#trRatioSpinner").spinner("changed",function(e,a,t){c("TransmissionRatio",a)}),o.disableControls&&o.disableControls.transmRatioTextBox&&i.find("#trRatioValue").attr("disabled",!0)},g=function(a){var t=e('<div class="tsPlotContainer"></div>');a.append(t);var i=e('<div class="tsPlotArea"></div>');t.append(i),T()},T=function(){var e=[],a={colors:[o.graphLineColor.peakTSCurve,o.graphLineColor.peakTSCurve,o.graphLineColor.contionusTSCurve,o.graphLineColor.contionusTSCurve],series:{points:{show:!0}},legend:{backgroundOpacity:0},coordinate:{type:"rectangular"},axisLabels:{show:!0},xaxis:{axisLabel:"Speed (rad/sec)"},yaxis:{axisLabel:"Torque (N-m)"},grid:{hoverable:!0,clickable:!0,borderWidth:1,borderColor:"#D9D9D9",margin:0,markings:[{yaxis:{from:0,to:0},color:"#333"},{xaxis:{from:0,to:0},color:"#333"}]},tooltip:!0,tooltipOpts:{cssClass:"tsCurveFlotTip",content:function(e,a,t,i){var n="";switch(i.seriesIndex){case 0:switch(i.dataIndex){case 0:n="Peak Stall Torque <br />";break;case 1:n="Roll Off Point<br />";break;case 2:n="Peak Torque at Max Speed <br />";break;case 3:n="Max Speed at Zero Torque <br />"}break;case 1:n="Peak T/S Point <br />";break;case 2:switch(i.dataIndex){case 0:n="Continuous Stall Torque <br />";break;case 1:n="Continuous Stall Torque at Max Speed <br />";break;case 2:n="Max Speed Point <br />"}break;case 3:n="RMS T/S Point <br />"}return n+"Speed: "+a+", Torque: "+t},defaultTheme:!1,shifts:{x:0,y:20}}};1==o.quadrant&&(a.xaxis.min=0,a.yaxis.min=0);var i=[],n=[],s=[],r=[],d=[],l=[],p=[],u=[],c=function(){i=[],n=[],s=[],r=[],d=[],l=[],p=[],u=[]},m=function(e){var a=e.maxSpeed;d=[[0,e.peakStallTorque],[e.rollOffSpeed,e.rollOffPoint],[a,e.peakTorqueAtMaxSpeed],[a,0]],p=[[0,e.continuousStallTorque],[a,e.continuosTorqueAtMaxSpeed],[a,0]]},v=function(e){var a=-1*e.maxSpeed;l=[[a,0],[a+1,e.peakStallTorque]],u=[[a,0],[a+1,e.continuousStallTorque]]},f=function(e){i=i.concat(d),n=n.concat(p)},h=function(e){var a=[],t=[];l.length>0&&l.forEach(function(e,t,i){var n=[];n[0]=-1*e[0],n[1]=-1*e[1],a[t]=n}),i=i.concat(a),u.length>0&&u.forEach(function(e,a,i){var n=[];n[0]=-1*e[0],n[1]=-1*e[1],t[a]=n}),n=n.concat(t)},S=function(e){var a=[],t=[];d.length>0&&d.forEach(function(e,t,i){var n=[];n[0]=-1*e[0],n[1]=-1*e[1],a[t]=n}),i=i.concat(a),p.length>0&&p.forEach(function(e,a,i){var n=[];n[0]=-1*e[0],n[1]=-1*e[1],t[a]=n}),n=n.concat(t)},x=function(e){i=i.concat(l),n=n.concat(u)},g=function(e){i.push([0,e.peakStallTorque]),n.push([0,e.continuousStallTorque])},T=function(e){var a=e.temp,t=40,i=155,n=25,o=a+.6*(i-a),s=t+.6*(i-t),r=-.0015,d=1-(a-t)/(i-t),l=(n+234.5)/(s+234.5),p=1+(o-s)*r;return e.peakStallTorque=(e.peakStallTorque*p).toFixed(2),e.rollOffPoint=(e.rollOffPoint*p).toFixed(2),e.rollOffSpeed=(e.rollOffSpeed/p).toFixed(2),e.continuousStallTorque=(e.continuousStallTorque*(p*Math.sqrt(d/l))).toFixed(2),e.continuosTorqueAtMaxSpeed=(e.continuosTorqueAtMaxSpeed*(p*Math.sqrt(d/l))).toFixed(2),e},q=function(e){f(e),h(e),S(e),x(e),g(e)},k=function(e){if(c(),"0"==o.firstTimeCall){var a=T(e);m(a),v(a),q(a)}else m(e),v(e),q(e)};o.showMotorTsCurve&&k(o.motorData[o.motorSelectedIndex]),o.showApplicationPoints&&(s.push(o.peakPoints),r.push(o.rmsPoints)),e.push({data:i,label:"Peak T-S Curve",lines:{lineWidth:2,show:!0}},{data:s,label:"",points:{show:!0,fillColor:o.graphLineColor.peakTSCurve,radius:4}},{data:n,label:"Continous T-S Curve",lines:{lineWidth:2,show:!0}},{data:r,label:"",points:{show:!0,fillColor:o.graphLineColor.contionusTSCurve,radius:4}}),t?V(e,a):P(e,a)},q=function(e){function a(e,a,t,i){var o=!1,s=(a[1]-e[1])/(a[0]-e[0]),r=e[1]-s*e[0],d=-1,l=s*t[0]-t[1]+r;if(o=0==l||l>0&&0>d||0>l&&d>0,i){var p=t[0]*t[1],v=t[0]*(s*t[0]+r),f=100*p/v;m.push(f)}else{var h=100*t[1]/(s*t[0]+r),S=100*t[0]/n.maxSpeed;u.push(h),c.push(S)}return o}function t(e){var a=100*e[1]/n.peakStallTorque,t=100*e[0]/n.maxSpeed;u.push(a),c.push(t)}function i(e){var a=e[0]*e[1],t=e[0]*n.continuousStallTorque,i=100*a/t;m.push(i)}var n=e,s=o.peakPoints,r=o.rmsPoints,d={PeakStallPoint:{x:0,y:n.peakStallTorque},RollOffPoint:{x:n.rollOffSpeed,y:n.rollOffPoint},PeakTarqueAtMaxSpeedPoint:{x:n.maxSpeed,y:n.peakTorqueAtMaxSpeed},ContinuousStallTorquePoint:{x:0,y:n.continuousStallTorque},ContinuousStallTorqueMaxSpeedPoint:{x:n.maxSpeed,y:n.continuosTorqueAtMaxSpeed}},l=0,p=null,u=[],c=[],m=[],v=null,f=null,h=null,S={status:p,torqueUtilization:v,speedUtilization:f,avgPower:h},x=r[0],g=r[1],T=s[0],q=s[1],k=!1,b=!1,P=null,C=null,V=null;return x<=n.maxSpeed?(P=[d.ContinuousStallTorquePoint.x,d.ContinuousStallTorquePoint.y],C=[d.ContinuousStallTorqueMaxSpeedPoint.x,d.ContinuousStallTorqueMaxSpeedPoint.y],V=[x,g],b=a(P,C,V,!0)):(l=-1,i([x,g])),q<=n.peakStallTorque&&T<=n.maxSpeed?T<=d.RollOffPoint.x?(P=[d.PeakStallPoint.x,d.PeakStallPoint.y],C=[d.RollOffPoint.x,d.RollOffPoint.y],V=[T,q],k=a(P,C,V,!1)):(P=[d.RollOffPoint.x,d.RollOffPoint.y],C=[d.PeakTarqueAtMaxSpeedPoint.x,d.PeakTarqueAtMaxSpeedPoint.y],V=[T,q],k=a(P,C,V,!1)):(l=-1,t([T,q])),-1!=l&&0!=k&&0!=b||(l=-1),-1==l?S.status=!1:0==l&&(S.status=!0),S.torqueUtilization=Math.max.apply(Math,u),S.speedUtilization=Math.max.apply(Math,c),S.avgPower=Math.max.apply(Math,m),S},k=function(){var e=t.getAxes();if(o.showMotorTsCurve){var a=Math.max(o.peakPoints[1]+1,o.rmsPoints[1]+1,35);e.yaxis.datamax<a?t.getOptions().yaxes[0].max=a:t.getOptions().yaxes[0].max=e.yaxis.datamax+30}if(!o.showMotorTsCurve){var i=Math.max(o.peakPoints[0]+50,o.rmsPoints[0]+50,200),a=Math.max(o.peakPoints[1]+10,o.rmsPoints[1]+10,50);t.getOptions().yaxes[0].max=a,t.getOptions().xaxes[0].max=i,4===o.quadrant&&(t.getOptions().yaxes[0].min=-1*a,t.getOptions().xaxes[0].min=-1*i)}},b=function(){4==o.quadrant?(t.getOptions().grid.markings[0].color="#bdbdbd",t.getOptions().grid.markings[1].color="#bdbdbd"):(t.getOptions().grid.markings[0].color="#333",t.getOptions().grid.markings[1].color="#333"),k(),t.setupGrid(),t.draw()},P=function(a,n){setTimeout(function(){t=e.plot(i.find(".tsPlotArea"),a,n),b(),C()},0)},C=function(){i.find(".tsCruveContainer").resize(function(a){var t=e(this);t.width()<777?(t.find("#servoMotorArea").addClass("resizeWidth"),t.find("#servoMotorTSCurve").addClass("resizeWidth"),t.find(".tsPlotArea").css("min-height",t.find(".tsPlotArea").width())):t.width()>777&&(t.find("#servoMotorArea").removeClass("resizeWidth"),t.find("#servoMotorTSCurve").removeClass("resizeWidth"),t.find(".tsPlotArea").css("min-height",t.find(".tsPlotArea").width()),console.log("Resized greater 777",t.find(".tsPlotArea").width()))})},V=function(e,a){a&&(void 0!=a.xaxis.min&&void 0!=a.yaxis.min?(t.getOptions().yaxes[0].min=a.yaxis.min,t.getOptions().xaxes[0].min=a.xaxis.min):(t.getOptions().yaxes[0].min=null,t.getOptions().xaxes[0].min=null)),t.setData(e),b(),y()},y=function(){o.assessmentMode&&o.assessmentCallback&&o.assessmentCallback({peakTorque:{value:i.find("#peakTorqueValue").val(),unit:"Nm"},peakSpeed:{value:i.find("#peakSpeedValue").val(),unit:"rad/sec"},rmsTorque:{value:i.find("#rmsTorqueValue").val(),unit:"Nm"},rmsSpeed:{value:i.find("#rmsSpeedValue").val(),unit:"rad/sec"},temperature:{value:i.find("#tempValue").val(),unit:"C"},altitude:{value:i.find("#altitudeValue").val(),unit:"m"},transmissionRatio:{value:i.find("#trRatioValue").val(),unit:""},motorSelectedIndex:{value:o.motorSelectedIndex,unit:""}})},w=function(e){e.peakTorque&&(i.find("#peakTorqueSlider").slider("setValue",e.peakTorque.value),i.find("#peakTorqueValue").val(e.peakTorque.value),m("PeakTorque")),e.peakSpeed&&(i.find("#peakSpeedSlider").slider("setValue",e.peakSpeed.value),i.find("#peakSpeedValue").val(e.peakSpeed.value),m("PeakSpeed")),e.rmsTorque&&(i.find("#rmsTorqueSlider").slider("setValue",e.rmsTorque.value),i.find("#rmsTorqueValue").val(e.rmsTorque.value),m("RmsTorque")),e.rmsSpeed&&(i.find("#rmsSpeedSlider").slider("setValue",e.rmsSpeed.value),i.find("#rmsSpeedValue").val(e.rmsSpeed.value),m("RmsSpeed")),e.temperature&&(i.find("#tempSlider").slider("setValue",e.temperature.value),i.find("#tempValue").val(e.temperature.value),m("Temperature")),e.altitude&&(i.find("#altitudeSlider").slider("setValue",e.altitude.value),i.find("#altitudeValue").val(e.altitude.value),m("Altitude")),e.transmissionRatio&&(i.find("#trRatioSlider").slider("setValue",e.transmissionRatio.value),i.find("#trRatioValue").val(e.transmissionRatio.value),m("TransmissionRatio")),e.motorSelectedIndex&&i.find("#solutionSliderId").slider("setValue",parseInt(e.motorSelectedIndex.value))},M=function(e){var a;e.peakTorque&&(a=e.peakTorque.status?"correct":"incorrect",i.find("#peakTorqueValue").addClass(a)),e.peakSpeed&&(a=e.peakSpeed.status?"correct":"incorrect",i.find("#peakSpeedValue").addClass(a)),e.rmsTorque&&(a=e.rmsTorque.status?"correct":"incorrect",i.find("#rmsTorqueValue").addClass(a)),e.rmsSpeed&&(a=e.rmsSpeed.status?"correct":"incorrect",i.find("#rmsSpeedValue").addClass(a)),e.temperature&&(a=e.temperature.status?"correct":"incorrect",i.find("#tempValue").addClass(a)),e.altitude&&(a=e.altitude.status?"correct":"incorrect",i.find("#altitudeValue").addClass(a)),e.transmissionRatio&&(a=e.transmissionRatio.status?"correct":"incorrect",i.find("#trRatioValue").addClass(a))};return s(),{ref:this,updateInputs:w,markAnswers:M}}}(jQuery);