"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("jquery")):e(jQuery)}(function(e){var a,o,t=function n(a,o){return this.$el=a,this.options=e.extend({},n.rules.defaults,n.rules[o.rule]||{},o),this.min=Number(this.options.min)||0,this.max=Number(this.options.max)||0,this.$el.on({"focus.spinner":e.proxy(function(a){a.preventDefault(),e(document).trigger("mouseup.spinner"),this.oldValue=this.value()},this),"change.spinner":e.proxy(function(e){e.preventDefault(),this.value(this.$el.val())},this),"keydown.spinner":e.proxy(function(e){var a={38:"up",40:"down"}[e.which];a&&(e.preventDefault(),this.spin(a))},this)}),this.oldValue=this.value(),this.value(this.$el.val()),this};t.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:null,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},t.prototype={spin:function(a){if(!this.$el.prop("disabled")){this.oldValue=this.value();var o=e.isFunction(this.options.step)?this.options.step.call(this,a):this.options.step,t="up"===a?1:-1;this.value(this.oldValue+Number(o)*t)}},value:function(t){if(null===t||void 0===t)return this.numeric(this.$el.val());t=this.numeric(t);var i=this.validate(t);0!==i&&(t=-1===i?this.min:this.max),this.$el.val(t.toFixed(this.options.precision)),this.$el.trigger("changing.spinner",[this.value(),this.oldValue]),clearTimeout(a),a=setTimeout(e.proxy(function(){this.$el.trigger("changed.spinner",[this.value(),this.oldValue])},this),o.delay)},numeric:function(e){return e=this.options.precision>0?parseFloat(e,10):parseInt(e,10),isFinite(e)?e:e||this.options.min||0},validate:function(e){return null!==this.options.min&&e<this.min?-1:null!==this.options.max&&e>this.max?1:0}},o=function(a,o){this.$el=e(a),this.$spinning=this.$el.find('[data-spin="spinner"]'),0===this.$spinning.length&&(this.$spinning=this.$el.find(':input[type="text"]')),o=e.extend({},o,this.$spinning.data()),this.spinning=new t(this.$spinning,o),this.$el.on("click.spinner",'[data-spin="up"], [data-spin="down"]',e.proxy(this,"spin")).on("mousedown.spinner",'[data-spin="up"], [data-spin="down"]',e.proxy(this,"spin")),e(document).on("mouseup.spinner",e.proxy(function(){clearTimeout(this.spinTimeout),clearInterval(this.spinInterval)},this)),o.delay&&this.delay(o.delay),o.changed&&this.changed(o.changed),o.changing&&this.changing(o.changing)},o.delay=500,o.prototype={constructor:o,spin:function(a){var o=e(a.currentTarget).data("spin");switch(a.type){case"click":a.preventDefault(),this.spinning.spin(o);break;case"mousedown":1===a.which&&(this.spinTimeout=setTimeout(e.proxy(this,"beginSpin",o),300))}},delay:function r(e){var r=Number(e);r>=0&&(this.constructor.delay=r+100)},value:function(){return this.spinning.value()},changed:function(e){this.bindHandler("changed.spinner",e)},changing:function(e){this.bindHandler("changing.spinner",e)},bindHandler:function(a,o){e.isFunction(o)?this.$spinning.on(a,o):this.$spinning.off(a)},beginSpin:function(a){this.spinInterval=setInterval(e.proxy(this.spinning,"spin",a),100)}};var i=e.fn.spinner;return e.fn.spinner=function(a,t){return this.each(function(){var i=e.data(this,"spinner");i||(i=new o(this,a),e.data(this,"spinner",i)),"delay"===a||"changed"===a||"changing"===a?i[a](t):"step"===a&&t?i.spinning.step=t:"spin"===a&&t&&i.spinning.spin(t)})},e.fn.spinner.Constructor=o,e.fn.spinner.noConflict=function(){return e.fn.spinner=i,this},e(function(){e('[data-trigger="spinner"]').spinner()}),e.fn.spinner}),function(e){e.fn.TSCurve=function(a){function o(e){var e=e-1;i.find("#driveNameId").text(r.motorData[e].maxSpeed+" rpm"),i.find("#motorNameId").text(r.motorData[e].motorPartNo),i.find("#voltageInfoId").text(r.motorData[e].motorInertia),i.find("#peakStallTorque").text(r.motorData[e].peakStallTorque+" N-m"),i.find("#continuousStallTorque").text(r.motorData[e].continuousStallTorque+" N-m"),i.find("#solutionTitle").text("Selected Soultion: # "+(e+1)),r.motorSelectedIndex=e,r.motorInertia=r.motorData[e].motorInertia,i.find("#tempSlider").slider("setValue",r.motorData[r.motorSelectedIndex].temp),i.find("#tempValue").val(r.motorData[r.motorSelectedIndex].temp),i.find("#altitudeSlider").slider("setValue",r.motorData[r.motorSelectedIndex].altitude),i.find("#altitudeValue").val(r.motorData[r.motorSelectedIndex].altitude),r.defaultPeakStallTorque=r.motorData[r.motorSelectedIndex].peakStallTorque,r.defaultRollOffPoint=r.motorData[r.motorSelectedIndex].rollOffPoint,r.defaultRollOffSpeed=r.motorData[r.motorSelectedIndex].rollOffSpeed,r.defaultPeakTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].peakTorqueAtMaxSpeed,r.defaultContinuousStallTorque=r.motorData[r.motorSelectedIndex].continuousStallTorque,r.defaultContinuosTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed,r.motorSelectedIndex=e,r.peakMotorData=[],r.rmsMotorData=[],r.peakAcceMotor=r.peakAcceData*r.transmissionRaioVal,r.peakMotorData[0]=r.peakPoints[0]*r.transmissionRaioVal,r.peakMotorData[1]=parseFloat(r.peakPoints[1])/r.transmissionRaioVal+r.peakAcceMotor*r.motorInertia,r.rmsAcceMotor=r.rmsAcceData*r.transmissionRaioVal,r.rmsMotorData[0]=r.peakMotorData[0],r.rmsMotorData[1]=parseFloat(r.rmsPoints[1])/r.transmissionRaioVal+r.rmsAcceMotor*r.motorInertia,i.find(".cosmatt-unitComboBox").length>0&&(i.find(".peakTorqueMotorSide").find(".cosmatt-unitComboBox")&&i.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[1]),i.find(".rmsTorqueMotorSide").find(".cosmatt-unitComboBox")&&i.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsMotorData[1]),i.find(".peakSpeedMotorSide").find(".cosmatt-unitComboBox")&&i.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[0]),i.find(".rmsAccelerationMotorSide").find(".cosmatt-unitComboBox")&&i.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsAcceMotor),i.find(".peakAccelerationMotorSide").find(".cosmatt-unitComboBox")&&i.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.peakAcceMotor)),q(),m()}var t,i=e(this),n={showApplicationPoints:!1,motorSelectedIndex:3,rmsPoints:[190,44],peakPoints:[400,60],quadrant:1,sliderLimit:{peakMaxSpeed:800,peakMaxTorque:100,rmsMaxSpeed:800,rmsMaxTorque:100,maxTemp:125,maxAltitude:1e4,maxVoltage:10,maxTrRatio:100},showQuadrantToggle:!0,showMotorTsCurve:!0,showMotorSelForm:!0,showAppPointsForm:!0,showEnviorForm:!0,showTransmissionForm:!0,uniqeId:"1",firstTimeCall:"0",motorData:[{motorPartNo:"CPB-1-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:1,peakStallTorque:2.7,rollOffPoint:2.7,peakTorqueAtMaxSpeed:1.8,continuosTorqueAtMaxSpeed:.72,rollOffSpeed:3200,maxSpeed:4500,temp:40,altitude:1,motorInertia:1e-5},{motorPartNo:"CPB-1-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:1.7,peakStallTorque:4.4,rollOffPoint:4.4,peakTorqueAtMaxSpeed:2.4,continuosTorqueAtMaxSpeed:1.302,rollOffSpeed:3300,maxSpeed:5e3,temp:40,altitude:1,motorInertia:15e-6},{motorPartNo:"CPB-1-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:2.3,peakStallTorque:7.5,rollOffPoint:7.5,peakTorqueAtMaxSpeed:4.2,continuosTorqueAtMaxSpeed:1.71,rollOffSpeed:3100,maxSpeed:4500,temp:40,altitude:1,motorInertia:25e-6},{motorPartNo:"CPB-2-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:2,peakStallTorque:3.8,rollOffPoint:3.8,peakTorqueAtMaxSpeed:2,continuosTorqueAtMaxSpeed:1.7,rollOffSpeed:4e3,maxSpeed:6e3,temp:40,altitude:1,motorInertia:65e-6},{motorPartNo:"CPB-2-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:3.4,peakStallTorque:7.8,rollOffPoint:7.8,peakTorqueAtMaxSpeed:4,continuosTorqueAtMaxSpeed:3.09,rollOffSpeed:4400,maxSpeed:6e3,temp:40,altitude:1,motorInertia:8e-5},{motorPartNo:"CPB-2-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:4.2,peakStallTorque:11,rollOffPoint:11,peakTorqueAtMaxSpeed:6,continuosTorqueAtMaxSpeed:2.9,rollOffSpeed:3100,maxSpeed:5e3,temp:40,altitude:1,motorInertia:12e-5},{motorPartNo:"CPB-3-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:9,peakStallTorque:21,rollOffPoint:21,peakTorqueAtMaxSpeed:13,continuosTorqueAtMaxSpeed:6.3,rollOffSpeed:3200,maxSpeed:4e3,temp:40,altitude:1,motorInertia:4e-4},{motorPartNo:"CPB-3-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:10,peakStallTorque:29,rollOffPoint:29,peakTorqueAtMaxSpeed:16,continuosTorqueAtMaxSpeed:6.91,rollOffSpeed:2500,maxSpeed:3500,temp:40,altitude:1,motorInertia:6e-4},{motorPartNo:"CPB-4-01",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:20,peakStallTorque:50,rollOffPoint:50,peakTorqueAtMaxSpeed:25,continuosTorqueAtMaxSpeed:15.3,rollOffSpeed:1800,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0015},{motorPartNo:"CPB-4-02",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:25,peakStallTorque:68,rollOffPoint:68,peakTorqueAtMaxSpeed:30,continuosTorqueAtMaxSpeed:17.53,rollOffSpeed:1900,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0022},{motorPartNo:"CPB-4-03",drivePartNo:"CB-250",voltage:"480",continuousStallTorque:32,peakStallTorque:75,rollOffPoint:75,peakTorqueAtMaxSpeed:32,continuosTorqueAtMaxSpeed:22.8,rollOffSpeed:2100,maxSpeed:3e3,temp:40,altitude:1,motorInertia:.0029}]},r=e.extend({},n,a),s=function(){var a=e('<div class="tsCruveContainer row m-0"></div>');i.append(a),l(a)},l=function(a){var o=e('<div id="servoMotorTSCurve"></div>');if(a.append(o),r.showMotorSelForm||r.showAppPointsForm||r.showEnviorForm||r.showTransmissionForm){o.addClass("col-xs-6 col-6");var t=e('<div class="col-xs-6 col-6" id="servoMotorArea"></div>');a.append(t),d(t)}else o.addClass("col-xs-12 col-12"),i.find(".tsCruveContainer").addClass("widthMaxLimit");C(o)},d=function(a){var o=e('<div id="motorAreaAccordionContainer"></div>');a.append(o);var t=e('<div class="panel-group" id="accordion'+r.uniqeId+'" role="tablist" aria-multiselectable="true"></div>');o.append(t),r.showMotorTsCurve||(r.showMotorSelForm=!1),r.showMotorSelForm&&u(t),r.showApplicationPoints||(r.showAppPointsForm=!1),r.showAppPointsForm&&f(t),r.showEnviorForm&&S(t),r.showTransmissionForm&&T(t),m()},u=function(a){var t=e('<div class="panelNew panel-defaultNew"></div>');a.append(t);var i=e('<div class="panel-heading panelHeadingNew" role="tab" id="headingOne"> <div id="PaginationDiv" class="Pagination"></div><span class="accordion-plus-minus  pull-right" aria-hidden="true" style="color: grey;"></span> </div>');t.append(i);var n=e('<div id="collapseOne" class="panel-collapse collapse motorDataOpenPanle" role="tabpanel" aria-labelledby="headingOne"></div>');t.append(n);var s=e('<div class="panel-body"></div>');n.append(s),t.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),t.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")});var s=t.find("#collapseOne .panel-body"),l=e('<div id="motorDataContainer" class="row"></div>');s.append(l);var d=e('<div class="col-xs-12 col-12 solutionInfoTitle"><div id="solutionTitle"></div></div>');l.append(d),d.append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>');var u=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');l.append(u);var c=e('<div class="col-xs-6 col-6 maxSpeed"><span class="driveTitle">Maximum Speed:</span><span class="driveName" id="driveNameId">'+r.motorData[r.motorSelectedIndex].maxSpeed+"</span></div>");u.append(c);var m=e('<div class="col-xs-6 col-6"><span class="motorTitle">Motor:</span><span class="motorName" id="motorNameId">'+r.motorData[r.motorSelectedIndex].motorPartNo+"</span></div>");u.append(m);var f=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');l.append(f);var v=e('<div class="col-xs-6 col-6"><span class="voltageTitle">Peak Stall Torque:</span><span class="voltageName" id="peakStallTorque">'+r.motorData[r.motorSelectedIndex].peakStallTorque+" V</span></div>");f.append(v);var x=e('<div class="col-xs-6 col-6"><span class="voltageTitle">Continuous Stall Torque:</span><span class="voltageName" id="continuousStallTorque">'+r.motorData[r.motorSelectedIndex].continuousStallTorque+" V</span></div>");f.append(x);var S=e('<div class="col-xs-12 col-12 solutionInfoContainer row"></div>');l.append(S);var h=e('<div class="col-xs-6 col-6"><span class="voltageTitle">Inertia:</span><span class="voltageName" id="voltageInfoId">'+r.motorData[r.motorSelectedIndex].motorInertia+'</span><div class="display-inline">kg-m<sup>2</sup></div></div>');S.append(h);var T=e('<div class="col-xs-6 col-6"><span class="solutionStatusTitle">Solution Status:</span><span class="solutionStatus motorPass" id="statusValueContainer">Pass</span></div>');S.append(T),i.find("#PaginationDiv").Folio({totalPages:r.motorData.length,maxPages:9,activePage:r.motorSelectedIndex,previousClass:"fa fa-chevron-left",nextClass:"fa fa-chevron-right",onUpdate:function(e){r.firstTimeCall=e,o(e)}}),p()},p=function(){var e=i.find(".tsCruveContainer");e.width()<=840?(e.find("#servoMotorArea").addClass("resizeWidth"),e.find("#servoMotorTSCurve").addClass("resizeWidth")):(e.find("#servoMotorArea").removeClass("resizeWidth"),e.find("#servoMotorTSCurve").removeClass("resizeWidth"))},c=function(e,a){var o=t.getData();switch(r.transmissionRaioVal=parseFloat(a),e){case"PeakTorque":r.peakMotorData[1]=parseFloat(r.peakPoints[1])/r.transmissionRaioVal+r.peakAcceMotor*r.motorInertia,o[1].data[0][1]=r.peakMotorData[1],i.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[1]);break;case"RmsTorque":r.rmsMotorData[1]=parseFloat(r.rmsPoints[1])/r.transmissionRaioVal+r.rmsAcceMotor*r.motorInertia,o[3].data[0][1]=r.rmsMotorData[1],i.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsMotorData[1]);break;case"PeakSpeed":r.rmsMotorData[0]=r.peakMotorData[0]=r.peakPoints[0]*r.transmissionRaioVal,o[1].data[0][0]=o[3].data[0][0]=r.rmsMotorData[0],i.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[0]);break;case"RmsAcceleration":r.rmsAcceMotor=r.rmsAcceData*r.transmissionRaioVal,r.rmsMotorData[1]=parseFloat(r.rmsPoints[1])/r.transmissionRaioVal+r.rmsAcceMotor*r.motorInertia,o[3].data[0][1]=r.rmsMotorData[1],i.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsMotorData[1]),i.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsAcceMotor);break;case"PeakAcceleration":r.peakAcceMotor=r.peakAcceData*r.transmissionRaioVal,r.peakMotorData[1]=parseFloat(r.peakPoints[1])/r.transmissionRaioVal+r.peakAcceMotor*r.motorInertia,o[1].data[0][1]=r.peakMotorData[1],i.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[1]),i.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.peakAcceMotor);break;case"TransmissionRatio":r.peakAcceMotor=r.peakAcceData*r.transmissionRaioVal,r.rmsAcceMotor=r.rmsAcceData*r.transmissionRaioVal,o[1].data[0][0]=o[3].data[0][0]=r.rmsMotorData[0]=r.peakMotorData[0]=r.peakPoints[0]*r.transmissionRaioVal,o[1].data[0][1]=r.peakMotorData[1]=r.peakPoints[1]/r.transmissionRaioVal+r.peakAcceMotor*r.motorInertia,o[3].data[0][1]=r.rmsMotorData[1]=r.rmsPoints[1]/r.transmissionRaioVal+r.rmsAcceMotor*r.motorInertia,i.find(".cosmatt-unitComboBox").length>0&&(i.find(".peakTorqueMotorSide").find(".cosmatt-unitComboBox")&&i.find(".peakTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[1]),i.find(".rmsTorqueMotorSide").find(".cosmatt-unitComboBox")&&i.find(".rmsTorqueMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsMotorData[1]),i.find(".peakSpeedMotorSide").find(".cosmatt-unitComboBox")&&i.find(".peakSpeedMotorSide").data("unitsComboBox").setTextBoxValue(r.peakMotorData[0]),i.find(".rmsAccelerationMotorSide").find(".cosmatt-unitComboBox")&&i.find(".rmsAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.rmsAcceMotor),i.find(".peakAccelerationMotorSide").find(".cosmatt-unitComboBox")&&i.find(".peakAccelerationMotorSide").data("unitsComboBox").setTextBoxValue(r.peakAcceMotor))}y(o),m()},m=function(){var e=b(r.motorData[r.motorSelectedIndex]).status;if(r.showMotorSelForm){var a=i.find("#statusValueContainer");a.removeClass("motorPass"),a.removeClass("motorFail"),a.addClass(e?"motorPass":"motorFail"),a.text(e?"Pass":"Fail")}if(r.showAppPointsForm){var o=i.find("#servoMotorArea #tsPointsPanelContainer #statusValueContainer");o.find(".motorStatusIcon").removeClass("glyphicon-remove").removeClass("glyphicon-ok").addClass(e?"glyphicon-ok":"glyphicon-remove"),o.find("#statusValueLabel").text(e?"Motor Pass":"Motor Fail")}},f=function(a){var o=e('<div class="panel panel-default"></div>');a.append(o);var t=e('<div class="panel-heading" role="tab" id="headingTwo"> <h4 class="panel-title"> <a role="button"  data-toggle="collapse"  href="#collapseTwo'+r.uniqeId+'" aria-controls="collapseTwo" aria-expanded="false"><span>Application Torque Speed Requirements </span><span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');o.append(t);var i=e('<div id="collapseTwo'+r.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo"></div>');o.append(i),o.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),o.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),r.showMotorSelForm||i.addClass("in"),x(i)},v=function(a){var o=t.getData();switch(a){case"PeakSpeed":o[1].data[0][0]=r.peakPoints[0]=i.find("#peakSpeedSlider").slider("getValue"),r.defaultPeakSpeed=i.find("#peakSpeedSlider").slider("getValue"),i.find("#peakSpeedValue").val(e("#peakSpeedSlider").slider("getValue"));break;case"PeakTorque":o[1].data[0][1]=r.peakPoints[1]=i.find("#peakTorqueSlider").slider("getValue"),r.defaultPeakTorque=i.find("#peakTorqueSlider").slider("getValue"),i.find("#peakTorqueValue").val(e("#peakTorqueSlider").slider("getValue"));break;case"RmsSpeed":o[3].data[0][0]=r.rmsPoints[0]=i.find("#rmsSpeedSlider").slider("getValue"),r.defaultRmsSpeed=i.find("#rmsSpeedSlider").slider("getValue"),i.find("#rmsSpeedValue").val(e("#rmsSpeedSlider").slider("getValue"));break;case"RmsTorque":o[3].data[0][1]=r.rmsPoints[1]=i.find("#rmsTorqueSlider").slider("getValue"),r.defaultRmsTorque=i.find("#rmsTorqueSlider").slider("getValue"),i.find("#rmsTorqueValue").val(e("#rmsTorqueSlider").slider("getValue"));break;case"TransmissionRatio":var n=i.find("#trRatioSlider").slider("getValue"),o=t.getData();o[1].data[0][0]=r.peakPoints[0]=(r.defaultPeakSpeed*n).toFixed(2),o[1].data[0][1]=r.peakPoints[1]=(r.defaultPeakTorque/n).toFixed(2),o[3].data[0][0]=r.rmsPoints[0]=(r.defaultRmsSpeed*n).toFixed(2),o[3].data[0][1]=r.rmsPoints[1]=(r.defaultRmsTorque/n).toFixed(2),o[1].data[0][0]>r.sliderLimit.peakMaxSpeed?i.find("#peakSpeedSlider").slider("setAttribute","max",parseInt(o[1].data[0][0])):i.find("#peakSpeedSlider").slider("setAttribute","max",r.sliderLimit.peakMaxSpeed),o[3].data[0][0]>r.sliderLimit.rmsMaxSpeed?i.find("#rmsSpeedSlider").slider("setAttribute","max",parseInt(o[3].data[0][0])):i.find("#rmsSpeedSlider").slider("setAttribute","max",r.sliderLimit.rmsMaxSpeed),i.find("#peakSpeedSlider").slider("setValue",o[1].data[0][0]),i.find("#peakTorqueSlider").slider("setValue",o[1].data[0][1]),i.find("#rmsSpeedSlider").slider("setValue",o[3].data[0][0]),i.find("#rmsTorqueSlider").slider("setValue",o[3].data[0][1]),i.find("#trRatioValue").val(n),i.find("#peakSpeedValue").val(o[1].data[0][0]),i.find("#peakTorqueValue").val(o[1].data[0][1]),i.find("#rmsSpeedValue").val(o[3].data[0][0]),i.find("#rmsTorqueValue").val(o[3].data[0][1])}y(o),m()},x=function(a){var o=e('<div class="panel-body"></div>');a.append(o);var t=e('<div id="tsPointsPanelContainer"></div>');o.append(t);var n=e('<div class="row" id="sliderContainer"></div>');t.append(n);var s=e('<div class="col-xs-2 col-2 title"></div>');n.append(s);var l=e('<div class="col-xs-5 col-5"><div class="titleTextLoad ">Load Side</div></div>');n.append(l);var d=e('<div class="col-xs-5 col-5"><div class="titleTextMotor">Motor Side</div></div>');n.append(d);var u=e('<div id="sliderContainer" class="row"></div>');t.append(u);var p=e('<div class="col-xs-2 col-2 title"><span id="peakTorqueTitle" title="Peak Torque">Peak Torque: </span></div>');u.append(p);var m=e('<div class="col-xs-5 col-5  peakTorqueDataSide"></div>');u.append(m);var f=e('<div class="col-xs-5 col-5  peakTorqueMotorSide"> </div>');u.append(f),m.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",step:".1",min:0,value:r.peakPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value<r.rmsPoints[1])return i.find(".peakTorqueDataSide").data("unitsComboBox").setTextBoxValue(r.peakPoints[1]),D("Peak Torque can not be less than RMS Torque."),!1;D(""),r.peakPoints[1]=this.SIValue,c("PeakTorque",r.transmissionRaioVal)}}}),f.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",value:r.peakMotorData[1],enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}}),r.disableControls&&r.disableControls.peakTorqueTextBox&&i.find("#peakTorqueValue").attr("disabled",!0);var v=e('<div id="sliderContainer" class="row"></div>');t.append(v);var x=e('<div class="col-xs-2 col-2 title"><span id="rmsTorqueTitle" title="RMS Torque">RMS Torque: </sapn></div>');v.append(x);var S=e('<div class="col-xs-5 col-5  rmsTorqueLoadSide"></div>');v.append(S);var h=e('<div class="col-xs-5 col-5  rmsTorqueMotorSide"> </div>');v.append(h),S.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",step:".1",min:0,value:r.rmsPoints[1],comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>r.peakPoints[1])return i.find(".rmsTorqueLoadSide").data("unitsComboBox").setTextBoxValue(r.rmsPoints[1]),D("RMS Torque can not be greater than Peak Torque."),!1;D(""),r.rmsPoints[1]=this.SIValue,c("RmsTorque",r.transmissionRaioVal)}}}),h.unitsComboBox({unitType:"TORQUE",unit:"newtonmeter",mode:"spin",value:r.rmsMotorData[1],enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}}),r.disableControls&&r.disableControls.rmsTorqueTextBox&&i.find("#rmsTorqueValue").attr("disabled",!0);var T=e('<div id="sliderContainer" class="row"></div>');t.append(T);var k=e('<div class="col-xs-2 col-2 title"><span id="peakSpeedTitle" title="Peak Speed">Peak Speed: </sapn></div>');T.append(k);var C=e('<div class="col-xs-5 col-5  peakSpeedLoadSide"></div>');T.append(C);var q=e('<div class="col-xs-5 col-5  peakSpeedMotorSide"></div>');T.append(q),C.unitsComboBox({unitType:"ANGULARVELOCITY",unit:"revolutionsperminute",mode:"spin",min:0,value:r.peakPoints[0],comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){void 0!=this.type&&"dropdown"!=this.type&&(r.peakPoints[0]=this.SIValue,c("PeakSpeed",r.transmissionRaioVal))}}),q.unitsComboBox({unitType:"ANGULARVELOCITY",unit:"revolutionsperminute",mode:"spin",value:r.peakMotorData[0],enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}});var b=e('<div id="sliderContainer" class="row"></div>');t.append(b);var g=e('<div class="col-xs-2 col-2 title"><div title="Peak Acceleration" class="peakAccele">Peak Acceleration: </div></div>');b.append(g);var M=e('<div class="col-xs-5 col-5  peakAccelerationLoadSide"></div>');b.append(M);var P=e('<div class="col-xs-5 col-5  peakAccelerationMotorSide"></div>');b.append(P),M.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"revolutions",mode:"spin",value:r.peakAcceData,min:0,comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value<r.rmsAcceData)return i.find(".peakAccelerationLoadSide").data("unitsComboBox").setTextBoxValue(r.peakAcceData),D("Peak Acceleration can not be less than RMS Acceleration."),!1;D(""),r.peakAcceData=this.SIValue,c("PeakAcceleration",r.transmissionRaioVal)}}}),P.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"revolutions",mode:"spin",value:r.peakAcceMotor,enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}});var A=e('<div id="sliderContainer" class="row"></div>');t.append(A);var y=e('<div class="col-xs-2 col-2 title"><div id="rmsSpeedTitle" title="RMS Acceleration" class="rmsAccele">RMS Acceleration: </div></div>');A.append(y);var w=e('<div class="col-xs-5 col-5  rmsAccelerationLoadSide"></div>');A.append(w);var V=e('<div class="col-xs-5 col-5  rmsAccelerationMotorSide"></div>');if(A.append(V),w.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",mode:"spin",min:0,value:r.rmsAcceData,comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){if(void 0!=this.type&&"dropdown"!=this.type){if(this.value>r.peakAcceData)return i.find(".rmsAccelerationLoadSide").data("unitsComboBox").setTextBoxValue(r.rmsAcceData),D("RMS Acceleration can not be greater than Peak Acceleration."),!1;D(""),r.rmsAcceData=this.SIValue,c("RmsAcceleration",r.transmissionRaioVal)}}}),V.unitsComboBox({unitType:"ANGULARACCELERATION",unit:"radianpersecondsquare",mode:"spin",value:r.rmsAcceMotor,enable:{textbox:"false",comboBox:"true"},comboBoxWidthRatio:{textBox:"50%",comboBox:"42%"},callBackFn:function(){}}),r.disableControls&&r.disableControls.rmsSpeedTextBox&&i.find("#rmsSpeedValue").attr("disabled",!0),r.showMotorTsCurve){var B=e('<div id="sliderContainer" class="row"></div>');t.append(B)}t.append('<div id="alertMessageContainer" class="alert alert-warning"><strong>Warning:-&nbsp;&nbsp;</strong><span></span></div>');var D=function(e){return""===e?void t.find("#alertMessageContainer").hide():(t.find("#alertMessageContainer span").text(e),t.find("#alertMessageContainer").show(),void setTimeout(function(){t.find("#alertMessageContainer").fadeOut("slow")},3e3))}},S=function(a){var o=e('<div class="panel panel-default"></div>');a.append(o);var t=e('<div class="panel-heading" role="tab" id="headingThree"> <h4 class="panel-title"> <a role="button"   data-toggle="collapse"  href="#collapseThree'+r.uniqeId+'" aria-controls="collapseThree" aria-expanded="false"><span> Environmental Factors</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');o.append(t);var i=e('<div id="collapseThree'+r.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree"></div>');o.append(i);var n=e('<div class="panel-body"></div>');i.append(n),o.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),o.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),h(n)},h=function(a){var o=e('<div id="envFactorsPanelContainer"></div>');a.append(o);var s=e('<div id="sliderContainer" class="row"></div>');o.append(s);var l=e('<div class="col-xs-3 col-3 title"><span id="tempTitle">Temperature: </span></div>');s.append(l);var d=e('<div class="col-xs-4 col-4  "><input id="tempSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');s.append(d);var u=r.sliderLimit.maxTemp||n.sliderLimit.maxTemp,p=e('<div class="col-xs-5 col-5   display-flex margin-bottom"> <div class="input-group spinner" data-trigger="spinner" id="tempValueSpinner"><input id="tempValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+u+'" data-min="0" data-step="1"  value="'+r.motorData[r.motorSelectedIndex].temp+'" data-rule="percent"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label style="padding-top: 3px" class="value">&nbsp;&nbsp;&#176;C</label></div>');s.append(p),p.append('<div class="response-status"><span class="fa"></span><span class="correct-answer"></span></div>'),r.defaultPeakStallTorque=r.motorData[r.motorSelectedIndex].peakStallTorque,r.defaultRollOffPoint=r.motorData[r.motorSelectedIndex].rollOffPoint,r.defaultRollOffSpeed=r.motorData[r.motorSelectedIndex].rollOffSpeed,r.defaultPeakTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].peakTorqueAtMaxSpeed,r.defaultContinuousStallTorque=r.motorData[r.motorSelectedIndex].continuousStallTorque,r.defaultContinuosTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed,s.find("#tempSlider").slider({value:r.motorData[r.motorSelectedIndex].temp,min:0,max:u,step:1}).on("change",function(e){i.find("#tempValue").val(e.value.newValue);var a=e.value.newValue-e.value.oldValue;0!==a&&(c("peakPlot",e.value.newValue),c("rmsPlot",e.value.newValue))}),r.disableControls&&r.disableControls.tempSlider&&s.find("#tempSlider").slider("disable"),i.find("#tempValueSpinner").spinner("changed",function(e,a,o){i.find("#tempSlider").slider("setValue",parseInt(a)),c("peakPlot",parseInt(a)),c("rmsPlot",parseInt(a))}),r.disableControls&&r.disableControls.tempTextBox&&i.find("#tempValue").attr("disabled",!0);var c=function(e,a){var o=t.getData(),i=a,n=40,s=155,l=25,d=i+.6*(s-i),u=n+.6*(s-n),p=-.0015,c=1-(i-n)/(s-n),f=(l+234.5)/(u+234.5),v=1+(d-u)*p;switch(e){case"peakPlot":for(var x=o[0].data,S=0;S<x.length;S++)void 0!=r.motorData[r.motorSelectedIndex]&&(0!=S&&12!=S&&6!=S||(x[S][1]=r.defaultPeakStallTorque*v,0==S&&(r.motorData[r.motorSelectedIndex].peakStallTorque=x[S][1]),6==S&&(x[S][1]=-x[S][1])),1!=S&&7!=S||(x[S][1]=r.defaultRollOffPoint*v,x[S][0]=r.defaultRollOffSpeed/v,r.motorData[r.motorSelectedIndex].rollOffPoint=x[S][1],r.motorData[r.motorSelectedIndex].rollOffSpeed=x[S][0],7==S&&(x[S][0]=-x[S][0],x[S][1]=-x[S][1])),2!=S&&8!=S||(x[S][1]=r.defaultPeakTorqueAtMaxSpeed*v,r.motorData[r.motorSelectedIndex].peakTorqueAtMaxSpeed=x[S][1],8==S&&(x[S][1]=-x[S][1])));o[0].data=x;break;case"rmsPlot":for(var h=o[2].data,S=0;S<h.length;S++)void 0!=r.motorData[r.motorSelectedIndex]&&(0!=S&&10!=S&&5!=S||(h[S][1]=r.defaultContinuousStallTorque*(v*Math.sqrt(c/f)),r.motorData[r.motorSelectedIndex].continuousStallTorque=h[S][1],5==S&&(h[S][1]=-h[S][1])),1!=S&&6!=S||(h[S][1]=r.defaultContinuosTorqueAtMaxSpeed*(v*Math.sqrt(c/f)),r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=h[S][1],6==S&&(h[S][1]=-h[S][1])));o[2].data=h}y(o),m()},f=e('<div id="sliderContainer" class="row"></div>');o.append(f);var v=e('<div class="col-xs-3 col-3 title"><span id="altitudeTitle">Altitude: </span></div>');f.append(v);var x=e('<div class="col-xs-4 col-4  "><input id="altitudeSlider" data-slider-id="sizeSlider" type="text" data-slider-tooltip="hide"/></div>');f.append(x);var u=r.sliderLimit.maxAltitude||n.sliderLimit.maxAltitude,S=e('<div class="col-xs-5 col-5   display-flex margin-bottom"> <div class="input-group spinner" data-trigger="spinner" id="altitudeSpinner"><input id="altitudeValue" type="text" class="form-control text-center widget-textbox-height" data-max="'+u+'" data-min="0" data-step="1"  value="'+r.motorData[r.motorSelectedIndex].altitude+'" data-rule="currency"><div class="input-group-addon"><a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a><a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a></div></div><label style="padding-top: 10px" class="value"></label>&nbsp;&nbsp;m</div>');
f.append(S),r.defaultContinuousStallTorque=r.motorData[r.motorSelectedIndex].continuousStallTorque,r.defaultContinuosTorqueAtMaxSpeed=r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed,x.find("#altitudeSlider").slider({value:r.motorData[r.motorSelectedIndex].altitude,min:0,max:1e4,step:1}).on("change",function(e){i.find("#altitudeValue").val(e.value.newValue);var a=t.getData(),o=a[2].data;if(e.value.newValue>1500){var n=[1-(e.value.newValue-1500)/1e4];o[0][1]=o[10][1]=(r.defaultContinuousStallTorque*n).toFixed(3),o[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*n).toFixed(3),a[2].data=o,r.motorData[r.motorSelectedIndex].continuousStallTorque=o[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=o[1][1]}else{var n=1;o[0][1]=o[10][1]=(r.defaultContinuousStallTorque*n).toFixed(3),o[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*n).toFixed(3),a[2].data=o,r.motorData[r.motorSelectedIndex].continuousStallTorque=o[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=o[1][1]}y(a),m()}),r.disableControls&&r.disableControls.altitudeSlider&&x.find("#altitudeSlider").slider("disable"),i.find("#altitudeSpinner").spinner("changed",function(e,a,o){var n=parseInt(a),s=t.getData(),l=s[2].data;if(i.find("#altitudeSlider").slider("setValue",n),n>1500){var d=[1-(n-1500)/1e4];l[0][1]=l[10][1]=(r.defaultContinuousStallTorque*d).toFixed(3),l[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*d).toFixed(3),s[2].data=l,r.motorData[r.motorSelectedIndex].continuousStallTorque=l[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=l[1][1]}else{var d=1;l[0][1]=l[10][1]=(r.defaultContinuousStallTorque*d).toFixed(3),l[1][1]=(r.defaultContinuosTorqueAtMaxSpeed*d).toFixed(3),s[2].data=l,r.motorData[r.motorSelectedIndex].continuousStallTorque=l[0][1],r.motorData[r.motorSelectedIndex].continuosTorqueAtMaxSpeed=l[1][1]}y(s),m()}),r.disableControls&&r.disableControls.transmRatioTextBox&&i.find("#altitudeValue").attr("disabled",!0)},T=function(a){var o=e('<div class="panel panel-default"></div>');a.append(o);var t=e('<div class="panel-heading" role="tab" id="headingFour"> <h4 class="panel-title"> <a role="button"  data-toggle="collapse"  href="#collapseFour'+r.uniqeId+'" aria-controls="collapseFour" aria-expanded="false"><span> Transmission Ratio</span> <span class="accordion-plus-minus glyphicon pull-right glyphicon-chevron-down fa fa-chevron-down" aria-hidden="true" style="color: grey;"></span> </a> </h4> </div>');o.append(t);var i=e('<div id="collapseFour'+r.uniqeId+'" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour"></div>');o.append(i);var n=e('<div class="panel-body"></div>');i.append(n),o.on("show.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-down fa fa-chevron-down").addClass("glyphicon-chevron-up fa fa-chevron-up")}),o.on("hide.bs.collapse",function(a){e(this).find(".accordion-plus-minus").removeClass("glyphicon-chevron-up fa fa-chevron-up").addClass("glyphicon-chevron-down fa fa-chevron-down")}),k(n)},k=function(a){var o=e('<div id="transmissionRatioPanelContainer"></div>');a.append(o);var t=e('<div id="sliderContainer" class="row"></div>');o.append(t);var s=e('<div class="col-xs-4 col-4 title"><span id="trRatioTitle">Transmission Ratio: </span></div>');t.append(s);var l=e('<div class="col-xs-6 col-6 margin-bottom"><div class="tansmComboBox"> </div><lable class="value">&nbsp;: 1</label></div>');t.append(l),r.defaultRmsTorque=r.rmsMotorData[1],r.defaultRmsSpeed=r.rmsMotorData[0],r.defaultPeakTorque=r.peakMotorData[1],r.defaultPeakSpeed=r.peakMotorData[0],l.find(".tansmComboBox").unitsComboBox({unitType:"PERCENTAGE",unit:"percentage",mode:"spin",value:r.transmissionRaioVal,min:1,showTextBoxOnly:"true",max:r.sliderLimit.maxTrRatio||n.sliderLimit.maxTrRatio,comboBoxWidthRatio:{textBox:"100%",comboBox:"0"},callBackFn:function(){void 0!=this.type&&"dropdown"!=this.type&&c("TransmissionRatio",this.value)}}),r.disableControls&&r.disableControls.transmRatioSlider&&$trRatioSlider.find("#trRatioSlider").slider("disable"),r.disableControls&&r.disableControls.transmRatioTextBox&&i.find("#trRatioValue").attr("disabled",!0)},C=function(a){var t=e('<div class="tsPlotContainer"></div>');a.append(t);var i=e('<div class="tsPlotArea"></div>');t.append(i),o(r.motorSelectedIndex),q()},q=function(){var e=[],a={colors:[r.graphLineColor.peakTSCurve,r.graphLineColor.peakTSCurve,r.graphLineColor.contionusTSCurve,r.graphLineColor.contionusTSCurve],series:{points:{show:!0}},legend:{backgroundOpacity:0},coordinate:{type:"rectangular"},axisLabels:{show:!0},xaxis:{axisLabel:"Speed (rpm)"},yaxis:{axisLabel:"Torque (N-m)"},grid:{hoverable:!0,clickable:!0,borderWidth:1,borderColor:"#D9D9D9",margin:0,markings:[{yaxis:{from:0,to:0},color:"#333"},{xaxis:{from:0,to:0},color:"#333"}]},tooltip:!0,tooltipOpts:{cssClass:"tsCurveFlotTip",content:function(e,a,o,t){var i="";switch(t.seriesIndex){case 0:switch(t.dataIndex){case 0:i="Peak Stall Torque <br />";break;case 1:i="Roll Off Point<br />";break;case 2:i="Peak Torque at Max Speed <br />";break;case 3:i="Max Speed at Zero Torque <br />"}break;case 1:i="Peak T/S Point <br />";break;case 2:switch(t.dataIndex){case 0:i="Continuous Stall Torque <br />";break;case 1:i="Continuous Stall Torque at Max Speed <br />";break;case 2:i="Max Speed Point <br />"}break;case 3:i="RMS T/S Point <br />"}return i+"Speed: "+a+", Torque: "+o},defaultTheme:!1,shifts:{x:0,y:20}}};1==r.quadrant&&(a.xaxis.min=0,a.yaxis.min=0);var o=[],i=[],n=[],s=[],l=[],d=[],u=[],p=[],c=function(){o=[],i=[],n=[],s=[],l=[],d=[],u=[],p=[]},m=function(e){var a=e.maxSpeed;l=[[0,e.peakStallTorque],[e.rollOffSpeed,e.rollOffPoint],[a,e.peakTorqueAtMaxSpeed],[a,0]],u=[[0,e.continuousStallTorque],[a,e.continuosTorqueAtMaxSpeed],[a,0]]},f=function(e){var a=-1*e.maxSpeed;d=[[a,0],[a+1,e.peakStallTorque]],p=[[a,0],[a+1,e.continuousStallTorque]]},v=function(e){o=o.concat(l),i=i.concat(u)},x=function(e){var a=[],t=[];d.length>0&&d.forEach(function(e,o,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],a[o]=i}),o=o.concat(a),p.length>0&&p.forEach(function(e,a,o){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],t[a]=i}),i=i.concat(t)},S=function(e){var a=[],t=[];l.length>0&&l.forEach(function(e,o,t){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],a[o]=i}),o=o.concat(a),u.length>0&&u.forEach(function(e,a,o){var i=[];i[0]=-1*e[0],i[1]=-1*e[1],t[a]=i}),i=i.concat(t)},h=function(e){o=o.concat(d),i=i.concat(p)},T=function(e){o.push([0,e.peakStallTorque]),i.push([0,e.continuousStallTorque])},k=function(e){var a=e.temp,o=40,t=155,i=25,n=a+.6*(t-a),r=o+.6*(t-o),s=-.0015,l=1-(a-o)/(t-o),d=(i+234.5)/(r+234.5),u=1+(n-r)*s;return e.peakStallTorque=(e.peakStallTorque*u).toFixed(2),e.rollOffPoint=(e.rollOffPoint*u).toFixed(2),e.rollOffSpeed=(e.rollOffSpeed/u).toFixed(2),e.continuousStallTorque=(e.continuousStallTorque*(u*Math.sqrt(l/d))).toFixed(2),e.continuosTorqueAtMaxSpeed=(e.continuosTorqueAtMaxSpeed*(u*Math.sqrt(l/d))).toFixed(2),e},C=function(e){v(e),x(e),S(e),h(e),T(e)},q=function(e){if(c(),"0"==r.firstTimeCall){var a=k(e);m(a),f(a),C(a)}else m(e),f(e),C(e)};r.showMotorTsCurve&&q(r.motorData[r.motorSelectedIndex]),r.showApplicationPoints&&(n.push(r.peakMotorData),s.push(r.rmsMotorData)),e.push({data:o,label:"Peak T-S Curve",lines:{lineWidth:2,show:!0}},{data:n,label:"",points:{show:!0,fillColor:r.graphLineColor.peakTSCurve,radius:4}},{data:i,label:"Continous T-S Curve",lines:{lineWidth:2,show:!0}},{data:s,label:"",points:{show:!0,fillColor:r.graphLineColor.contionusTSCurve,radius:4}}),t?y(e,a):P(e,a)},b=function(e){function a(e,a,o,t){var n=!1,r=(a[1]-e[1])/(a[0]-e[0]),s=e[1]-r*e[0],l=-1,d=r*o[0]-o[1]+s;if(n=0==d||d>0&&0>l||0>d&&l>0,t){var u=o[0]*o[1],f=o[0]*(r*o[0]+s),v=100*u/f;m.push(v)}else{var x=100*o[1]/(r*o[0]+s),S=100*o[0]/i.maxSpeed;p.push(x),c.push(S)}return n}function o(e){var a=100*e[1]/i.peakStallTorque,o=100*e[0]/i.maxSpeed;p.push(a),c.push(o)}function t(e){var a=e[0]*e[1],o=e[0]*i.continuousStallTorque,t=100*a/o;m.push(t)}var i=e,n=r.peakMotorData,s=r.rmsMotorData,l={PeakStallPoint:{x:0,y:i.peakStallTorque},RollOffPoint:{x:i.rollOffSpeed,y:i.rollOffPoint},PeakTarqueAtMaxSpeedPoint:{x:i.maxSpeed,y:i.peakTorqueAtMaxSpeed},ContinuousStallTorquePoint:{x:0,y:i.continuousStallTorque},ContinuousStallTorqueMaxSpeedPoint:{x:i.maxSpeed,y:i.continuosTorqueAtMaxSpeed}},d=0,u=null,p=[],c=[],m=[],f=null,v=null,x=null,S={status:u,torqueUtilization:f,speedUtilization:v,avgPower:x},h=s[0],T=s[1],k=n[0],C=n[1],q=!1,b=!1,g=null,M=null,P=null;return h<=i.maxSpeed?(g=[l.ContinuousStallTorquePoint.x,l.ContinuousStallTorquePoint.y],M=[l.ContinuousStallTorqueMaxSpeedPoint.x,l.ContinuousStallTorqueMaxSpeedPoint.y],P=[h,T],b=a(g,M,P,!0)):(d=-1,t([h,T])),C<=i.peakStallTorque&&k<=i.maxSpeed?k<=l.RollOffPoint.x?(g=[l.PeakStallPoint.x,l.PeakStallPoint.y],M=[l.RollOffPoint.x,l.RollOffPoint.y],P=[k,C],q=a(g,M,P,!1)):(g=[l.RollOffPoint.x,l.RollOffPoint.y],M=[l.PeakTarqueAtMaxSpeedPoint.x,l.PeakTarqueAtMaxSpeedPoint.y],P=[k,C],q=a(g,M,P,!1)):(d=-1,o([k,C])),-1!=d&&0!=q&&0!=b||(d=-1),-1==d?S.status=!1:0==d&&(S.status=!0),S.torqueUtilization=Math.max.apply(Math,p),S.speedUtilization=Math.max.apply(Math,c),S.avgPower=Math.max.apply(Math,m),S},g=function(){var e=t.getAxes();if(r.showMotorTsCurve){var a=Math.max(r.peakMotorData[1]+1,r.rmsMotorData[1]+1,35);e.yaxis.datamax<a?t.getOptions().yaxes[0].max=a:t.getOptions().yaxes[0].max=e.yaxis.datamax+30}if(!r.showMotorTsCurve){var o=Math.max(r.peakMotorData[0]+50,r.rmsMotorData[0]+50,200),a=Math.max(r.peakMotorData[1]+10,r.rmsMotorData[1]+10,150);t.getOptions().yaxes[0].max=a,t.getOptions().xaxes[0].max=o,4===r.quadrant&&(t.getOptions().yaxes[0].min=-1*a,t.getOptions().xaxes[0].min=-1*o)}},M=function(){4==r.quadrant?(t.getOptions().grid.markings[0].color="#bdbdbd",t.getOptions().grid.markings[1].color="#bdbdbd"):(t.getOptions().grid.markings[0].color="#333",t.getOptions().grid.markings[1].color="#333"),g(),t.setupGrid(),t.draw()},P=function(a,o){setTimeout(function(){t=e.plot(i.find(".tsPlotArea"),a,o),M(),A()},0)},A=function(){i.find(".tsCruveContainer").resize(function(a){var o=e(this);o.width()<=780?(o.find("#servoMotorArea").addClass("resizeWidth"),o.find("#servoMotorTSCurve").addClass("resizeWidth"),o.find(".tsPlotArea").css("min-height",o.find(".tsPlotArea").width()),o.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%")):o.width()>780&&o.width()<1280?(o.find("#servoMotorArea").removeClass("resizeWidth"),o.find("#servoMotorTSCurve").removeClass("resizeWidth"),o.find(".tsPlotArea").css("min-height",o.find(".tsPlotArea").width()),o.find("#servoMotorArea").find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").css("width","auto"),o.find("#servoMotorArea").find(".response-status").attr("title",i.find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").text())):(o.find("#servoMotorArea").removeClass("resizeWidth"),o.find("#servoMotorTSCurve").removeClass("resizeWidth"),o.find(".tsPlotArea").css("min-height",o.find(".tsPlotArea").width()),o.find("#servoMotorArea").find(".response-status").find(".correct-answer").css("width","88%"))})},y=function(e,a){a&&(void 0!=a.xaxis.min&&void 0!=a.yaxis.min?(t.getOptions().yaxes[0].min=a.yaxis.min,t.getOptions().xaxes[0].min=a.xaxis.min):(t.getOptions().yaxes[0].min=null,t.getOptions().xaxes[0].min=null)),t.setData(e),M(),w()},w=function(){r.assessmentMode&&r.assessmentCallback&&r.assessmentCallback({peakTorque:{value:i.find("#peakTorqueValue").val(),unit:"Nm"},peakSpeed:{value:i.find("#peakSpeedValue").val(),unit:"rad/sec"},rmsTorque:{value:i.find("#rmsTorqueValue").val(),unit:"Nm"},rmsSpeed:{value:i.find("#rmsSpeedValue").val(),unit:"rad/sec"},temperature:{value:i.find("#tempValue").val(),unit:"C"},altitude:{value:i.find("#altitudeValue").val(),unit:"m"},transmissionRatio:{value:i.find("#trRatioValue").val(),unit:""},motorSelectedIndex:{value:r.motorSelectedIndex,unit:""}})},V=function(e){e.peakTorque&&(i.find("#peakTorqueSlider").slider("setValue",e.peakTorque.value),i.find("#peakTorqueValue").val(e.peakTorque.value),v("PeakTorque")),e.peakSpeed&&(i.find("#peakSpeedSlider").slider("setValue",e.peakSpeed.value),i.find("#peakSpeedValue").val(e.peakSpeed.value),v("PeakSpeed")),e.rmsTorque&&(i.find("#rmsTorqueSlider").slider("setValue",e.rmsTorque.value),i.find("#rmsTorqueValue").val(e.rmsTorque.value),v("RmsTorque")),e.rmsSpeed&&(i.find("#rmsSpeedSlider").slider("setValue",e.rmsSpeed.value),i.find("#rmsSpeedValue").val(e.rmsSpeed.value),v("RmsSpeed")),e.temperature&&(i.find("#tempSlider").slider("setValue",e.temperature.value),i.find("#tempValue").val(e.temperature.value),v("Temperature")),e.altitude&&(i.find("#altitudeSlider").slider("setValue",e.altitude.value),i.find("#altitudeValue").val(e.altitude.value),v("Altitude")),e.transmissionRatio&&(i.find("#trRatioSlider").slider("setValue",e.transmissionRatio.value),i.find("#trRatioValue").val(e.transmissionRatio.value),v("TransmissionRatio")),e.motorSelectedIndex&&(i.find("#solutionSliderId").slider("setValue",parseInt(r.motorSelectedIndex)),i.find("#PaginationDiv").Folio({activePage:r.motorSelectedIndex}))},B=function(e){var a;if(e.peakTorque&&(a=e.peakTorque.status?"correct":"incorrect",i.find("#peakTorqueValue").addClass(a)),e.peakSpeed&&(a=e.peakSpeed.status?"correct":"incorrect",i.find("#peakSpeedValue").addClass(a)),e.rmsTorque&&(a=e.rmsTorque.status?"correct":"incorrect",i.find("#rmsTorqueValue").addClass(a)),e.rmsSpeed&&(a=e.rmsSpeed.status?"correct":"incorrect",i.find("#rmsSpeedValue").addClass(a)),e.temperature){a=e.temperature.status?"correct":"incorrect",i.find("#tempValue").addClass(a),a=e.temperature.status?"fa-check correct":"fa-times incorrect",i.find("#envFactorsPanelContainer").find(".response-status").css({display:"flex","align-items":"center"}),i.find("#envFactorsPanelContainer").find(".response-status").find("span.fa").addClass(a);var o=e.temperature.status?"":"("+e.temperature.correctAnswer+"&#176;C)";i.find("#envFactorsPanelContainer").find(".response-status").find(".correct-answer").append(o),i.find("#envFactorsPanelContainer").find("#tempSlider").slider("disable"),i.find("#envFactorsPanelContainer").find("#tempValue").attr("disabled",!0)}if(e.altitude&&(a=e.altitude.status?"correct":"incorrect",i.find("#altitudeValue").addClass(a)),e.transmissionRatio&&(a=e.transmissionRatio.status?"correct":"incorrect",i.find("#trRatioValue").addClass(a)),e.motorSelectedIndex){a=e.motorSelectedIndex.status?"fa-check correct":"fa-times incorrect",i.find(".solutionInfoTitle").find(".response-status").css({display:"inline-flex","align-items":"center"}),i.find(".solutionInfoTitle").find(".response-status").find("span.fa").addClass(a);var o=e.motorSelectedIndex.status?"":"(# "+e.motorSelectedIndex.correctAnswer+")";i.find(".solutionInfoTitle").find(".response-status").find(".correct-answer").append(o)}};return s(),{ref:this,updateInputs:V,markAnswers:B}}}(jQuery);